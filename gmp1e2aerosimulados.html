<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GMP 1/2 - AEROSIMULADOS</title>
    <style>
        :root {
            --primary: #1a3a5a;
            --accent: #007bff;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --purple: #6f42c1;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 4px;
            font-size: 13px;
            line-height: 1.3;
        }

        .container {
            max-width: 100%;
            background: white;
            padding: 6px;
            border-radius: 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            position: relative;
            margin: 0 auto;
        }

        .credits-integrated {
            position: absolute;
            top: 2px;
            right: 6px;
            background: var(--primary);
            color: white;
            padding: 1px 3px;
            font-size: 0.5rem;
            font-weight: bold;
            border-radius: 1px;
            z-index: 10;
        }

        /* CABE√áALHO SUPER COMPACTO */
        .header-mini {
            position: sticky;
            top: 0;
            background: white;
            padding-bottom: 4px;
            border-bottom: 1px solid var(--primary);
            z-index: 5;
            margin-bottom: 6px;
            padding-top: 16px;
        }

        .header-mini-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
        }

        .page-title-mini {
            margin: 0;
            color: var(--primary);
            font-size: 0.85rem;
            font-weight: bold;
            line-height: 1.1;
            max-width: 65%;
        }

        .timer-compact {
            background: #f8f9fa;
            color: var(--primary);
            padding: 2px 4px;
            border-radius: 2px;
            font-size: 0.75rem;
            font-weight: bold;
            border: 1px solid #dee2e6;
            min-width: 40px;
            text-align: center;
        }

        .timer-warning {
            background: #fff5f5 !important;
            color: var(--danger) !important;
            border-color: var(--danger) !important;
        }

        /* INFO DO SIMULADO MAIS COMPACTA */
        .simulado-info {
            background: #e7f3ff;
            border: 1px solid var(--accent);
            border-radius: 3px;
            padding: 4px 5px;
            margin-bottom: 5px;
            font-size: 0.65rem;
            color: var(--primary);
            display: none;
        }

        .simulado-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 2px;
            font-weight: 600;
        }

        /* CONTROLES DE HIST√ìRICO COMPACTOS */
        .history-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4px;
            margin-top: 4px;
        }

        .history-controls button {
            padding: 2px 4px;
            font-size: 0.6rem;
            border-radius: 2px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
        }

        .clear-history-btn {
            background: var(--warning);
            color: #856404;
            border: 1px solid #ffc107;
        }

        .info-history-btn {
            background: #6c757d;
            color: white;
        }

        /* INFO B√ÅSICA SUPER COMPACTA */
        .quiz-info-mini {
            background: #f8f9fa;
            border-radius: 3px;
            padding: 5px 6px;
            border: 1px solid #dee2e6;
            margin-bottom: 4px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 4px;
            margin-bottom: 4px;
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 0.55rem;
            color: #6c757d;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 0;
        }

        .info-value {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--primary);
        }

        /* CONTROLES COMPACTOS */
        .controls-compact {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 4px;
        }

        .auto-nav-toggle {
            display: flex;
            align-items: center;
            gap: 3px;
            padding: 2px 4px;
            background: #e9ecef;
            border-radius: 2px;
            cursor: pointer;
            font-size: 0.65rem;
        }

        .auto-nav-checkbox {
            transform: scale(0.8);
            accent-color: var(--primary);
        }

        .auto-nav-label {
            font-weight: 600;
            color: var(--primary);
            white-space: nowrap;
        }

        .reset-btn-mini {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 2px;
            padding: 2px 4px;
            font-size: 0.65rem;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
        }

        /* STATUS COMPACTO */
        .completion-status {
            background: #f8f9fa;
            border-radius: 3px;
            padding: 4px 5px;
            margin: 5px 0;
            border: 1px solid #dee2e6;
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2px;
        }

        .status-text {
            font-size: 0.65rem;
            font-weight: 600;
        }

        .status-count {
            font-size: 0.65rem;
            font-weight: bold;
            color: var(--primary);
        }

        /* PENDENTES SUPER COMPACTOS */
        .pending-compact {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 2px;
            padding: 2px 3px;
            font-size: 0.6rem;
        }

        .pending-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1px;
        }

        .pending-count {
            font-weight: bold;
            color: #856404;
            font-size: 0.65rem;
        }

        .pending-list-compact {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            max-height: 18px;
            overflow-y: auto;
            padding: 1px 0;
        }

        .pending-number {
            background: #ffc107;
            color: #856404;
            font-weight: bold;
            padding: 0 2px;
            border-radius: 1px;
            font-size: 0.55rem;
            min-width: 12px;
            text-align: center;
            line-height: 1.2;
        }

        .pending-number.answered {
            background: #28a745;
            color: white;
            opacity: 0.5;
        }

        /* QUEST√ïES COMPACTAS */
        .question-block-mini {
            margin: 6px 0;
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: 3px;
            background: #fff;
            position: relative;
        }

        .question-text-mini {
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 6px;
            color: var(--primary);
            line-height: 1.2;
        }

        .options-mini {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .option-mini {
            padding: 5px 6px;
            border: 1px solid #eee;
            border-radius: 2px;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 0.75rem;
            min-height: 28px;
            position: relative;
        }

        input[type="radio"] {
            margin-right: 4px;
            transform: scale(0.8);
            accent-color: var(--primary);
        }

        .correct-answer {
            background-color: #d4edda !important;
            border-color: #28a745 !important;
            color: #155724;
        }

        .wrong-answer {
            background-color: #f8d7da !important;
            border-color: #dc3545 !important;
            color: #721c24;
        }

        /* BOT√ÉO DE REPORTAR NAS QUEST√ïES */
        .report-btn {
            background: transparent;
            color: #6c757d;
            border: 1px solid #dee2e6;
            border-radius: 2px;
            padding: 2px 6px;
            font-size: 0.55rem;
            cursor: pointer;
            margin-top: 4px;
            display: flex;
            align-items: center;
            gap: 3px;
            transition: all 0.2s;
        }

        .report-btn:hover {
            background: #f8f9fa;
            color: var(--danger);
            border-color: var(--danger);
        }

        /* BOT√ÉO DE REPORTAR NO GABARITO (canto superior direito) */
        .report-gabarito-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: transparent;
            color: #6c757d;
            border: 1px solid #dee2e6;
            border-radius: 2px;
            padding: 1px 4px;
            font-size: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 2px;
            transition: all 0.2s;
            z-index: 2;
        }

        .report-gabarito-btn:hover {
            background: #f8f9fa;
            color: var(--danger);
            border-color: var(--danger);
        }

        /* BOT√ïES DE NAVEGA√á√ÉO COMPACTOS */
        .nav-buttons {
            display: flex;
            gap: 4px;
            margin: 8px 0;
        }

        .nav-btn {
            flex: 1;
            padding: 6px 4px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 2px;
            font-weight: 600;
            font-size: 0.75rem;
            cursor: pointer;
            text-align: center;
            min-height: 32px;
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            opacity: 0.5;
        }

        /* BOT√ïES PRINCIPAIS COMPACTOS */
        .btn {
            padding: 8px;
            font-size: 0.8rem;
            font-weight: bold;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            width: 100%;
            margin-top: 8px;
            min-height: 36px;
        }

        .btn-finish {
            background: var(--primary);
            color: white;
        }

        .btn-finish:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .btn-restart {
            background: var(--success);
            color: white;
            display: none;
        }

        .btn-restart-success {
            background: linear-gradient(135deg, var(--success), #1e7e34);
            color: white;
            display: none;
        }

        /* BOT√ÉO VOLTAR AO IN√çCIO */
        .btn-voltar-inicio {
            background: linear-gradient(135deg, var(--accent), #0056b3);
            color: white;
            border: none;
            display: none;
        }

        /* BOT√ÉO CONTINUAR BANCO */
        .btn-continuar-banco {
            background: linear-gradient(135deg, var(--info), #138496);
            color: white;
            border: none;
            display: none;
        }

        /* BOT√ÉO DE SIMULADO DE REFOR√áO */
        .btn-reforco {
            background: linear-gradient(135deg, var(--danger), #c82333);
            color: white;
            border: none;
            display: none;
        }

        /* BOT√ÉO DE REINICIAR BANCO */
        .btn-reiniciar-banco {
            background: linear-gradient(135deg, var(--purple), #5a32a3);
            color: white;
            border: none;
            display: none;
        }

        /* BOT√ÉO DE NOVO SIMULADO NO REFOR√áO */
        .btn-novo-simulado-reforco {
            background: linear-gradient(135deg, var(--warning), #e0a800);
            color: #856404;
            border: none;
            display: none;
        }

        /* RESULTADOS COMPACTOS */
        #results {
            display: none;
            padding: 10px;
            text-align: center;
            border: 1px solid var(--primary);
            margin: 8px 0;
            border-radius: 3px;
            background: #f8f9fa;
        }

        .result-title {
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 4px;
            color: var(--primary);
        }

        .score-mini {
            font-size: 1.1rem;
            margin: 4px 0;
            font-weight: 800;
            color: var(--primary);
        }

        /* MENSAGEM DE MOTIVA√á√ÉO */
        .motivation-message {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 3px;
            padding: 8px 10px;
            margin: 8px 0;
            font-size: 0.7rem;
            color: #856404;
            text-align: center;
        }

        .motivation-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .motivation-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .motivation-danger {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        /* MODAL DE REPORTE - ATUALIZADO */
        .report-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .report-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 95%;
            max-width: 500px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .report-title {
            font-size: 1rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
        }

        .report-question-info {
            background: #f8f9fa;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent);
        }

        .report-section {
            margin-bottom: 15px;
        }

        .report-section-title {
            font-size: 0.8rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .report-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin: 10px 0;
        }

        .report-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .report-option:hover {
            background: #f8f9fa;
            border-color: var(--accent);
        }

        .report-option input[type="radio"] {
            margin: 0;
            transform: scale(0.9);
        }

        .report-option label {
            font-size: 0.75rem;
            cursor: pointer;
            flex: 1;
        }

        /* FORMUL√ÅRIO DE IDENTIFICA√á√ÉO */
        .user-info-form {
            background: #f0f8ff;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            border: 1px solid #cce5ff;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-label {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .form-input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 0.8rem;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(0,123,255,0.1);
        }

        .form-input.error {
            border-color: var(--danger);
            background-color: #fff5f5;
        }

        .form-hint {
            font-size: 0.65rem;
            color: #6c757d;
            margin-top: 4px;
            display: block;
        }

        .required-star {
            color: var(--danger);
            font-weight: bold;
        }

        .report-textarea {
            width: 100%;
            min-height: 80px;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 0.8rem;
            resize: vertical;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .report-textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(0,123,255,0.1);
        }

        .report-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .report-submit {
            flex: 2;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 12px;
            font-size: 0.85rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .report-submit:hover {
            background: #0d2c4a;
        }

        .report-submit:disabled {
            background: #6c757d;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .report-cancel {
            flex: 1;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 12px;
            font-size: 0.85rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .report-cancel:hover {
            background: #545b62;
        }

        .report-success {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 5px;
            font-size: 0.8rem;
            text-align: center;
            margin-top: 15px;
            border: 1px solid #c3e6cb;
            display: none;
        }

        .report-error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.75rem;
            text-align: center;
            margin-top: 10px;
            border: 1px solid #f5c6cb;
            display: none;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* SCROLL PERSONALIZADO */
        .pending-list-compact::-webkit-scrollbar {
            height: 2px;
        }
        
        .pending-list-compact::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 1px;
        }
        
        .pending-list-compact::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 1px;
        }

        /* AJUSTES PARA TELAS MUITO PEQUENAS */
        @media (max-width: 320px) {
            body {
                padding: 2px;
                font-size: 12px;
            }
            
            .container {
                padding: 4px;
            }
            
            .page-title-mini {
                font-size: 0.75rem;
                max-width: 60%;
            }
            
            .timer-compact {
                font-size: 0.7rem;
                min-width: 35px;
                padding: 1px 3px;
            }
            
            .info-grid {
                gap: 3px;
            }
            
            .info-label {
                font-size: 0.5rem;
            }
            
            .info-value {
                font-size: 0.7rem;
            }
            
            .question-text-mini {
                font-size: 0.75rem;
            }
            
            .option-mini {
                padding: 4px 5px;
                font-size: 0.7rem;
                min-height: 26px;
            }
            
            .nav-btn, .btn {
                font-size: 0.7rem;
                padding: 5px 3px;
            }
            
            .pending-list-compact {
                max-height: 16px;
            }
            
            .pending-number {
                font-size: 0.5rem;
                min-width: 10px;
            }
            
            .report-gabarito-btn {
                font-size: 0.45rem;
                padding: 1px 3px;
            }
            
            .report-content {
                padding: 15px;
            }
            
            .report-buttons {
                flex-direction: column;
            }
        }

        @media (max-height: 600px) {
            .header-mini {
                padding-top: 10px;
            }
            
            .question-block-mini {
                margin: 4px 0;
                padding: 6px;
            }
            
            .nav-buttons {
                margin: 6px 0;
            }
            
            .btn {
                margin-top: 6px;
                min-height: 32px;
            }
        }
    </style>
</head>
<body>

<div class="container" id="main-container">
    <div class="credits-integrated">BY EWERTON</div>
    
    <div class="header-mini">
        <div class="header-mini-top">
            <h1 class="page-title-mini" id="page-title">Carregando...</h1>
            <div id="timer" class="timer-compact">00:00</div>
        </div>
        
        <div class="simulado-info" id="simulado-info">
            <div>Simulado: <span id="questions-per-simulado">20</span> quest√µes</div>
            <div class="simulado-stats">
                <span id="remaining-questions">Dispon√≠veis: 0</span>
                <span id="recent-used">Usadas: 0</span>
            </div>
            
            <div class="history-controls">
                <button class="clear-history-btn" onclick="clearHistory()">
                    üóëÔ∏è Limpar Hist√≥rico
                </button>
                <button class="info-history-btn" onclick="showHistoryInfo()">
                    ‚ÑπÔ∏è Info
                </button>
            </div>
        </div>
        
        <div class="quiz-info-mini">
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">Quest√£o</div>
                    <div class="info-value" id="question-counter">0/0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Respondidas</div>
                    <div class="info-value" id="answered-counter">0/0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Progresso</div>
                    <div class="info-value" id="progress-percent">0%</div>
                </div>
            </div>
            
            <div class="controls-compact">
                <div class="auto-nav-toggle" onclick="toggleAutoNav()">
                    <input type="checkbox" id="auto-nav-checkbox" class="auto-nav-checkbox" checked>
                    <label class="auto-nav-label">Auto-navega√ß√£o</label>
                </div>
                <button class="reset-btn-mini" onclick="resetQuiz()">
                    ‚Üª Reiniciar
                </button>
            </div>
        </div>

        <div class="completion-status">
            <div class="status-header">
                <span class="status-text">Status:</span>
                <span class="status-count" id="status-count">0/0</span>
            </div>
            <div class="pending-compact" id="pending-questions">
                <div class="pending-summary">
                    <span>Pendentes:</span>
                    <span class="pending-count" id="pending-count">0</span>
                </div>
                <div class="pending-list-compact" id="pending-list">
                    <span style="color: #6c757d; font-style: italic;">Nenhuma pendente</span>
                </div>
            </div>
        </div>
    </div>

    <div id="results">
        <div class="result-title" id="feedback-msg"></div>
        <div class="score-mini" id="final-score"></div>
        <div id="final-percent" style="font-size: 0.8rem; font-weight: bold; margin-bottom: 6px; color: var(--accent);"></div>
        <div id="motivation-message" class="motivation-message"></div>
        <div id="simulado-summary" style="margin-bottom: 8px; font-size: 0.7rem; color: var(--primary);"></div>
        
        <button id="restart-btn" class="btn btn-restart" onclick="startNewQuiz()">üîÑ Refazer Simulado</button>
        <button id="voltar-inicio-btn" class="btn btn-voltar-inicio" onclick="voltarAoInicio()">
            üèÅ Voltar ao In√≠cio
        </button>
        <button id="continuar-banco-btn" class="btn btn-continuar-banco" onclick="continuarComBanco()">
            üìö Continuar com Banco
        </button>
        <button id="wrong-questions-btn" class="btn btn-reforco" onclick="startWrongQuestionsSimulado()">
            ‚ö° Simulado de Refor√ßo
        </button>
        <button id="reiniciar-banco-btn" class="btn btn-reiniciar-banco" onclick="reiniciarBancoCompleto()">
            üîÑ Reiniciar Banco Completo
        </button>
        <button id="new-simulado-btn" class="btn" style="background: var(--accent); color: white; margin-top: 4px; display: none;" onclick="generateNewSimulado()">üé≤ Novo Simulado</button>
        <!-- NOVO BOT√ÉO PARA SIMULADO DE REFOR√áO -->
        <button id="novo-simulado-reforco-btn" class="btn btn-novo-simulado-reforco" onclick="novoSimuladoAposReforco()">
            üéØ Novo Simulado
        </button>
    </div>

    <div id="quiz-content"></div>

    <div class="nav-buttons">
        <button id="prev-btn" class="nav-btn" onclick="prevQuestion()" disabled>
            ‚Üê Anterior
        </button>
        <button id="next-btn" class="nav-btn" onclick="nextQuestion()">
            Pr√≥ximo ‚Üí
        </button>
    </div>

    <button id="finish-btn" class="btn btn-finish" onclick="finalizeQuiz()" disabled>
        üèÅ Finalizar
    </button>
</div>

<!-- MODAL DE REPORTE ATUALIZADO -->
<div id="reportModal" class="report-modal">
    <div class="report-content">
        <div class="report-title">üìù Reportar Quest√£o</div>
        
        <div class="report-question-info">
            <div><strong>Quest√£o #<span id="reportQuestionNumber">1</span></strong></div>
            <div id="reportQuestionText" style="font-size: 0.75rem; margin-top: 5px;">Carregando...</div>
        </div>
        
        <!-- SE√á√ÉO: TIPO DE PROBLEMA -->
        <div class="report-section">
            <div class="report-section-title">üìå Tipo de Problema</div>
            <div class="report-options">
                <div class="report-option">
                    <input type="radio" id="reportError" name="reportType" value="error">
                    <label for="reportError">‚ùå Quest√£o com erro</label>
                </div>
                <div class="report-option">
                    <input type="radio" id="reportWrongAnswer" name="reportType" value="wrong_answer">
                    <label for="reportWrongAnswer">‚ö†Ô∏è Resposta incorreta</label>
                </div>
                <div class="report-option">
                    <input type="radio" id="reportConfusing" name="reportType" value="confusing">
                    <label for="reportConfusing">ü§î Enunciado confuso</label>
                </div>
                <div class="report-option">
                    <input type="radio" id="reportAlternative" name="reportType" value="alternative">
                    <label for="reportAlternative">üî§ Alternativas erradas</label>
                </div>
                <div class="report-option">
                    <input type="radio" id="reportOther" name="reportType" value="other">
                    <label for="reportOther">üìù Outro problema</label>
                </div>
            </div>
        </div>
        
        <!-- SE√á√ÉO: SUA IDENTIFICA√á√ÉO -->
        <div class="report-section">
            <div class="report-section-title">üë§ Sua Identifica√ß√£o <span class="required-star">*</span></div>
            <div class="user-info-form">
                <div class="form-group">
                    <label class="form-label" for="userName">Nome Completo <span class="required-star">*</span></label>
                    <input type="text" id="userName" class="form-input" placeholder="Digite seu nome completo" maxlength="100">
                    <span class="form-hint">Para podermos entrar em contato com voc√™</span>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="userEmail">E-mail <span class="required-star">*</span></label>
                    <input type="email" id="userEmail" class="form-input" placeholder="seu.email@exemplo.com" maxlength="100">
                    <span class="form-hint">Para enviarmos o feedback sobre sua solicita√ß√£o</span>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="userInfo">Institui√ß√£o/Curso (opcional)</label>
                    <input type="text" id="userInfo" class="form-input" placeholder="Ex: SENAI, Engenharia Mec√¢nica" maxlength="100">
                    <span class="form-hint">Ajuda a identificar o contexto do reporte</span>
                </div>
            </div>
        </div>
        
        <!-- SE√á√ÉO: DETALHES -->
        <div class="report-section">
            <div class="report-section-title">üìã Detalhes do Problema</div>
            <textarea 
                id="reportDetails" 
                class="report-textarea" 
                placeholder="Descreva detalhadamente o problema encontrado na quest√£o. Se achar que h√° erro na resposta, explique sua justificativa..."
                maxlength="1000"
            ></textarea>
            <div class="form-hint" style="text-align: right;">
                <span id="charCount">0</span>/1000 caracteres
            </div>
        </div>
        
        <div id="reportErrorMsg" class="report-error"></div>
        
        <div class="report-buttons">
            <button id="cancelReport" class="report-cancel" onclick="closeReportModal()">Cancelar</button>
            <button id="submitReport" class="report-submit" onclick="submitReport()">
                <span id="submitText">Enviar Reporte</span>
                <span id="submitLoading" class="loading-spinner" style="display: none;"></span>
            </button>
        </div>
        
        <div id="reportSuccess" class="report-success">
            ‚úÖ Reporte enviado com sucesso! Obrigado pela contribui√ß√£o.<br>
            <small>Voc√™ receber√° um feedback por email em breve.</small>
        </div>
    </div>
</div>

<script>
    // ============================================
    // BANCO DE QUEST√ïES - ADICIONE AS SUAS AQUI
    // ============================================
    
    // FORMATO: {q: "Pergunta?", a: ["Op√ß√£o A", "Op√ß√£o B", "Op√ß√£o C", "Op√ß√£o D"], c: 0}
    // Onde 'c' √© o √≠ndice da resposta correta (0 = A, 1 = B, 2 = C, 3 = D)
    
    const masterBank = [
 
 {q: "As posi√ß√µes da chave seletora do magneto que s√£o utilizadas para testar o sistema de igni√ß√£o dupla?", a: ["Esquerdo e direito", "Ambos e direito", "Desligado e ambos", "Esquerdo e ambos"], c: 0},
    {q: "O tipo de conector, cujo inv√≥lucro √© feito de a√ßo, pertence √† classe?", a: ["D", "K", "B", "C"], c: 1},
    {q: "A posi√ß√£o do interruptor na qual os magnetos ficam aterrados √©?", a: ["Ambos", "On", "Direito", "Off"], c: 3},
    {q: "A v√°lvula de al√≠vio de uma bomba de combust√≠vel acionada pelo motor √© projetada para abrir?", a: ["A uma tens√£o pr√©-ajustada da mola", "Ap√≥s o corte do motor", "A uma determinada press√£o atmosf√©rica", "Quando a press√£o de combust√≠vel for muito baixa"], c: 0},
    {q: "√â a sequ√™ncia na qual o tempo motor ocorre nos diferentes cilindros, sendo projetada para proporcionar o balanceamento e para eliminar a vibra√ß√£o ao m√°ximo poss√≠vel:", a: ["Trabalho", "Ordem de fogo", "Raz√£o de compress√£o", "Pot√™ncia"], c: 1},
    {q: "O aquecedor de combust√≠vel (fuel heater) opera como um?", a: ["Trocador de pot√™ncia", "Trocador de calor", "Trocador de press√£o", "Trocador de √≥leo"], c: 1},
    {q: "Um ciclo de quatro tempos completo demanda duas voltas do virabrequim do motor, perfazendo um total de 720¬∫ de giro. Em tese, cada uma das fases equivale a quantos graus?", a: ["90 graus", "180 graus", "360 graus", "270 graus"], c: 1},
    {q: "A mistura ar/combust√≠vel entra nos cilindros atrav√©s das passagens das v√°lvulas de?", a: ["Compress√£o", "Arrefecimento", "Admiss√£o", "Refrigera√ß√£o"], c: 2},
    {q: "A sequ√™ncia na qual o tempo motor ocorre nos diferentes cilindros denomina-se?", a: ["Claro de v√°lvulas", "Claro de pist√µes", "Ordem de fogo", "Ordem de queima"], c: 2},
    {q: "A fun√ß√£o b√°sica de uma h√©lice √© converter a pot√™ncia do motor em for√ßa de?", a: ["Tra√ß√£o", "Tor√ß√£o", "Arrasto", "Sustenta√ß√£o"], c: 0},
    {q: "O mecanismo de um motor de cilindros opostos. O eixo de ressaltos sempre gira com a metade da velocidade do:", a: ["Eixo transversal", "Eixo da roda livre", "Eixo de manivelas", "Eixo cardan"], c: 2},
    {q: "Para o acionamento inicial do conjunto compressor (axial e centr√≠fugo), como tamb√©m a turbina, usa-se:", a: ["Ignitores de partida", "Gerador de vortex", "Roda livre", "Start generation"], c: 3},
    {q: "O componente do motor que transmite a for√ßa do pist√£o para o eixo de manivelas √© o(a)?", a: ["Mancal", "Biela", "Pino do pist√£o", "Vela"], c: 1},
    {q: "A finalidade das alhetas, na cabe√ßa do cilindro de um motor convencional, √©?", a: ["Arrefecer o cilindro", "Acoplar as molas das v√°lvulas", "Reduzir o peso do cilindro", "Manter elevada a temperatura do cilindro"], c: 0},
    {q: "No pist√£o, o anel de compress√£o do motor √© instalado?", a: ["Na ranhura superior do pist√£o", "Em qualquer ranhura do pist√£o", "Na ranhura central do pist√£o", "Na ranhura inferior do pist√£o"], c: 0},
    {q: "O objetivo principal do eixo de manivelas √© transformar o movimento:", a: ["Linear do tucho em movimento axial do eixo de ressaltos", "Alternativo do eixo de ressaltos em movimento rotativo para orientar o curso do cilindro", "Alternativo do pist√£o em movimento rotativo para acionamento da h√©lice", "Flex√≠vel do balancim em movimento alternado das v√°lvulas"], c: 2},
    {q: "Responda com a alternativa certa. Several different types of fire detection system are installed in aircraft to detect engine fires. \"Installed\" quer dizer:", a: ["Alimentado", "Instalado", "Unido", "Inserido"], c: 1},
    {q: "A turbina transforma a energia cin√©tica dos gases de escapamento em energia:", a: ["Pneum√°tica", "Mec√¢nica", "Est√°tica", "El√©trica"], c: 1},
    {q: "Se o motor for operado como recomendado e a manuten√ß√£o preventiva for executada, os cilindros normalmente resistir√£o at√© que o motor seja removido por:", a: ["Limite de torque", "Vontade do operador", "Limite de voo", "Limite de horas"], c: 3},
    {q: "Em um sistema de igni√ß√£o de um motor convencional, a alta tens√£o induzida na bobina secund√°ria √©, em seguida, enviada √† (ao):", a: ["Vela", "Bobina prim√°ria", "Platinado", "Distribuidor"], c: 3},
    {q: "Os dois principais elementos funcionais do compressor centr√≠fugo s√£o?", a: ["Turbina e difusor", "Carca√ßa e difusor", "Pist√£o e biela", "Impulsor e difusor"], c: 3},
    {q: "A alta tens√£o induzida na bobina secund√°ria √© enviada ao distribuidor, o qual consiste em:", a: ["Quatro partes", "Duas partes", "Seis partes", "Tr√™s partes"], c: 1},
    {q: "Quando a h√©lice d√° uma volta completa e ocorre um recuo a mesma realiza o passo?", a: ["Bandeira", "Efetivo", "Ativo", "Te√≥rico"], c: 1},
    {q: "Os dois tipos mais comuns de compressor que encontramos nos motores a rea√ß√£o?", a: ["Fluxo centr√≠fugo e axial", "Axial e tipo fly by stol", "Radial inconstante e centr√≠fugo", "Caneca e canular"], c: 0},
    {q: "O cruzamento das v√°lvulas ocorre no?", a: ["In√≠cio da exaust√£o e final da compress√£o", "Final da exaust√£o e in√≠cio da admiss√£o", "In√≠cio da expans√£o e final da compress√£o", "Final da expans√£o e in√≠cio da admiss√£o"], c: 1},
    {q: "A expans√£o dos gases cin√©ticos da queima, transforma energia calor√≠fica em energia?", a: ["Cin√©tica", "Pneum√°tica", "Est√°tica", "Mec√¢nica"], c: 3},
    {q: "As partes b√°sicas que constituem uma turbina s√£o?", a: ["Rotor e coletor", "Coletor e difusor", "Impelidor e estator", "Estator e rotor"], c: 3},
    {q: "O combust√≠vel √© fornecido para entrada da unidade de controle, vindo dos tanques do avi√£o atrav√©s de uma s√©rie de?", a: ["Bombas acionadas pelo motor", "Filtros", "Bombas de refor√ßo", "V√°lvulas seletoras"], c: 2},
    {q: "A se√ß√£o da turbina de um motor turbojato ou turborreator est√° localizada na parte?", a: ["Superior", "Traseira", "Dianteira", "Inferior"], c: 1},
    {q: "No motor a turbina, a se√ß√£o que transforma a alta velocidade do ar da sa√≠da do compressor, em press√£o est√°tica, denomina-se se√ß√£o?", a: ["De escapamento", "De combust√£o", "Difusora", "Acess√≥ria"], c: 2},
    {q: "A maioria dos motores alternativos de aeronaves opera com ciclo de quantos tempos?", a: ["Cinco tempos", "Dois tempos yamaha", "Quatro tempos", "Um tempo"], c: 2},
    {q: "O componente do motor que tem a finalidade de expulsar os gases de escapamento do cilindro denomina-se?", a: ["Pist√£o", "V√°lvula", "Anel de segmento", "Eixo de ressaltos"], c: 0},
    {q: "Muitos motores correntemente fabricados utilizam velas com roscas?", a: ["Posti√ßas (heli-coil) de borracha", "Posti√ßas de alum√≠nio", "Posti√ßas (heli-coil) de a√ßo inoxid√°vel", "Posti√ßas (heli-coil) de a√ßo baquelite"], c: 2},
    {q: "O mecanismo respons√°vel pelo fechamento das v√°lvulas do cilindro √©?", a: ["Condutor e eixo", "Ressalto e pino", "Condutor e mola", "Mola"], c: 3},
    {q: "Al√©m dos a rea√ß√£o, os motores radial s√£o fixados √† nacele do avi√£o atrav√©s de(o)?", a: ["Tubo", "Suporte", "Montante", "Ber√ßo"], c: 3},
    {q: "Many older model aircraft still operating have some type of thermal switch system or thermocouple system...", a: ["Sistema de igni√ß√£o", "Sistema de detec√ß√£o de calor", "Sistema de interruptor t√©rmico", "Sistema de troca t√©rmica"], c: 2},
    {q: "Uma aeronave, impulsionada por grandes motores turbojato, requer algum tipo de dispositivo silenciador de ru√≠dos...", a: ["Supressores de ru√≠dos", "Supressores de atrito", "Supressores de ouvido", "Supressores de gases cin√©ticos stop by"], c: 0},
    {q: "O servo do governador controla o fluxo de combust√≠vel com a fun√ß√£o de ajustar a velocidade do:", a: ["Eixo", "Filtro", "Motor", "Carburador"], c: 2},
    {q: "As posi√ß√µes da chave seletora do magneto, usadas para testar o sistema de igni√ß√£o dupla, s√£o?", a: ["On e both", "Right e both", "Left e right", "Off e on"], c: 2},
    {q: "A turbina transforma uma quantidade de energia cin√©tica dos gases de escapamento em energia mec√¢nica, para acionar o?", a: ["Difusor e acess√≥rios", "Compressor e acess√≥rios", "C√¢mara de combust√£o e acess√≥rios", "Distribuidor e difusor"], c: 1},
    {q: "A quantidade ou a carga da mistura ar/combust√≠vel depende da abertura da?", a: ["Manete de dreno", "Manete de alijamento", "Manete de √¢ngulo", "Manete de acelera√ß√£o"], c: 3},
    {q: "No sistema de combust√≠vel motor a rea√ß√£o, o aquecedor usa como fonte de aquecimento, ar sangrado do(a)?", a: ["Escapamento ou √≥leo do sistema de lubrifica√ß√£o", "Compressor ou √≥leo do sistema de lubrifica√ß√£o", "Se√ß√£o da turbina ou √≥leo do sistema hidr√°ulico", "C√¢mara de combust√£o ou √≥leo do sistema hidr√°ulico"], c: 1},
    {q: "Para se combater o desenvolvimento microbiol√≥gico no combust√≠vel deve-se?", a: ["Drenar o combust√≠vel diariamente", "Destanquear o avi√£o antes do pernoite", "Vedar as entradas de ventila√ß√£o sempre que o avi√£o for pernoitar", "Adicionar bactericida diariamente"], c: 0},
    {q: "A finalidade da liga√ß√£o √† massa encontrada nos sistemas el√©tricos do avi√£o √©?", a: ["Evitar a fadiga mec√¢nica dos fios", "Proporcionar caminhos de retorno da corrente", "Aumentar a resist√™ncia total do circuito el√©trico", "Acumular carga est√°tica"], c: 1},
    {q: "A parte do motor na qual a pot√™ncia √© desenvolvida, √© chamada de?", a: ["As hastes de mudan√ßa de passo", "V√°lvulas", "Cilindro", "Rodas do trem de pouso"], c: 2},
    {q: "Os cilindros dos motores radiais s√£o instalados?", a: ["Em carreira, no eixo das manivelas", "Na parte traseira do c√°rter", "Ao redor de um c√°rter central", "Diretamente nas engrenagens de redu√ß√£o"], c: 2},
    {q: "O pino do pist√£o une o pist√£o √†?", a: ["Bengala", "Transmissor", "Biela", "Turbina"], c: 2},
    {q: "O cal√ßo hidr√°ulico no motor radial, ocorre normalmente?", a: ["Nos cilindros laterais", "Nos cilindros inferiores", "Nos cilindros superiores", "Em todos os cilindros"], c: 1},
    {q: "O cal√ßo hidr√°ulico ocorre normalmente em qual tipo de motor do ciclo otto?", a: ["A turbina de fluxo centr√≠fugo", "Convencional do tipo cilindros em v", "A turbina de fluxo axial", "Alternativo do tipo radial"], c: 3},
    {q: "O tempo que o √™mbolo est√° se deslocando do pmb para o pma, e as v√°lvulas est√£o fechadas, denomina-se?", a: ["Pot√™ncia", "Admiss√£o", "Escapamento", "Compress√£o"], c: 3},
    {q: "A maneira para identificar o tipo de gasolina √© pelo(a)?", a: ["Quantidade", "Temperatura", "Cor", "Pureza"], c: 2},
    {q: "O componente do sistema de combust√≠vel, que tem a finalidade de cortar o fluxo de combust√≠vel que sai do tanque, √© o(a)?", a: ["V√°lvula seletora", "Dreno", "Filtro", "V√°lvula de transfer√™ncia"], c: 0},
    {q: "O motor t√©rmico transforma energia calor√≠fica em energia?", a: ["Cin√©tica", "El√©trica", "Hidr√°ulica", "Mec√¢nica"], c: 3},
    {q: "A express√£o \"overheat conditions\" quer dizer:", a: ["Condi√ß√µes de calor", "Condi√ß√µes de tempo", "Condi√ß√µes clim√°ticas", "Condi√ß√µes de superaquecimento"], c: 3},
    {q: "O componente de um motor convencional que tem a finalidade de transformar o movimento alternativo do pist√£o em movimento rotativo para acionamento da h√©lice, denomina-se?", a: ["Eixo de manivelas", "Mancal", "Eixo de ressaltos", "Caixa de engrenagem"], c: 0},
    {q: "Em um motor a rea√ß√£o a pot√™ncia indicada ou desenvolvida ocorre no(a)?", a: ["Se√ß√£o de escapamento", "Compressor", "Super turbina weel", "Se√ß√£o de combust√£o"], c: 3},
    {q: "Nos motores em 'V' os cilindros s√£o montados em duas carreiras em linha, geralmente ao um √¢ngulo de quantos graus?", a: ["90¬∫", "10¬∫", "20¬∫", "60¬∫"], c: 3},
    {q: "Equipamento respons√°vel para modificar o n√≠vel de voltagem, aumentando-o ou diminuindo-o como necess√°rio, denomina-se?", a: ["Gerador", "Volt√≠metro", "Potenci√¥metro", "Transformador"], c: 3},
    {q: "Os motores a combust√£o interna s√£o aqueles em que o combust√≠vel √© queimado internamente. Um mecanismo constitu√≠do por pist√£o, biela e virabrequim √© que transforma a energia t√©rmica (calor√≠fica) em?", a: ["Energia cin√©tica", "Energia est√°tica", "Energia qu√¢ntica", "Energia mec√¢nica"], c: 3},
    {q: "O sistema de medi√ß√£o principal fornece combust√≠vel para o motor em todas?", a: ["As velocidades acima de marcha lenta", "As velocidades acima de marcha lenta ap√≥s o disparo do motor de ciclo spacer", "As baixa rota√ß√£o do rotor de igni√ß√£o", "As velocidades de baixa marcha lenta"], c: 0},
    {q: "Dentre as se√ß√µes abaixo, aquela que converte velocidade em press√£o no motor a rea√ß√£o, denomina-se?", a: ["Acess√≥rios", "Eixo curto", "Difusora", "Turbina"], c: 2},
    {q: "O tac√¥metro √© um dispositivo que serve para fazer medi√ß√£o da quantidade de:", a: ["Pot√™ncia por hora (PRH)", "Torque por hora (TPH)", "Temperatura por minuto (TPM)", "Rota√ß√£o por minuto (RPM)"], c: 3},
    {q: "As v√°lvulas de admiss√£o e escapamento s√£o abertas e fechadas, nos tempos apropriados, por a√ß√£o?", a: ["El√©trica", "Pneum√°tica", "Hidr√°ulica", "Mec√¢nica"], c: 3},
    {q: "A pe√ßa m√≥vel do motor convencional respons√°vel pela acomoda√ß√£o dos an√©is de segmentos denomina-se?", a: ["Contrapeso", "Pist√£o", "Eixo de manivelas", "Moente da biela"], c: 1},
    {q: "Responda com a alternativa certa. Some warning lights are push-to-test lights. The bulb is tested by pushing it in to check an auxiliary test circuit. \"Warning lights\" pode ser traduzido como:", a: ["Luzes de calor", "Luzes de aviso", "Luzes de indica√ß√£o", "Luzes de superaquecimento"], c: 1},
    {q: "Ap√≥s a sua leitura, assinale a alternativa correta. If the temperature rises rapidly, the thermocouple produces a voltage because of the temperature difference between the reference junction and the hot junction. \"Hot junction\" quer dizer:", a: ["Jun√ß√£o de fogo", "Aviso de jun√ß√£o", "Jun√ß√£o quente", "Aviso de calor"], c: 2},
    {q: "O difusor √© a se√ß√£o divergente do motor. Tem a importante fun√ß√£o de trocar a alta velocidade do ar de descarga do compressor para a press√£o?", a: ["Est√°tica", "Nula", "Aerodin√¢mica", "T√©rmica"], c: 0},
    {q: "No texto, a express√£o \"cathode ray tube\" quer dizer: The analog signal produced by the sensing element loop as its temperature changes can readily be converted to signals suitable for meter or cathode ray tube.", a: ["Tubo de raios ultravioleta", "Tubo de raios cat√≥dicos", "Tubo de raios quentes", "Tubo de raios congelados"], c: 1},
    {q: "A ordem de fogo de um motor √© a sequ√™ncia de queima que proporciona melhor?", a: ["Taxa de compress√£o", "Balanceamento com elimina√ß√£o de vibra√ß√£o", "Rendimento t√©rmico", "Queima do combust√≠vel"], c: 1},
    {q: "A bolha de vapor pode ser perigosa o suficiente para bloquear o?", a: ["Start generation", "Pist√£o na compress√£o", "Fluxo de combust√≠vel e parar o motor", "Pinh√£o"], c: 2},
    {q: "O que √© recuo de h√©lice?", a: ["Igualdade entre passo geom√©trico e efetivo", "Diferen√ßa entre passo geom√©trico e efetivo", "Indiferen√ßa entre passo geom√©trico e te√≥rico", "Diferen√ßa entre passo te√≥rico e definitivo"], c: 1},
    {q: "S√£o requeridas duas voltas completas do eixo de manivelas (720¬∫) para o motor de quantos tempos?", a: ["Seis tempos", "Dois tempos", "Um tempo", "Quatro tempos"], c: 3},
    {q: "Nos motores a rea√ß√£o, a pot√™ncia indicada desenvolve-se, no(a)?", a: ["C√°rter e no rotor", "Cilindro e no compressor", "C√¢mara de combust√£o", "Carburador e na turbina"], c: 2},
    {q: "Durante a partida de um motor a rea√ß√£o, deve-se monitorar o(a)?", a: ["Press√£o de √≥leo, temperatura do compressor e a tit", "Temperatura do compressor e o tac√¥metro", "Tac√¥metro e a tit", "Press√£o, temperatura e rpm"], c: 3},
    {q: "O fluxo de ar para o motor √© controlado atrav√©s?", a: ["Magneto", "FCU", "Carburador", "UCP"], c: 2},
    {q: "O cone interno de localiza√ß√£o central √© fixado junto √† face traseira do disco da turbina evitando?", a: ["Orientar os gases para a turbina", "Turbul√™ncia dos gases", "Fixar a se√ß√£o de escapamento no motor", "Reduzir a temperatura dos gases de exaust√£o"], c: 1},
    {q: "Os tanques de combust√≠veis s√£o adaptados com defletores internos, com a finalidade de?", a: ["Resistir √†s flutua√ß√µes do combust√≠vel, causadas pelas mudan√ßas de atitude da aeronave", "Manter a press√£o atmosf√©rica dentro do tanque", "Eliminar as impurezas no combust√≠vel, atrav√©s da decanta√ß√£o", "Permitir o perfeito alijamento do combust√≠vel, em voo"], c: 0},
    {q: "Dentre os instrumentos abaixo, aquele que √© utilizado para verificar o desempenho e tamb√©m o consumo de combust√≠vel do motor √© o?", a: ["Torqu√≠metro", "Fuel pressure", "Indicador de egt", "Fuel flow"], c: 3},
    {q: "Os ignitores s√£o instalados na c√¢mara de combust√£o do tipo anular em quais posi√ß√µes, levando em considera√ß√£o a ordem do rel√≥gio:", a: ["Olhando o motor por tr√°s, nas posi√ß√µes tr√™s (3) e nove (9) horas", "Olhando o motor de frente, nas posi√ß√µes duas (2) e dez (10) horas", "Olhando o motor de lado, nas posi√ß√µes tr√™s (3) e nove (9) horas", "Olhando o motor de frente, nas posi√ß√µes doze (12) e seis (6) horas"], c: 1},
    {q: "Alguns motores de aeronave incorporam tuchos:", a: ["√ìptico", "Hidr√°ulico", "Radiais", "El√©tricos"], c: 1},
    {q: "Qual a finalidade do compressor no motor a rea√ß√£o?", a: ["Diminuir a press√£o e a temperatura do ar hidraulicamente", "Diminuir a press√£o e a temperatura do ar mecanicamente?", "Aumenta a press√£o e a pot√™ncia do ar eletromagneticamente", "Aumenta a press√£o e a temperatura do ar, mecanicamente"], c: 3},
    {q: "√â uma compara√ß√£o do volume de um cilindro quando o √™mbolo est√° no ponto morto inferior, e o volume quando ele est√° no o ponto morto superior denomina-se:", a: ["Acelera√ß√£o", "Raz√£o de compress√£o", "Pot√™ncia indicada", "Ciclo"], c: 1},
    {q: "Dentre os componentes abaixo, aquele que tem a finalidade de gerar a alta tens√£o para os sistema de igni√ß√£o √© o(a)?", a: ["Magneto", "Cablagem", "Distribuidor", "Vela"], c: 0},
    {q: "Leia com aten√ß√£o o texto e responda a alternativa correta. The thermocouple fire warning system operates on an entirely different principle than the thermal switch system. \"Fire warning\" quer dizer:", a: ["Aviso de pressuriza√ß√£o", "Aviso de alerta", "Aviso de aquecimento", "Aviso de inc√™ndio"], c: 3},
    {q: "No motor a rea√ß√£o, o alinhamento dos gases de escapamento e a fixa√ß√£o do cone interno √© feita pelo componente denominado?", a: ["Alheta ejetora da turbina", "Longarina radial", "Elemento estator do conjunto da turbina", "Manta de isolamento"], c: 1},
    {q: "Num motor ciclo de otto, ocorrendo um cal√ßo hidr√°ulico, este ocorrer√° nos cilindros?", a: ["Inferiores", "Pares", "√çmpares", "Superiores"], c: 0},
    {q: "A compara√ß√£o do volume de um cilindro quando o √™mbolo est√° no pma e o volume quando o √™mbolo est√° no pmb denomina-se?", a: ["Balanceamento do eixo de manivelas", "Taxa de compress√£o", "Volume total", "Empuxo"], c: 1},
    {q: "O carburador √© instalado no motor, na se√ß√£o de?", a: ["Acess√≥rios", "For√ßa", "Pot√™ncia", "Difusora"], c: 3},
    {q: "A forma√ß√£o de gelo no sistema de admiss√£o pode ser impedida ou eliminada pelo aumento?", a: ["Da temperatura", "De est√°tica", "Da altitude", "De qav"], c: 0},
    {q: "O rendimento √∫til do motor que impele o avi√£o denomina-se?", a: ["Mistura", "Consumo espec√≠fico", "Taxa de compress√£o", "Empuxo"], c: 3},
    {q: "Num motor axial, da entrada para a sa√≠da, o ar flui por um caminho axial e √© comprimido a uma raz√£o aproximadamente de?", a: ["12,5", "1,25", "137,7", "1512,5"], c: 1},
    {q: "Em um motor a rea√ß√£o, o ar ao entrar na c√¢mara de combust√£o diminui a velocidade e aumenta a press√£o por qual componente?", a: ["Estator", "Venturi", "Compressor", "Difusor"], c: 3},
    {q: "O mecanismo de um motor convencional(ciclo de otto), de cilindros opostos √© acionado por qual eixo?", a: ["Eixo de ressaltos ou eixo de comando de v√°lvulas", "Eixo longo conc√™ntrico", "Eixo oculto", "Eixo de assaltos ou eixo de comando de v√°lvulas"], c: 0},
    {q: "Dentre as alternativas abaixo, aquele que indica o componente do motor convencional respons√°vel pela expuls√£o dos gases queimados √© o(a)?", a: ["V√°lvula de escapamento", "Pist√£o", "Cilindro", "Tubo de descarga"], c: 1},
    {q: "Os an√©is de segmento nos motores convencionais tem a fun√ß√£o de?", a: ["Ventila√ß√£o", "Limitar o movimento do eixo de manivelas", "Contra√ß√£o", "Veda√ß√£o"], c: 3},
    {q: "O fechamento das v√°lvulas √© realizado atrav√©s de?", a: ["Hastes", "Pinos", "Molas", "Eixos"], c: 2},
    {q: "A gasolina de avia√ß√£o de grau115/145 √© de cor?", a: ["Verde", "Cinza", "Azul", "P√∫rpura"], c: 3},
    {q: "Dentre os componentes abaixo, aquele que tem a finalidade de transformar energia cin√©tica dos gases de escapamentos em energia mec√¢nica, denomina-se:", a: ["Coletor", "Compressor", "Turbina", "Estator"], c: 2},
    {q: "A vela de igni√ß√£o deve ser substitu√≠da sempre que?", a: ["Apresentar falha", "Ocorrer o claro de v√°lvulas", "A mistura ar/combust√≠vel empobrecer", "A igni√ß√£o ocorrer no tempo de escapamento"], c: 0},
    {q: "Leia com aten√ß√£o o texto e responda a alternativa correta. A complete fire protection system includes both a fire detection and a fire extinguishing system. To detect fires or overheat conditions, detectors are placed in the various zones to be monitored. A express√£o \"overheat conditions\" quer dizer:", a: ["Condi√ß√µes de calor", "Condi√ß√µes de tempo", "Condi√ß√µes clim√°ticas", "Condi√ß√µes de superaquecimento"], c: 3},
    {q: "Geralmente de qual material de alta resist√™ncia √© fabricado o corpo do cilindro no qual trabalha o pist√£o:", a: ["Amianto", "A√ßo", "Tit√¢nio", "Chumbo"], c: 1},
    {q: "Os cabos de igni√ß√£o possuem um fio isolado para cada?", a: ["Comutador", "Fus√≠vel", "Cilindro", "Induzido"], c: 2},
    {q: "Quais os dois elementos principais do compressor de fluxo axial?", a: ["Turbina e fcu", "Rotor e estator", "Caixa redutora e duto de ar", "V√°lvula seletora e difusor"], c: 1},
    {q: "A finalidade de se instalar duas ou mais molas nas v√°lvulas do cilindro √©?", a: ["Eliminar vibra√ß√µes, em determinadas rota√ß√µes do motor", "Permitir uma r√°pida abertura das v√°lvulas, no tempo de admiss√£o", "Fixar a v√°lvula no balancim", "Fixar a v√°lvula no cilindro"], c: 0},
    {q: "A quantidade ou carga da mistura ar/combust√≠vel depende da abertura da manente de?", a: ["Dreno", "Corte de emerg√™ncia", "Temperatura dos gases", "Acelera√ß√£o"], c: 3},
    {q: "A raz√£o combust√≠vel/ar varia com a?", a: ["Tra√ß√£o", "RPM", "CTM", "Hidr√°ulico"], c: 1},
    {q: "Em um motor a rea√ß√£o, a redu√ß√£o da alta velocidade do ar que sai do compressor, transformada em press√£o est√°tica √© causada pela presen√ßa do componente denominado?", a: ["C√¢mara de combust√£o", "Turbina", "Rotor do compressor", "Difusor"], c: 3},
    {q: "A v√°lvula de alijamento do sistema de combust√≠vel tem a finalidade de?", a: ["Facilitar o reabastecimento", "Reduzir o peso da aeronave", "Direcionar o combust√≠vel para o dreno", "Possibilitar o suspiro no interior do tanque"], c: 1},
    {q: "O rotor do compressor tipo disco, consiste de uma s√©rie de discos usinados em?", a: ["Chumbo", "Alum√≠nio em tratamento simples glasse", "A√ßo inoxid√°vel", "Alum√≠nio forjado"], c: 3},
    {q: "Um combust√≠vel de jato, altamente vol√°til, apresenta caracter√≠sticas que s√£o convenientes para?", a: ["Facilitar a partida em tempo frio", "Facilitar a possibilidade do cal√ßo de vapor", "Reduzir as perdas do combust√≠vel por evapora√ß√£o", "Dificultar as partidas em voo"], c: 0},
    {q: "O componente do cilindro que tem a finalidade de evitar o vazamento de √≥leo para o interior do cilindro, denomina-se?", a: ["Anel de segmento", "V√°lvula de admiss√£o", "Eixo de manivelas", "V√°lvula de escapamento"], c: 0},
    {q: "Qual a sequ√™ncia do ciclo de 4 tempos no motor convencional ciclo de otto em sua ordem, √©?", a: ["Admiss√£o, pot√™ncia, compress√£o, escapamento", "Escapamento, compress√£o, admiss√£o, pot√™ncia", "Compress√£o, admiss√£o, pot√™ncia, escapamento", "Admiss√£o, compress√£o, expans√£o, escapamento"], c: 3},
    {q: "No compressor de fluxo axial, quanto maior √© o n√∫mero de est√°gios, maior √© a?", a: ["Rota√ß√£o da turbina", "Quantidade de palhetas, na turbina", "Taxa de compress√£o", "Quantidade de combust√≠vel queimado"], c: 2},
    {q: "Uma das finalidades da v√°lvula seletora de combust√≠vel √©?", a: ["Permitir a transfer√™ncia de combust√≠vel entre os tanques", "Alijar o combust√≠vel em voo", "Permitir o fluxo de combust√≠vel, quando a bomba estiver inoperante", "Aliviar o excesso de combust√≠vel, na sa√≠da da bomba"], c: 0},
    {q: "Num motor a rea√ß√£o a se√ß√£o de escapamento est√° localizada logo ap√≥s √† se√ß√£o?", a: ["Do compressor", "De acess√≥rios", "Da turbina", "De combust√£o"], c: 2},
    {q: "A v√°lvula de admiss√£o √© aberta antes do pist√£o atingir o ponto morto?", a: ["Inferior no tempo de admiss√£o", "Superior no tempo de escapamento", "Superior no tempo de compress√£o", "Inferior no tempo de compress√£o"], c: 1},
    {q: "O eletr√≥lito usado nas baterias de n√≠quel-c√°dmio √© uma solu√ß√£o de?", a: ["70% de hidr√≥xido de n√≠quel e 30% de aguardente destilada", "30% de hidr√≥xido de pot√°ssio em √°gua destilada", "130% de hidr√≥xido de c√°todo em √°gua mineralizada", "70% de √°cido b√≥rico e 30% de √°gua desmineralizada"], c: 1},
    {q: "A finalidade dos an√©is de compress√£o √© evitar o escapamento de gases atrav√©s do pist√£o, durante a opera√ß√£o do motor. Eles s√£o colocados nas ranhuras localizado em qual parte do pist√£o?", a: ["Abaixo da cabe√ßa do pist√£o", "Na face da cabe√ßa do pist√£o", "Na vertical da cabe√ßa da biela", "Na jun√ß√£o biela e eixo de manivelas"], c: 0},
    {q: "De qual material √© constru√≠do a parede de fogo?", a: ["Chumbo", "Alum√≠nio", "Ferro doce", "A√ßo inoxid√°vel"], c: 3},
    {q: "Flexibilidade de opera√ß√£o √© a capacidade de um motor funcionar de forma?", a: ["Neutra", "Suavemente", "Pobre", "R√≠gida"], c: 1},
    {q: "O compressor √© acionado pelo(a)?", a: ["Caixa de redu√ß√£o", "Difusora", "Turbina", "Roda livre"], c: 2},
    {q: "Flexibilidade de opera√ß√£o √© a capacidade de um motor funcionar suavemente, e a apresentar o desempenho desejado a cada regime de opera√ß√£o, desde a?", a: ["Medidor principal", "Marcha lenta at√© a pot√™ncia m√°xima", "Acelerador", "Controle de mistura"], c: 1},
    {q: "O primeiro disco de aletas estatoras na entrada do compressor axial recebe o nome de:", a: ["IGT (inlet guide turbine)", "(LPT) N1 eixo da turbina de baixa press√£o", "IGV (inlet guide vanes)", "(HPT) N2 eixo da turbina de alta"], c: 2},
    {q: "O tempo do motor em que \"n√£o\" h√° v√°lvulas ou v√°lvula abertas s√£o?", a: ["Escapamento e compress√£o", "Admiss√£o", "Escapamento", "Compress√£o"], c: 3},
    {q: "O componente do sistema, que define de qual dos tanques o combust√≠vel ser√° liberado para suprir o motor, denomina-se:", a: ["Bomba de refor√ßo", "V√°lvula seletora", "Filtro", "Bomba principal"], c: 1},
    {q: "Leia com aten√ß√£o o texto e responda a alternativa correta. \"Many older model aircraft still operating have some type of thermal switch system or thermocouple system. A thermal switch system has one or more lights energized by the aircraft power system and thermal switches.\" A express√£o \"has one or more\" quer dizer:", a: ["Tem mais de um", "Precisa de um ou mais", "Romper um ou mais", "Tem um ou mais"], c: 3},
    {q: "As cores que representam, respectivamente, os limites normal e m√°ximo nos instrumentos s√£o?", a: ["Branca e amarela", "Amarela e verde", "Vermelha e branca", "Verde e vermelha"], c: 3},
    {q: "O indicador de temperatura dos gases de exaust√£o emprega como elemento sensitivo?", a: ["Sondas, que indicam a totaliza√ß√£o das temperaturas", "Termopares, que indicam a m√©dia das temperaturas", "Termopares, que indicam a soma das temperaturas", "Sondas, que indicam a diferen√ßa das temperaturas"], c: 1},
    {q: "Dentre as alternativas abaixo, aquela que define a corrente el√©trica, √©:", a: ["A distribui√ß√£o uniforme de cargas iguais em metal", "O fluxo de el√©trons de um ponto negativo para o positivo", "A dire√ß√£o de um campo el√©trico em torno de cargas positivas e negativas", "Rea√ß√£o de cargas iguais atrav√©s de um isolante"], c: 1},
    {q: "Os f√≠sicos definem trabalho da seguinte forma:", a: ["Trabalho √© for√ßa multiplicada por dist√¢ncia", "Trabalho √© for√ßa multiplicada pelo C.G.", "Trabalho √© for√ßa multiplicada pela lubrifica√ß√£o", "Trabalho √© STOL multiplicada por dist√¢ncia"], c: 0},
    {q: "O rendimento √∫til do motor que impele a aeronave, denomina-se?", a: ["Taxa de compress√£o", "Pot√™ncia de empuxo", "Consumo espec√≠fico", "Rendimento t√©rmico"], c: 1},
    {q: "A maioria dos motores de aeronaves √© acionada por um dispositivo chamado motor de?", a: ["Partida (start) ou acumulador", "Partida (start) ou capacitor", "Partida (start) ou arranque", "Partida (start) ou suplay"], c: 2},
    {q: "A unidade do carburador respons√°vel pelo fluxo de ar do sistema de indu√ß√£o denomina-se?", a: ["B√≥ia", "Venturi", "V√°lvula de redu√ß√£o", "Marcha lenta"], c: 1},
    {q: "No sistema de igni√ß√£o por bateria, a parte rotativa do distribuidor denomina-se?", a: ["Cablagem", "Rotor", "Bloco", "Platinado"], c: 1},
    {q: "A finalidade da bomba de combust√≠vel auxiliar (booster) √©?", a: ["Suprir combust√≠vel sob press√£o para o filtro principal", "Alijar o combust√≠vel", "Suprir combust√≠vel sob press√£o para a bomba do motor", "Retornar o combust√≠vel excedente do motor para o tanque"], c: 2},
    {q: "Nos motores convencionais a quatro tempos, a sequ√™ncia de funcionamento √©?", a: ["Motor, explos√£o, admiss√£o e escapamento", "Admiss√£o, motor, explos√£o e escapamento", "Motor, admiss√£o, explos√£o e escapamento", "Admiss√£o, compress√£o, explos√£o e escapamento"], c: 3},
    {q: "O intervalo de tempo entre as revis√µes do motor denomina-se?", a: ["Controle de efici√™ncia", "TBO", "Compara√ß√£o", "Controle de fabrica√ß√£o"], c: 1},
    {q: "No texto, a express√£o \"slender inconel tube\" quer dizer: _the fenwal system uses a slender inconel tube packed with thermally sensitive eutectic salt and a nickel wire center conductor.", a: ["Tubo delgado inconel", "Tubo de isolamento inconel", "Tubo inconel de conex√£o", "Tubo detector de calor"], c: 0},
    {q: "Para se combater o fungo que se desenvolve no querosene de avia√ß√£o, deve-se drenar os tanques das aeronaves, na?", a: ["Entrada da bomba principal", "Parte mais inferior dos mesmos", "Entrada do fcu", "Sa√≠da da bomba auxiliar"], c: 1},
    {q: "Venezianas e fendas em duas correntes principais: ar prim√°rio e ar secund√°rio. Qual a finalidade do ar secund√°rio no motor a rea√ß√£o?", a: ["Sustenta√ß√£o", "Refrigera√ß√£o", "Para queima", "Girar os acess√≥rios"], c: 1},
    {q: "As palhetas do rotor s√£o fabricadas geralmente em a√ßo inoxid√°vel e s√£o fixadas aos discos por raiz tipo?", a: ["Por soldas de forma pinheiro", "Rebites tipo pinheiro", "Bulbo ou raiz tipo pinheiro", "Parafusos tipo bulbo"], c: 2},
    {q: "O desenvolvimento microbial existente no combust√≠vel √© combatido frequentemente com o procedimento de?", a: ["Inserir detergente no tanque, ap√≥s o reabastecimento", "Filtrar as linhas de distribui√ß√£o", "Drenar o combust√≠vel", "Inserir aditivo para melhorar a performance do motor"], c: 2},
    {q: "No tempo de admiss√£o, o pist√£o desloca-se do pma para o pmb provocando no interior do cilindro um(a)?", a: ["Aumento de press√£o", "Redu√ß√£o de massa", "Aumento de temperatura", "Redu√ß√£o de press√£o"], c: 3},
    {q: "Dentre os componentes abaixo, aquele que protege o sistema el√©trico √© o(a)?", a: ["L√¢mpada", "Fus√≠vel", "Bateria", "Capacitor"], c: 1},
    {q: "No sistema de igni√ß√£o a parte girat√≥ria do distribuidor √© denominada?", a: ["Recept√°culo", "Condutor", "Capacitor", "Rotor"], c: 3},
    {q: "Quando um √™mbolo vai do pmb para a pma, o mesmo desloca um volume espec√≠fico que se denomina?", a: ["Rendimento", "Cilindrada", "Opera√ß√£o", "Desenvolvimento"], c: 1},
    {q: "No motor a rea√ß√£o, o componente respons√°vel pelo acionamento do compressor √© o(a)?", a: ["Difusor", "C√¢mara", "Turbina", "Rotor"], c: 2},
    {q: "As molas das v√°lvulas s√£o mantidas no lugar por meio de?", a: ["Pinho", "Trava do carter", "Travas tripartidas", "Travas bipartidas"], c: 3},
    {q: "Em um motor radial com 18 cilindros, o qual tem duas carreiras, existem duas bielas mestras e quantas articuladas?", a: ["9 bielas mestras e 9 articuladas", "18 bielas articuladas", "16 bielas articuladas", "5 bielas articuladas"], c: 2},
    {q: "As sondas distribu√≠das pelo motor a rea√ß√£o transmitem para o indicador de egt a:", a: ["Soma das temperaturas", "Menor dentre as temperaturas", "Maior dentre as temperaturas", "M√©dia das temperaturas"], c: 3},
    {q: "Durabilidade √© o tempo de vida do motor, enquanto manter a?", a: ["Lubrifica√ß√£o", "Confiabilidade", "A capacidade de Consumo M√≠nimo de √ìleo", "Redu√ß√£o do Fluxo de Combust√≠vel"], c: 1},
    {q: "Durante o voo, ao ganhar altitude, esta ser√° compensada no carburador pelo sistema?", a: ["De acelera√ß√£o", "De marcha lenta", "De controle de mistura", "Economizador"], c: 2},
    {q: "Em um motor convencional, a ordem de fogo √© projetada para proporcionar?", a: ["Balanceamento", "Delineamento", "Alinhamento", "Nivelamento"], c: 0},
    {q: "Indicadores de rota√ß√£o (tac√¥metros), s√£o exemplos de tac√¥metros usados em grande escala atualmente na avia√ß√£o, exceto?", a: ["Mec√¢nico", "Eletronico", "El√©trico", "Pneum√°tico"], c: 3},
    {q: "O princ√≠pio usado por um motor turbojato quando ele prov√™ for√ßa para mover um avi√£o, baseia-se no(a)?", a: ["Princ√≠pio de pascal", "Segunda lei de newton", "Princ√≠pio de venturi", "Teoria da in√©rcia"], c: 1},
    {q: "Mancais de roletes s√£o fabricados de muitos tipos e formas, por√©m os dois tipos geralmente usados nos motores de aeronaves s√£o?", a: ["Roletes retos e roletes transversal", "Soquetes retos e roletes c√¥nicos", "Roletes retos e roletes c√¥nicos", "Roletes retos e roletes redondos ovais"], c: 2},
    {q: "O rotor de um motor a rea√ß√£o √© uma combina√ß√£o dos rotores do compressor e da turbina, unidos por?", a: ["Tr√™s eixos distintos", "Um eixo", "Em dois eixos distintos de cobre", "Rolamentos de travamento"], c: 1},
    {q: "A identifica√ß√£o da tubula√ß√£o de combust√≠vel, segundo o c√≥digo de cores, √© feita pela cor?", a: ["Azul", "Vermelha", "Laranja", "Verde"], c: 1},
    {q: "A estrutura de tubo de a√ßo, que fixa o motor √† aeronave, denomina-se?", a: ["Anteparo", "Ber√ßo", "Parede de fogo", "Suporte"], c: 1},
    {q: "No motor convencional, a centelha ocorre quando o pist√£o passa atrav√©s do ponto morto?", a: ["Alto, no tempo de compress√£o", "Baixo, no tempo de admiss√£o", "Alto, no tempo de escapamento", "Baixo, no tempo motor"], c: 0},
    {q: "O mecanismo de um motor de cilindros opostos √© acionado pelo eixo de?", a: ["Pino e ressalto", "Mola e pino", "Ressalto", "Eixo e condutor"], c: 2},
    {q: "Indique abaixo, a origem da for√ßa resultante capaz de mover a turbina?", a: ["Energia cin√©tica dos gases", "Press√£o de combust√≠vel", "Press√£o de ar atmosf√©rico", "Fluxo de ar de impacto"], c: 0},
    {q: "A alta tens√£o induzida na bobina secund√°ria √© enviada ao distribuidor, o qual consiste em duas partes. A parte rotativa √© chamada de rotor do distribuidor e a estacion√°ria de bloco do distribuidor. A parte rotativa pode ter o formato de um disco, tambor, ou lingueta, √© confeccionado em material?", a: ["Ferro", "N√£o condutor", "Produtor", "A√ßo"], c: 1},
    {q: "Se a mistura usada for mais pobre do que a especificada para o motor em uso, o cilindro com a mistura mais pobre estar√° sujeito?", a: ["A contamina√ß√£o do sistema", "Ao cal√ßo de vapor", "A pr√©-igni√ß√£o", "Ao retorno de chama"], c: 3},
    {q: "Do 100% de ar admitido e comprimido no motor a rea√ß√£o, 1/4 √© utilizado na queima dentro da c√¢mara de combust√£o e 3/4 desse ar √© utilizado para:", a: ["Lubrifica√ß√£o", "Queima", "Refrigera√ß√£o", "Aquecimento"], c: 2},
    {q: "A for√ßa exercida para mover uma aeronave, atrav√©s de um motor a rea√ß√£o, √© obtida pelo(a)?", a: ["Terceira lei de Newton", "Princ√≠pio de Venturi", "Princ√≠pio de Pascal", "Teoria da inerte"], c: 0},
    {q: "O par√¢metro b√°sico para descrever a economia de combust√≠vel de motores aeron√°uticos √© geralmente discriminado como?", a: ["Consumo espec√≠fico", "Consumo relativo", "Consumo pac√≠fico", "Consumo progressivo"], c: 0},
    {q: "O eixo de ressaltos sempre gira com a metade da velocidade do eixo de?", a: ["Manivelas", "Da caixa de acess√≥rios", "Condutor", "Central"], c: 0},
    {q: "Os tubos interconectores existentes nas c√¢maras de combust√£o do tipo caneca, t√™m a finalidade de:", a: ["Aumentar o poder da combust√£o", "Propagar a mistura combust√≠vel", "Diminuir o poder de combust√£o", "Propagar a chama"], c: 3},
    {q: "As v√°lvulas do motor convencional s√£o abertas e fechadas atrav√©s molas, sendo acionadas?", a: ["Pneumaticamente", "Mecanicamente", "Hidraulicamente", "Eletricamente"], c: 1},
    {q: "Os componentes do cilindro respons√°veis pela veda√ß√£o dos gases de combust√£o durante o movimento do pist√£o denomina-se?", a: ["Pist√£o", "Vedadores", "An√©is", "Selos"], c: 2},
    {q: "Tem a importante fun√ß√£o de trocar a alta velocidade do ar de descarga do compressor para press√£o est√°tica:", a: ["Difusor", "Deflector", "Turbina geradora de gases", "C√¢mara de combust√£o"], c: 0},
    {q: "Dentre os tempos abaixo, aponte aquele que caracteriza o momento em que ocorre o claro de v√°lvulas?", a: ["Compress√£o", "Admiss√£o", "Resfriamento", "Pot√™ncia"], c: 1},
    {q: "A h√©lice que ajusta o passo, sem atua√ß√£o do operador, para manter constante a rpm do motor, denomina-se h√©lice?", a: ["Ajust√°vel", "Autom√°tica", "De passo constante", "De passo control√°vel"], c: 1},
    {q: "O mecanismo de mudan√ßa de passo das h√©lices hidrom√°ticas √© um sistema que atua com for√ßa?", a: ["Hidr√°ulico-mec√¢nico", "Hidr√°ulico-el√©trica", "Hidr√°ulico-press√£o", "Hidr√°ulico e pneum√°tica"], c: 0},
    {q: "Se, durante a partida de um motor, no solo, a EGT subir al√©m do previsto pelo fabricante, deve-se?", a: ["Checar se os instrumentos est√£o em pane", "Aumentar a pot√™ncia", "Abortar a partida", "Reduzir a pot√™ncia"], c: 2},
    {q: "Num √≥leo do tipo sae 20w, a especifica√ß√£o de uso em clima frio √© determinado pelo?", a: ["Sae", "W", "E", "20"], c: 1},
    {q: "Para eliminar qualquer erro causado por um ou mais dos termopares do motor, √© executado uma checagem?", a: ["Torque", "Visual", "Compress√£o", "De continuidade"], c: 3},
    {q: "Se pequenas part√≠culas met√°licas forem encontradas no √≥leo de um motor convencional, o procedimento a ser adotado √©?", a: ["Substituir o motor", "Drenar e substituir todo o √≥leo", "Girar o motor", "Apenas trocar o elemento filtrante"], c: 1},
    {q: "Um sistema el√©trico de controle do gelo da h√©lice (figura 7-26) consiste basicamente de uma fonte de energia, um elemento de resist√™ncia de aquecimento, controles do sistema e a?", a: ["Necess√°ria fia√ß√£o", "Necess√°ria pressuriza√ß√£o de cabine", "Necess√°ria v√°lvula de escape", "Necess√°ria irradia√ß√£o solar"], c: 0},
    {q: "O corpo do cilindro geralmente √© fabricado em a√ßo ou?", a: ["Tit√¢nio", "Bronze", "Baquelite", "Alum√≠nio forjado"], c: 3},
    {q: "O motor que utiliza um sistema de biela mestra e bielas articuladas, √© denominado motor?", a: ["Oposto", "Radial", "Em \"v\"", "Em linha"], c: 1},
    {q: "O anteparo dianteiro da nacela da asa constru√≠da de a√ßo inoxid√°vel, com objetivo de retardar a propaga√ß√£o do fogo denominada de?", a: ["Parede da caverna", "Parede protetora", "Parede conectora", "Parede de fogo"], c: 3},
    {q: "A unidade de controle de combust√≠vel (FCU -fuel control unit) de um t√≠pico motor turbojato √© um aparelho?", a: ["El√©trico mec√¢nico", "Hidromec√¢nico", "Fly by wire stop", "Apenas mec√¢nico"], c: 1},
    {q: "O eixo de uma h√©lice de motor com pot√™ncia de sa√≠da, geralmente √©?", a: ["Oval", "Magn√©tica", "Pneum√°tica", "Estriado"], c: 3},
    {q: "O componente do motor que √© intermedi√°rio entre o pist√£o e o eixo de manivelas denomina-se?", a: ["Pino de articula√ß√£o", "Pino de articula√ß√£o flutuante", "Moente", "Biela"], c: 3},
    {q: "A v√°lvula de al√≠vio do sistema de lubrifica√ß√£o tem a finalidade de?", a: ["Drenar o √≥leo em excesso para a linha de abastecimento", "Determinar que das vias de √≥leo ser√° tomada em dire√ß√£o ao radiador", "Limitar a press√£o de √≥leo do sistema", "Permitir que o √≥leo n√£o entre no motor"], c: 2},
    {q: "O embandeiramento da h√©lice √© realizado pelo governador, atrav√©s de?", a: ["Diminui√ß√£o do rpm", "Comando el√©trico", "Al√≠vio da press√£o de ar", "Al√≠vio da press√£o de √≥leo"], c: 3},
    {q: "Os cilindros s√£o instalados no motor na se√ß√£o denominada?", a: ["Redu√ß√£o", "Acess√≥rios", "Nariz", "Pot√™ncia"], c: 3},
    {q: "Caso um dos motores de uma aeronave entre em pane, a h√©lice correspondente deve ser comandada para o passo?", a: ["M√≠nimo", "M√°ximo", "Bandeira", "Reverso"], c: 2},
    {q: "As h√©lices hidram√°ticas que operam com o √≥leo do motor n√£o requerem lubrifica√ß√£o. As h√©lices el√©tricas necessitam de √≥leos e graxas para a lubrifica√ß√£o do cubo e dos mecanismos de opera√ß√£o da mudan√ßa de:", a: ["Grau de giro", "Temperatura", "Passo", "Lubrifica√ß√£o"], c: 2},
    {q: "No sistema de lubrifica√ß√£o do motor, a v√°lvula de al√≠vio localizada na sa√≠da da bomba principal limita a press√£o m√°xima do sistema, desviando o √≥leo para o reservat√≥rio ou para o (a):", a: ["Interior do filtro", "Sa√≠da do radiador", "Entrada da bomba", "Dreno"], c: 2},
    {q: "No motor convencional, claro de v√°lvulas ocorre em qual tempo?", a: ["No inicio do tempo de escapamento e in√≠cio do tempo de admiss√£o", "No final do tempo de compress√£o e final do tempo de admiss√£o", "No final do tempo de admiss√£o e no final do tempo de motor", "No final do tempo de escapamento e in√≠cio do tempo de admiss√£o"], c: 3},
    {q: "V√°rios tipos de cubos s√£o usados para montar h√©lice de madeira no eixo de?", a: ["Compress√£o", "Manivelas", "Transmiss√£o da tgb", "Transmiss√£o da mgb"], c: 1},
    {q: "A v√°lvula de controle de fluxo determina qual das vias de √≥leo ser√° tomada em dire√ß√£o ao?", a: ["Filtro", "Radiador", "Tanque", "By-pass"], c: 1},
    {q: "Estando as p√°s da h√©lice na mesma dire√ß√£o do vento relativo, a h√©lice estar√° em passo?", a: ["Embandeirada", "M√≠nimo", "Reverso", "M√°ximo"], c: 0},
    {q: "A bomba de suc√ß√£o do alojamento da caixa de acess√≥rios √© acionada por uma?", a: ["Caixa el√©trica", "Alavanca de atuadores", "Engrenagem", "Turbina pneum√°tica"], c: 2},
    {q: "O componente do sistema de lubrifica√ß√£o que retira o √≥leo que circulou no motor e retorna-o para o reservat√≥rio, √© a?", a: ["V√°lvula de al√≠vio de press√£o de √≥leo", "Bomba de press√£o", "V√°lvula by-pass", "Bomba de suc√ß√£o"], c: 3},
    {q: "Entre os defeitos mais comuns na fia√ß√£o de igni√ß√£o, est√°?", a: ["Vazamento baixa temperatura", "Danos de caixa de redu√ß√£o", "O vazamento tens√£o nula", "O vazamento de alta tens√£o"], c: 3},
    {q: "A dist√¢ncia que a h√©lice realmente percorre, denomina-se passo?", a: ["Efetivo", "Geom√©trico", "Te√≥rico", "De recuo"], c: 0},
    {q: "Os rolamentos dos motores a rea√ß√£o s√£o lubrificados por?", a: ["Escoamento", "Press√£o", "Imers√£o", "Salpique"], c: 1},
    {q: "Para simplificar a sele√ß√£o de √≥leos, eles frequentemente s√£o classificados sob um sistema \"sae (society of automotive engineers), o qual divide os √≥leos em quantos grupos na avia√ß√£o?", a: ["Em tr√™s grupos (sae 10 a 70, de acordo com a viscosidade a 130¬∫f ou 210¬∫f)", "Em quatro grupos (sae 10 a 70, de acordo com a viscosidade a 130¬∫f ou 210¬∫f)", "Em sete grupos (sae 10 a 70, de acordo com a viscosidade a 130¬∫f ou 210¬∫f)", "Em dez grupos (sae 10 a 70, de acordo com a viscosidade a 130¬∫f ou 210¬∫f)"], c: 2},
    {q: "Na h√©lice hidrom√°tica, o que move as p√°s em dire√ß√£o ao passo m√°ximo √© o(a)?", a: ["Contrapeso", "Mola", "√ìleo hidr√°ulico", "Tor√ß√£o centr√≠fuga"], c: 2},
    {q: "Durante o funcionamento de um motor a quatro tempos, a compress√£o ocorrem em qual tempo?", a: ["Segundo tempo", "Terceiro tempo", "Primeiro tempo", "Quarto tempo"], c: 0},
    {q: "A for√ßa centr√≠fuga em grandes rota√ß√µes tende a puxar as p√°s para fora do(a)?", a: ["Cubo", "Disco", "√Çngulo de recuo", "Difusor"], c: 0},
    {q: "Leia com aten√ß√£o o texto e responda a alternativa correta. _a wide range of diagnostics are utilized to verify the fire extinguisher agent charge status. A palavra \"verify\" quer dizer:", a: ["Ver", "Revisar", "Verificar", "Descarregar"], c: 2},
    {q: "Leia com aten√ß√£o o texto e responda a alternativa correta. _the powerplant installation has several designated fire zones: (1) the engine power section; (2) the engine accessory section; (3) except for reciprocating engines, \"engine power section\" √© traduzido como:", a: ["Se√ß√£o de motor sem pot√™ncia", "Se√ß√£o de for√ßa do motor", "Se√ß√£o de pot√™ncia do motor", "Se√ß√£o de motor e pot√™ncia"], c: 2},
    {q: "Leia com aten√ß√£o o texto e responda a alternativa correta. _the analog signal produced by the sensing element loop as its temperature changes can readily be converted to signals suitable for meter or cathode ray tube podemos afirmar que \"temperature changes\", quer dizer:", a: ["Mudan√ßas de temperatura", "Temperaturas amenas", "Temperaturas elevadas", "Mudan√ßas clim√°ticas"], c: 0},
    {q: "No texto, a palavra \"cartridge\" quer dizer: _discharge valves are installed on the containers. a cartridge (squib) and frangible disk type valve are installed in the outlet of the discharge valve assembly.", a: ["Corretor", "Carro", "Conector", "Cartucho"], c: 3},
    {q: "O eixo de manivela ou 180¬∞ √© utilizado nos motores?", a: ["El√©trico", "Tesla", "A rea√ß√£o", "Radiais"], c: 3},
    {q: "Nos sistemas que utilizam os radiadores de √≥leo s√£o inclu√≠das v√°vulas de desvio. Apesar destas v√°lvulas poderem ser chamadas por nomes diferentes, seu objetivo √© o de manter sempre uma temperatura adequada do √≥leo, atrav√©s de uma?", a: ["Varia√ß√£o do fluxo de √≥leo que passar pelo carter seco", "Varia√ß√£o do fluxo de √≥leo que passar pelo dereador", "Varia√ß√£o do fluxo de √≥leo que passar pelo compressor", "Varia√ß√£o do fluxo de √≥leo que passar pelo radiador"], c: 3},
    {q: "A corrente da bobina secund√°ria do transformador √© conduzida por um curto cabo de alta tens√£o blindado para a?", a: ["Vela", "Compressor", "Bateria", "Transmissor"], c: 0},
    {q: "A finalidade do passo reverso √© a de produzir em baixa velocidade, uma tra√ß√£o?", a: ["Negativa", "Positiva", "Neutra", "De stol"], c: 0},
    {q: "O sistema de aviso de fogo, em par t√©rmico, opera por um princ√≠pio completamente diferente do sistema de interruptores t√©rmicos. Um par t√©rmico depende da raz√£o de:", a: ["Aumento de velocidade", "Aumento de press√£o", "Aumento de viscosidade", "Aumento de temperatura"], c: 3},
    {q: "Com rela√ß√£o ao compressor do motor a rea√ß√£o, √© correto afirmar que?", a: ["Suprir ar em quantidade suficiente √†s necessidades dos queimadores sob press√£o", "Diminui a press√£o e diminui a temperatura do ar, pneumaticamente", "Diminui a press√£o e a temperatura do sistema de combust√≠vel", "Aumenta a press√£o e diminui a temperatura do ar, eletricamente"], c: 0},
    {q: "O mecanismo de um motor convencional (ciclo de Otto), de cilindros opostos √© acionado por qual eixo?", a: ["Eixo longo conc√™ntrico", "Eixo oculto", "Eixo de assaltos ou eixo de comando de v√°lvulas", "Eixo de ressaltos ou eixo de comando de v√°lvulas"], c: 3},
    {q: "Dentre as alternativas abaixo, aquela que tem a finalidade no sistema de igni√ß√£o de conduzir um curto impulso de corrente de alta voltagem, atrav√©s de um espa√ßo dentro da c√¢mara de combust√£o, dentro da c√¢mara de combust√£o existe um espa√ßo por onde o impulso pode produzir uma centelha el√©trica para inflamar a carga de ar/combust√≠vel:", a: ["D√≠namo", "Magneto", "Platinado", "Vela"], c: 3},
    {q: "A entrada de ar √© projetada de forma a dirigir o ar para o(a)?", a: ["Cambra inferior", "Hidr√°ulico", "Asas", "Compressor"], c: 3},
    {q: "Para dar partida num motor com as baterias do avi√£o, a chave de partida √© colocada na posi√ß√£o?", a: ["Neutra", "Start", "Off", "Two"], c: 1},
    {q: "O componente do sistema de combust√≠vel que normalmente √© instalado na entrada e na sa√≠da do tanque de combust√≠vel como tamb√©m na entrada do carburador, denomina-se?", a: ["Filtro", "V√°lvula de distribui√ß√£o", "Dreno", "V√°lvula de corte"], c: 0},
    {q: "As bielas planas s√£o usadas nos motores opostos e em?", a: ["Motores V8", "Linha", "Baixa a√ß√£o", "Motores radiais well"], c: 1},
    {q: "O par√¢metro b√°sico para descrever a economia de combust√≠vel de motores aeron√°uticos √© geralmente o?", a: ["Menor teto operacional", "Maior teto operacional", "Alto consumo espec√≠fico", "Baixo consumo espec√≠fico"], c: 3},
    {q: "Na h√©lice de passo control√°vel, a press√£o do √≥leo necess√°ria √† mudan√ßa do passo, √© fornecida pelo(a)?", a: ["Aranha", "Governador/bomba", "Contrapeso", "V√°lvula piloto"], c: 1},
    {q: "O passo geom√©trico √© a dist√¢ncia que uma h√©lice deveria avan√ßar. A dist√¢ncia realmente decorrida pela h√©lice recebe o nome de?", a: ["Geom√©trico", "Te√≥rico", "Constante", "Efetivo"], c: 3},
    {q: "Muitos motores √† explos√£o (convencional), de aeronaves, possuem sistemas de lubrifica√ß√£o do tipo?", a: ["C√°psula aneroide", "C√°rter seco sob press√£o", "Diafragma seco", "C√°psula diferencial"], c: 1},
    {q: "O passo te√≥rico da h√©lice, tamb√©m √© denominado?", a: ["Recuo", "Avan√ßo", "Passo geom√©trico", "Passo efetivo"], c: 2},
    {q: "Vibra√ß√£o excessiva em um motor, resulta n√£o apenas em falha por fadiga da estrutura met√°lica, mas tamb√©m causa r√°pido desgaste das partes?", a: ["Neutras", "Pressurizada", "M√≥veis", "Fixas"], c: 2},
    {q: "Em motores que tem compressor duplo, o fan √© integral com o compressor de?", a: ["Turbina de baixa", "Turbina de alta", "Compressor de alta", "Compressor de baixa"], c: 3},
    {q: "A combina√ß√£o de uma h√©lice, um conjunto de caixa de redu√ß√£o e um motor a turbina √© chamado de conjunto motopropulsor?", a: ["Turbo jato", "Turbo√©lice", "Turbo fan", "Turbo otto"], c: 1},
    {q: "Nos sistemas de extin√ß√£o de fogo dos motores, os cartuchos das v√°lvulas de descarga dos extintores s√£o acionados?", a: ["Pneumaticamente", "Eletricamente", "Hidraulicamente", "Automaticamente"], c: 1},
    {q: "Na constru√ß√£o de um motor a rea√ß√£o, qual pe√ßa tem caracter√≠sticas de maior influ√™ncia na performance final do motor?", a: ["Difusora", "C√¢mara de combust√£o", "Turbina", "Compressor (axial e centr√≠fugo)"], c: 3},
    {q: "A resist√™ncia que o √≥leo lubrificante oferece ao escoamento denomina-se?", a: ["Elasticidade", "Compressibilidade", "Viscosidade", "Expansibilidade"], c: 2},
    {q: "Um √≥leo que flui vagarosamente √© viscoso ou tem?", a: ["Alta volatilidade", "Baixa viscosidade", "Baixa volatilidade", "Alta viscosidade"], c: 3},
    {q: "Ap√≥s a sua leitura, assinale a alternativa correta. \"The control unit for the simplest type of system typically contains the necessary electronic resistance monitoring and alarm output circuits, housed in a hermetically sealed aluminum case and filled with a mounting bracket and circular electrical connector.\" \"Control unit\" quer dizer:", a: ["Unidade de controle", "Uni√£o de controle", "Unidade de controle √∫nico", "Controle √∫nico"], c: 0},
    {q: "Ap√≥s a sua leitura, assinale a alternativa correta. \"On many aircraft, means are usually provided for rapid access to the compressor, tailpipe, or burner compartments. Many aircraft systems are equipped with spring-loaded or pop-out access doors in the skin of the various compartments.\" \"Compressor\", pode ser traduzido como:", a: ["Conector", "Compressor", "Compensador", "Condensador"], c: 1},
    {q: "Dentre as alternativas abaixo, aquela que √© usada para travar as carenagens do motor?", a: ["Prendedor tipo Dzu", "Contrapino", "Parafuso com arruela", "Arame de freio"], c: 0},
    {q: "O instrumento que mede a rpm do eixo de manivelas do motor denomina-se?", a: ["Vari√¥metro", "Potenci√¥metro", "Man√¥metro", "Tac√¥metro"], c: 3},
    {q: "Os cartuchos de descarga do extintor de fogo s√£o fornecidos com um tempo de vida de, aproximadamente,", a: ["7.500 horas", "5.000 horas", "2.500 horas", "10.000 horas"], c: 1},
    {q: "A diferen√ßa entre o passo geom√©trico e o passo efetivo da h√©lice √© denominado?", a: ["Governador", "Recuo", "Avan√ßo", "Te√≥rico"], c: 1},
    {q: "A flexibilidade de opera√ß√£o √© a capacidade de um motor funcionar?", a: ["Stop fly", "Suavemente", "Condi√ß√£o \"on speed\"", "Pot√™ncia m√°xima"], c: 1},
    {q: "A turbina tem a finalidade de transformar a energia cin√©tica dos gases de escapamento, em energia?", a: ["Pneum√°tica", "Mec√¢nica", "T√©rmica", "Est√°tica"], c: 1},
    {q: "Em um motor convencional, a pot√™ncia √© desenvolvida no(a)?", a: ["Biela mestra", "Cilindro", "V√°lvula", "Eixo de manivelas"], c: 1},
    {q: "Os microorganismos que se desenvolvem nas interfaces de √°gua do combust√≠vel denomina-se?", a: ["Alga", "Fungo", "Bact√©ria", "V√≠rus"], c: 1},
    {q: "O arranque de turbina a ar, √© montado em qual parte do motor?", a: ["No ber√ßo", "No deck", "Na entrada de ar do motor", "No bloco do motor"], c: 3},
    {q: "O poder antidetonante da gasolina √© indicado pela?", a: ["Viscosidade", "Pureza", "Volatilidade", "Octanas"], c: 3},
    {q: "O corpo do acelerador cont√©m: o venturi principal, venturi de apoio, tubos de impacto e?", a: ["Pist√£o", "Borboleta", "Controle de mistura rica", "Est√°ticas"], c: 1},
    {q: "A capacidade de o motor apresentar o desempenho desejado a cada regime de opera√ß√£o, desde a marcha lenta at√© a pot√™ncia m√°xima √© chamada de?", a: ["Flexibilidade de opera√ß√£o", "Confiabilidade", "Compacta√ß√£o", "Durabilidade de opera√ß√£o"], c: 0},
    {q: "As tr√™s causas gerais da forma√ß√£o de \"bolha de vapor\" no sistema de combust√≠vel √©?", a: ["Produ√ß√£o de press√£o est√°tica, baixa temperatura e excessiva turbul√™ncia do combust√≠vel", "Redu√ß√£o da press√£o, alta temperatura e excessiva turbul√™ncia do combust√≠vel", "Aumento da press√£o, baixa temperatura e excessiva turbul√™ncia do combust√≠vel", "Redu√ß√£o da press√£o din√¢mica, redu√ß√£o de temperatura e excessiva pot√™ncia do combust√≠vel"], c: 1},
    {q: "Em um motor alternativo, onde ocorrem a admiss√£o, a compress√£o, a combust√£o e o escapamento?", a: ["Tudo ocorre na c√¢mara de combust√£o", "Fora da c√¢mara de combust√£o", "Coletor", "No compressor axial"], c: 0},
    {q: "Determinar qual das vias o √≥leo tomar√° em fun√ß√£o do radiador, √© objetivo da v√°lvula?", a: ["De al√≠vio", "By-pass", "Dreno", "De controle de fluxo"], c: 3},
    {q: "A bomba de suc√ß√£o do sistema de lubrifica√ß√£o tem a finalidade de?", a: ["Aliviar a press√£o do sistema", "Garantir a ventila√ß√£o do tanque", "Circular o √≥leo, atrav√©s do motor", "Retornar o √≥leo para o tanque"], c: 3},
    {q: "Aumentando-se o √¢ngulo da p√° da h√©lice, ocorrer√° um(a)?", a: ["Diminui√ß√£o de pot√™ncia", "Aumento de rota√ß√£o", "Diminui√ß√£o de passo", "Aumento de passo"], c: 3},
    {q: "Instrumento que indicar o fluxo de combust√≠vel em lbs/h, na unidade de controle de combust√≠vel do motor:", a: ["Flux√¥metro", "Bar√¥metro", "Totalizador", "Tac√¥metro"], c: 0},
    {q: "Efeito da altitude, uma vez que o gradiente de temperatura √© menor que o gradiente de press√£o. Conforme se aumenta a altitude a densidade √©?", a: ["L√≠quida", "Reduzida", "Neutra", "Aumentada"], c: 1},
    {q: "O arco azul no tac√¥metro indica a faixa de?", a: ["Altitude", "Press√£o", "Temperatura", "R.P.M."], c: 3},
    {q: "Durante a partida no motor, se a press√£o do √≥leo \"n√£o subir\", a causa \"improv√°vel\", que n√£o impede de completar a partida?", a: ["Instrumento em pane", "Falha na bomba de √≥leo", "Filtro entupido", "Falta de √≥leo"], c: 2},
    {q: "A resist√™ncia que o √≥leo oferece ao escoamento ou fluxo √© uma propriedade denominada?", a: ["Compressibilidade", "Elasticidade", "Viscosidade", "Neutralidade"], c: 2},
    {q: "O TBO (intervalo entre revis√£o) do motor √© fixado pelo(a)?", a: ["Propriet√°rio da aeronave", "Fabricante do motor", "Oficina de manuten√ß√£o", "Fabricante da aeronave"], c: 1},
    {q: "O fen√¥meno f√≠sico que atua numa h√©lice em movimento, que tende a expulsar as p√°s do cubo, denomina-se for√ßa?", a: ["Centr√≠fuga", "De elev√£o de empuxo", "De tor√ß√£o centr√≠fuga", "Anti-torque"], c: 0},
    {q: "O componente que tem a finalidade de limitar a press√£o de √≥leo do sistema de lubrifica√ß√£o denomina-se?", a: ["V√°lvula de al√≠vio", "Bomba", "Radiador", "V√°lvula termost√°tica"], c: 0},
    {q: "A resist√™ncia de um √≥leo para fluir √© conhecida como?", a: ["Octanas", "Viscosidade", "Visconde", "Neutra"], c: 1},
    {q: "As h√©lices propulsoras s√£o constru√≠das como h√©lice fixas ou de passo?", a: ["Stop stol", "Vari√°vel", "Est√°vel", "Invari√°vel"], c: 1},
    {q: "A se√ß√£o de escapamento de um motor turbo jato est√° localizada atr√°s da se√ß√£o da(o)?", a: ["Compressor", "C√¢mara de combust√£o", "Difusor", "Turbina"], c: 3},
    {q: "Esse dispositivo √© usado em sistema de igni√ß√£o por magnetos de alta tens√£o, abre e fecha automaticamente o circuito prim√°rio no devido tempo, em rela√ß√£o √† posi√ß√£o do pist√£o no cilindro, no qual est√° ocorrendo o centelhamento:", a: ["Conjunto de bobinas", "Cabo de igni√ß√£o", "Conjunto de contatos platinados", "Distribuidor"], c: 2},
    {q: "Alguns carburadores s√£o equipados com parafusos exc√™ntricos para ajuste da(do)?", a: ["Rpm", "Centelhamento", "HSI", "√Çngulo de ataque"], c: 0},
    {q: "Pot√™ncia de atrito √© a pot√™ncia indicada menos a pot√™ncia de?", a: ["Freio", "Estol", "Reduzida", "Gases cin√©ticos"], c: 0},
    {q: "O indicador do \"EGT\" possui as suas sondas instaladas em qual parte do motor?", a: ["Antes do compressor", "Antes da turbina", "Ap√≥s o compressor", "Ap√≥s a turbina"], c: 3},
    {q: "Torque √© uma medida de carga, expressa em?", a: ["Newton polegada(nw.pol) ou libra-p√©", "Libra-polegada(lb.pol) ou libra-p√©", "On√ßa-polegada(on.pol) ou libra-p√©", "Polegada-polegada(pol.pol) ou libra-p√©"], c: 1},
    {q: "Em rela√ß√£o a uma h√©lice, √© correto afirmar que o passo efetivo √©?", a: ["O passo que reconhece o recuo da h√©lice", "O passo que reconhece o retardado da h√©lice", "O passo que reconhece a tor√ß√£o da h√©lice", "O passo que reconhece o avan√ßo da h√©lice"], c: 0},
    {q: "Se uma determinada palheta de um disco de turbina requerer substitui√ß√£o, dever√° tamb√©m ser substitu√≠da a que estiver?", a: ["A 90 graus √† direita", "Ao seu lado, do lado esquerdo", "Ao seu lado, do lado direito", "Diametralmente oposta"], c: 3},
    {q: "A garrafa do sistema de extin√ß√£o de fogo do motor √© operada por cartucho, como √© o acionado desse sistema?", a: ["Hidraulicamente", "Pneumaticamente", "Eletricamente", "Mecanicamente"], c: 2},
    {q: "Quando a h√©lice est√° em movimento e h√° forma√ß√£o de gelo nas p√°s, a distor√ß√£o do aerof√≥lio poder√° causar na h√©lice?", a: ["Mudan√ßa do passo para reverso", "Mudan√ßa do passo para o bandeira", "Vibra√ß√£o", "Aumento de rpm"], c: 2},
    {q: "O eixo da h√©lice pode ser conectado por meio de engrenagens redutoras ao eixo?", a: ["Cardan", "Do comando de v√°lvulas", "De manivelas", "De bielas"], c: 2},
    {q: "Para absorver a vibra√ß√£o do motor para a c√©lula da aeronave existe o(a)?", a: ["Coxim", "Rolamento", "Ber√ßo", "Nacele"], c: 0},
    {q: "A finalidade do governador da h√©lice de passo control√°vel √©?", a: ["Manter o √¢ngulo da p√° fixo", "Regular o passo", "Aumentar a pot√™ncia do motor", "Reduzir a pot√™ncia do motor"], c: 1},
    {q: "No texto, a palavra \"wide\" quer dizer: _A wide range of diagnostics are utilized to verify the fire extinguisher agent charge status._", a: ["Alto", "Largo", "Curto", "Fino"], c: 1},
    {q: "A RPM do eixo de manivelas √© mostrada atrav√©s do instrumento denominado:", a: ["Torqu√≠metro", "Veloc√≠metro", "Tac√¥metro", "Man√¥metro"], c: 2},
    {q: "Prepara√ß√£o do motor para remo√ß√£o, antes de se come√ßar a trabalhar no avi√£o ou motor, a chave dos magnetos devem estar?", a: ["Na posi√ß√£o ligada para ambos os motores", "Ligadas", "Desligadas", "Pode estar em qualquer posi√ß√£o"], c: 2},
    {q: "Todos os motores t√©rmicos t√™m em comum a capacidade de converter energia calor√≠fica em?", a: ["Energia el√©trica", "Energia est√°tica", "Energia e√≥lica", "Energia mec√¢nica"], c: 3},
    {q: "A distribui√ß√£o de igni√ß√£o e a abertura das v√°lvulas s√£o sempre especificadas em?", a: ["Mil√≠metro", "Graus", "√Çngulos", "Gal√£o"], c: 1},
    {q: "Teoricamente, a dist√¢ncia que uma h√©lice deveria avan√ßar em uma revolu√ß√£o, denomina-se?", a: ["Avan√ßo", "Passo geom√©trico", "Recuo", "Passo efetivo"], c: 1},
    {q: "O que √© ponto de vapor e ponto de chama?", a: ["S√£o determinados a partir de testes em laborat√≥rios, que mostram a temperatura em que o √≥leo come√ßa a desprender o motor", "S√£o determinados a partir de testes em laborat√≥rios, que mostram a temperatura em que o √≥leo come√ßa a desprender vapor...", "S√£o determinados a partir de testes em laborat√≥rios, que mostram a temperatura em que o √≥leo come√ßa a desprender os aneis", "S√£o determinados a partir de testes em laborat√≥rios, que mostram a temperatura em que o √≥leo come√ßa a desprender √≥leo"], c: 1},
    {q: "Nos motores a rea√ß√£o, as c√¢maras de combust√£o do tipo caneca, disp√µe de interconectores cuja finalidade √©?", a: ["Isolar a chama", "Propagar a chama", "Reduzir a chama", "Eliminar a chama"], c: 1},
    {q: "Quando um motor √© guardado numa embalagem para transporte ou num container, alguns agentes desidratantes devem ser usados. A finalidade destes agentes √©?", a: ["Eliminar poeira para preservar o motor", "Manter o interior do container com temperatura abaixo de zero grau", "Remover a umidade do ar no ambiente do motor", "Conservar a entrada de ar do motor livre de impurezas"], c: 2},
    {q: "A opera√ß√£o de embandeiramento e desembandeiramento da h√©lice √© controlada pelo(a)?", a: ["Governador", "Aranha", "Conjunto da c√∫pula", "V√°lvula distribuidora"], c: 0},
    {q: "No texto, a palavra \"prevent\" quer dizer: _a complete line of two-way check values is available, manufactured from either lightweight aluminum or steel. these values are required in a two-shot system to prevent the agent in a reserve container from backing up into the previous emptied main container.", a: ["Evoluir", "Evitar", "Penetra", "Permitir"], c: 1},
    {q: "O primeiro prop√≥sito da lubrifica√ß√£o √© reduzir a fric√ß√£o entre as partes?", a: ["M√≥veis", "Pressurizadas do sistema de oxig√™nio", "Externas do motor", "Im√≥veis"], c: 0},
    {q: "Responda com a alternativa certa. _a complete line of two-way check valves is available, manufactured from either lightweight aluminum or steel. these values are required in a two-shot system to prevent the agent in a reserve container from backing up into the previous emptied main container. \"two-way check values\" quer dizer:", a: ["V√°lvulas de reten√ß√£o de duas vias", "V√°lvulas de 2 sa√≠das", "V√°lvulas de escape bidirecionais", "V√°lvulas de distribui√ß√£o de duas vias"], c: 0},
    {q: "O gelo que se forma nas p√°s da h√©lice desalinhando o fluxo de ar, √© eliminado atrav√©s do:", a: ["Sistema pneum√°tico", "Sistema de combust√≠vel", "Sistema de lubrifica√ß√£o", "Sistema el√©trico de degelo"], c: 3},
    {q: "A condi√ß√£o de sobrevelocidade ocorrida numa turbina poder√° ser observada pelo(a)?", a: ["vibra√ß√£o do motor", "indica√ß√£o da tit", "estol do compressor", "tac√¥metro"], c: 3},
    {q: "Teoricamente, a dist√¢ncia que uma h√©lice deveria avan√ßar em uma revolu√ß√£o, denomina-se?", a: ["passo geom√©trico", "recuo", "avan√ßo", "passo efetivo"], c: 0},
    {q: "O indicador do \"EGT\" possui as suas sondas instaladas em qual parte do motor?", a: ["antes do compressor", "antes da turbina", "ap√≥s o compressor", "ap√≥s a turbina"], c: 3},
    {q: "O dispositivo que tem como finalidade transformar a velocidade do ar em press√£o est√°tica denomina-se?", a: ["c√¢mara", "difusor", "coletor", "turbina"], c: 1},
    {q: "A expans√£o dos gases, ao movimentar o √™mbolo, desenvolve no motor uma energia do tipo?", a: ["cin√©tica", "mec√¢nica", "pneum√°tica", "est√°tica"], c: 1},
    {q: "Durante a partida no motor, se a press√£o do √≥leo \"n√£o subir\", a causa \"improv√°vel\", que n√£o impede de completar a partida?", a: ["falha na bomba de √≥leo", "instrumento em pane", "falta de √≥leo", "filtro entupido"], c: 3},
    {q: "no motor convencional, o tempo de igni√ß√£o varia de 20¬∞ a 35¬∞ antes de ponto morto?", a: ["baixo", "neutro", "vari√°vel", "alto"], c: 3},
    {q: "a finalidade do compressor nos motores a jato √© fornecer?", a: ["ar em quantidade suficiente √† turbina", "press√£o suficiente √† caixa de acess√≥rios", "ar em quantidade suficiente aos queimadores de combust√£o", "mistura ar/combust√≠vel √† c√¢mara de combust√£o"], c: 2},
    {q: "√â caracter√≠stica de √≥leo lubrificante com alta viscosidade?", a: ["√â muito inflam√°vel igual ao √°lcool", "Visconde", "Azul na colora√ß√£o", "Viscoso"], c: 3},
    {q: "O √≥leo que √© drenado para dentro da c√¢mara de combust√£o, quando o motor radial permanece cortado por longo per√≠odo de tempo pode ocasionar cal√ßo hidr√°ulico, para evitar danos ao motor, devemos?", a: ["Devemos remover os pist√µes e substituir os an√©is", "Devemos substituir as v√°lvulas", "Remover as velas inferiores e executar de duas a tr√™s voltas na h√©lice com a chave de igni√ß√£o desligada", "Remover as velas inferiores e executar de duas a tr√™s voltas na h√©lice com a chave de igni√ß√£o ligada"], c: 2},
    {q: "Ap√≥s a sua leitura, assinale a alternativa correta. _the thermal discharge indicator is connected to the fire container relief fitting and ejects a red disk to show when container contents have dumped overboard due to excessive heat. \"excessive heat\" quer dizer:", a: ["Temperatura excessiva", "Frio excessivo", "Calor em excesso", "Calor excessivo"], c: 3},
    {q: "Leia com aten√ß√£o o texto e responda a alternativa correta. _the power plant installation has several designated fire zones: (1) the engine power section; (2) the engine accessory section; (3) except for reciprocating engines, \"several designated fire zones\", quer dizer:", a: ["V√°rias zonas frias designadas", "V√°rias zonas de fogo designadas", "V√°rias zonas de superaquecimento designadas", "V√°rias zonas de resfriamento designadas"], c: 1},
    {q: "A diferen√ßa entre o passo geom√©trico e o passo efetivo da h√©lice √© denominado?", a: ["Recuo", "Governador", "Te√≥rico", "Avan√ßo"], c: 0},
    {q: "Uma √°rea desgastada ou com marcas, causadas por objetos estranhos entre as partes m√≥veis ou superf√≠cies:", a: ["Brunidura", "Mossas", "Abras√£o", "Atrito"], c: 2},
    {q: "Retificadores, muitos servi√ßos nas aeronaves requerem altas amperagens e?", a: ["M√©dias voltagem c.c.", "Altas voltagens c.c.", "Baixas voltagens c.c.", "Acumulo de corrente reversa"], c: 2},
    {q: "O componente onde √© instalado o rolamento de apoio e suporte do eixo de manivelas, no c√°rter de um motor convencional, denomina-se?", a: ["Munh√£o", "Biela articulada", "Biela mestra", "Moente"], c: 0},
    {q: "Proporcionar o balanceamento din√¢mico do motor e eliminar as vibra√ß√µes ao m√°ximo poss√≠vel √© objetivo do(a)?", a: ["Ordem de fogo", "Admiss√£o e compress√£o", "An√©is de segmentos", "Ciclo de quatro tempos"], c: 0},
    {q: "A sequ√™ncia do ciclo de opera√ß√£o do motor a quatro tempos √©: Admiss√£o,?", a: ["Compress√£o, escapamento e pot√™ncia", "Compress√£o, pot√™ncia e escapamento", "Pot√™ncia, compress√£o e escapamento", "Escapamento, pot√™ncia e compress√£o"], c: 1},
    {q: "Em v√¥o, com a finalidade de reduzir o peso da aeronave ao seu peso m√°ximo de pouso especificado, o piloto pode acionar qual dispositivo?", a: ["Distribui√ß√£o", "Alijamento", "Alimenta√ß√£o cruzada", "Transfer√™ncia"], c: 1},
    {q: "A se√ß√£o de escapamento do motor a rea√ß√£o est√° localizada ap√≥s a sa√≠da do(a)?", a: ["Turbina", "C√¢mara de combust√£o", "Difusor", "Compressor"], c: 0},
    {q: "Conforme o pist√£o se move para baixo no cilindro, ele aspira a mistura?", a: ["Ar/combust√≠vel", "Porcentagem de nitro", "H2o", "Co2"], c: 0},
    {q: "As bombas que circulam o √≥leo atrav√©s do motor e as que retornam o √≥leo para o reservat√≥rio s√£o, respectivamente, do tipo?", a: ["Press√£o e suc√ß√£o", "Suc√ß√£o e press√£o", "Press√£o e press√£o", "Suc√ß√£o e suc√ß√£o"], c: 0},
    {q: "No motor a rea√ß√£o, o trocador de calor combust√≠vel/√≥leo tem a finalidade de?", a: ["Pr√© aquecer o combust√≠vel e o √≥leo", "Pr√©-aquecer o combust√≠vel e resfriar o √≥leo", "Resfriar o combust√≠vel e aquecer o √≥leo", "Resfriar o combust√≠vel e o √≥leo"], c: 1}

];

    
    // ============================================
    // CONFIGURA√á√ïES DO SISTEMA
    // ============================================
    const QUESTIONS_PER_SIMULADO_PADRAO = 20;
    const MIN_WRONG_QUESTIONS_FOR_SIMULADO = 1;
    const MIN_PERCENT_FOR_SUCCESS = 70;
    
    // ============================================
    // VARI√ÅVEIS GLOBAIS
    // ============================================
    let QUESTIONS_PER_SIMULADO = QUESTIONS_PER_SIMULADO_PADRAO;
    let API_URL = "https://script.google.com/macros/s/AKfycbwcX8bNdrDQZ6sRB1sbG0COJe7aGYyBlOCPkno2JxbM-59_-FsWt4LCccUQ8DBLTy1S5g/exec";
    let EMAIL_DESTINO = "ewerton.andriel@hotmail.com";
    
    let TIME_LIMIT = 0;
    let currentQuestions = [];
    let userAnswers = [];
    let timeLeft = 0;
    let timerId;
    let currentQuestionIndex = 0;
    let autoNavEnabled = true;
    let usedQuestionsHistory = [];
    let currentSimuladoIndices = [];
    let totalSimulados = 1;
    let currentSimuladoNumber = 1;
    
    // VARI√ÅVEIS DO SISTEMA DE REPORTE
    let currentReportQuestionIndex = null;
    let reportsHistory = [];

    // TIPOS DE REPORTE
    const REPORT_TYPES = {
        error: "‚ùå Quest√£o com erro",
        wrong_answer: "‚ö†Ô∏è Resposta incorreta", 
        confusing: "ü§î Enunciado confuso",
        alternative: "üî§ Alternativas erradas",
        other: "üìù Outro problema"
    };
    
    // ============================================
    // VARI√ÅVEIS PARA SISTEMA DE REFOR√áO
    // ============================================
    let wrongQuestionsHistory = [];
    const WRONG_QUESTIONS_KEY = 'wrong_questions_history';
    const LAST_OFFER_KEY = 'last_reforco_offer';
    
    // ============================================
    // CHAVE PARA SESS√ÉO ATUAL
    // ============================================
    const SESSION_ID_KEY = 'current_session_id';
    const CURRENT_QUESTIONS_KEY = 'current_session_questions';
    const CURRENT_QUESTION_INDEX_KEY = 'current_question_index';
    const USER_ANSWERS_KEY = 'user_answers';
    const TIME_LEFT_KEY = 'time_left';
    const AUTO_NAV_KEY = 'auto_nav';
    const SIMULADO_STARTED_KEY = 'simulado_started';
    const CURRENT_SIMULADO_NUMBER_KEY = 'current_simulado_number';
    
    // ============================================
    // FUN√á√ïES DE CONFIGURA√á√ÉO DO SIMULADO
    // ============================================
    
    function calcularConfiguracaoSimulados() {
        const totalQuestions = masterBank.length;
        
        if (totalQuestions <= 27) {
            totalSimulados = 1;
            QUESTIONS_PER_SIMULADO = totalQuestions;
            return {
                totalSimulados: 1,
                questionsPerSimulado: totalQuestions,
                mensagem: `Banco com ${totalQuestions} quest√µes ‚Üí 1 √∫nico simulado`
            };
        } else if (totalQuestions >= 28 && totalQuestions <= 39) {
            totalSimulados = 2;
            const questionsPerSimulado = Math.ceil(totalQuestions / 2);
            QUESTIONS_PER_SIMULADO = questionsPerSimulado;
            return {
                totalSimulados: 2,
                questionsPerSimulado: questionsPerSimulado,
                mensagem: `Banco com ${totalQuestions} quest√µes ‚Üí 2 simulados de ~${questionsPerSimulado} quest√µes cada`
            };
        } else {
            totalSimulados = Math.ceil(totalQuestions / QUESTIONS_PER_SIMULADO_PADRAO);
            QUESTIONS_PER_SIMULADO = QUESTIONS_PER_SIMULADO_PADRAO;
            return {
                totalSimulados: totalSimulados,
                questionsPerSimulado: QUESTIONS_PER_SIMULADO_PADRAO,
                mensagem: `Banco com ${totalQuestions} quest√µes ‚Üí ${totalSimulados} simulados de 20 quest√µes`
            };
        }
    }
    
    // ============================================
    // NOVA FUN√á√ÉO: NOVO SIMULADO AP√ìS REFOR√áO
    // ============================================
    
    function novoSimuladoAposReforco() {
        const totalQuestions = masterBank.length;
        const remainingQuestions = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        
        if (remainingQuestions === 0) {
            if (confirm(`Voc√™ j√° completou todas as ${totalQuestions} quest√µes!\n\nDeseja reiniciar o hist√≥rico e come√ßar um novo simulado?`)) {
                usedQuestionsHistory = [];
                localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                startNewSimuladoFromResults();
            }
        } else {
            if (confirm(`Deseja continuar com as pr√≥ximas quest√µes do banco?\n\nRestam: ${remainingQuestions} quest√µes\nUsadas: ${usedQuestionsHistory.length} quest√µes`)) {
                startNewSimuladoFromResults();
            }
        }
    }
    
    // ============================================
    // FUN√á√ÉO: ATUALIZAR BOT√ÉO NOVO SIMULADO REFOR√áO
    // ============================================
    
    function updateNovoSimuladoReforcoButton() {
        const novoSimuladoBtn = document.getElementById('novo-simulado-reforco-btn');
        if (!novoSimuladoBtn) return;
        
        const isReforco = currentQuestions[0]?.isWrongQuestion;
        const isResultsVisible = document.getElementById('results').style.display === 'block';
        const totalQuestions = masterBank.length;
        const remainingQuestions = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        
        // Mostra o bot√£o se:
        // 1. √â um simulado de refor√ßo que acabou
        // 2. Est√° na tela de resultados
        // 3. Ainda h√° quest√µes no banco OU todas foram usadas
        if (isReforco && isResultsVisible) {
            novoSimuladoBtn.style.display = 'block';
            
            if (remainingQuestions === 0) {
                novoSimuladoBtn.innerHTML = `üéØ Novo Simulado (Reiniciar Banco)`;
            } else {
                novoSimuladoBtn.innerHTML = `üéØ Novo Simulado (${remainingQuestions} restantes)`;
            }
        } else {
            novoSimuladoBtn.style.display = 'none';
        }
    }
    
    // ============================================
    // NOVA FUN√á√ÉO: CONTINUAR COM BANCO
    // ============================================
    
    function continuarComBanco() {
        const totalQuestions = masterBank.length;
        const remainingQuestions = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        
        let message = `üìö CONTINUAR COM BANCO\n\n`;
        
        if (remainingQuestions === 0) {
            message += `Voc√™ j√° completou todas as ${totalQuestions} quest√µes!\n`;
            message += `Deseja reiniciar o hist√≥rico e come√ßar um novo simulado?`;
            
            if (confirm(message)) {
                // Limpa hist√≥rico e come√ßa novo
                usedQuestionsHistory = [];
                localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                
                // Gera novo simulado
                startNewSimuladoFromResults();
            }
        } else {
            message += `Restam ${remainingQuestions} quest√µes no banco.\n`;
            message += `Voc√™ j√° completou ${usedQuestionsHistory.length} quest√µes.\n\n`;
            message += `Deseja continuar com as pr√≥ximas quest√µes do banco?`;
            
            if (confirm(message)) {
                // Continua com pr√≥ximo simulado
                startNewSimuladoFromResults();
            }
        }
    }
    
    // ============================================
    // FUN√á√ÉO: VOLTAR AO IN√çCIO
    // ============================================
    
    function voltarAoInicio() {
        const totalQuestions = masterBank.length;
        
        let message = `üèÅ VOLTAR AO IN√çCIO\n\n`;
        message += `Esta a√ß√£o vai:\n`;
        message += `‚Ä¢ Limpar TODO o hist√≥rico de progresso\n`;
        message += `‚Ä¢ Limpar TODO o hist√≥rico de quest√µes erradas\n`;
        message += `‚Ä¢ Reiniciar completamente o sistema\n`;
        message += `‚Ä¢ Come√ßar um NOVO simulado do zero\n\n`;
        message += `Tem certeza que deseja voltar ao in√≠cio?`;
        
        if (confirm(message)) {
            usedQuestionsHistory = [];
            localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
            
            wrongQuestionsHistory = [];
            saveWrongQuestionsHistory();
            
            localStorage.removeItem(LAST_OFFER_KEY);
            
            clearSessionData();
            
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            currentQuestions = selectRandomQuestions(true); // true = for√ßar simulado 1
            
            if (currentQuestions.length === 0) {
                alert("Erro ao gerar novo simulado.");
                return;
            }
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            currentSimuladoNumber = 1;
            
            saveCurrentSessionState();
            
            updatePageTitle();
            document.getElementById('timer').textContent = formatTime(timeLeft);
            document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
            
            startTimer();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateSimuladoInfo();
            updateReforcoButton();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
            
            document.getElementById('motivation-message').innerHTML = '';
            document.getElementById('motivation-message').className = 'motivation-message';
            
            alert(`‚úÖ SISTEMA REINICIADO!\n\n${totalQuestions} quest√µes dispon√≠veis.\nBoa sorte!`);
        }
    }
    
    // ============================================
    // FUN√á√ïES DE HIST√ìRICO CORRIGIDAS
    // ============================================

    function clearHistory() {
        if (confirm(`Limpar hist√≥rico completo?`)) {
            // Limpa hist√≥rico
            usedQuestionsHistory = [];
            localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
            
            wrongQuestionsHistory = [];
            saveWrongQuestionsHistory();
            
            clearSessionData();
            
            // RESETA INTERFACE
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            // Gera NOVO simulado come√ßando do 1
            currentQuestions = selectRandomQuestions(true); // true = for√ßar simulado 1
            
            if (currentQuestions.length === 0) {
                alert("N√£o foi poss√≠vel gerar o simulado.");
                return;
            }
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            
            // IMPORTANTE: Garante que come√ßa no simulado 1
            currentSimuladoNumber = 1;
            
            saveCurrentSessionState();
            
            updatePageTitle();
            document.getElementById('timer').textContent = formatTime(timeLeft);
            document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
            updateSimuladoInfo();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateReforcoButton();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
            
            startTimer();
            
            alert('Hist√≥rico limpo! Novo simulado gerado.');
        }
    }

    // ============================================
    // FUN√á√ÉO SELECTRANDOMQUESTIONS CORRIGIDA
    // ============================================

    function selectRandomQuestions(forceFirstSimulado = false) {
        const totalQuestions = masterBank.length;
        
        if (totalQuestions === 0) {
            alert("‚ö†Ô∏è O banco de quest√µes est√° vazio! Adicione quest√µes no c√≥digo.");
            return [];
        }
        
        const config = calcularConfiguracaoSimulados();
        console.log(config.mensagem);
        
        let availableQuestions = [];
        for (let i = 0; i < totalQuestions; i++) {
            availableQuestions.push(i);
        }
        
        // Remove as j√° usadas
        if (usedQuestionsHistory.length > 0 && !forceFirstSimulado) {
            availableQuestions = availableQuestions.filter(index => 
                !usedQuestionsHistory.includes(index)
            );
        }
        
        const availableCount = availableQuestions.length;
        let questionsToSelect;
        
        if (availableCount === 0) {
            if (confirm(`Todas as ${totalQuestions} quest√µes j√° foram usadas!\n\nDeseja reiniciar o hist√≥rico?`)) {
                usedQuestionsHistory = [];
                localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                availableQuestions = Array.from({length: totalQuestions}, (_, i) => i);
                questionsToSelect = Math.min(QUESTIONS_PER_SIMULADO, totalQuestions);
                alert('Hist√≥rico reiniciado!');
                // Quando reinicia, for√ßa come√ßar do simulado 1
                forceFirstSimulado = true;
            } else {
                availableQuestions = Array.from({length: totalQuestions}, (_, i) => i);
                questionsToSelect = Math.min(QUESTIONS_PER_SIMULADO, totalQuestions);
            }
        } else if (availableCount >= QUESTIONS_PER_SIMULADO) {
            questionsToSelect = QUESTIONS_PER_SIMULADO;
        } else if (availableCount >= 5) {
            questionsToSelect = availableCount;
        } else {
            if (confirm(`S√≥ restam ${availableCount} quest√µes!\n\nDeseja fazer simulado com essas quest√µes?`)) {
                questionsToSelect = availableCount;
            } else {
                if (confirm(`Deseja reiniciar o hist√≥rico?`)) {
                    usedQuestionsHistory = [];
                    localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                    availableQuestions = Array.from({length: totalQuestions}, (_, i) => i);
                    questionsToSelect = Math.min(QUESTIONS_PER_SIMULADO, totalQuestions);
                    // Quando reinicia, for√ßa come√ßar do simulado 1
                    forceFirstSimulado = true;
                } else {
                    questionsToSelect = availableCount;
                }
            }
        }
        
        // Para bancos pequenos (‚â§ 27), usa todas as quest√µes
        if (totalQuestions <= 27) {
            questionsToSelect = totalQuestions;
            availableQuestions = Array.from({length: totalQuestions}, (_, i) => i);
        }
        
        const shuffledQuestions = shuffleArray(availableQuestions);
        const selectedIndices = shuffledQuestions.slice(0, questionsToSelect);
        
        currentSimuladoIndices = selectedIndices;
        
        // CORRE√á√ÉO: L√≥gica aprimorada para calcular o n√∫mero do simulado
        if (forceFirstSimulado || usedQuestionsHistory.length === 0) {
            // Se for√ßado ou hist√≥rico vazio, come√ßa do simulado 1
            currentSimuladoNumber = 1;
        } else if (selectedIndices.length > 0) {
            // Calcula baseado nas quest√µes j√° usadas
            const usedCount = usedQuestionsHistory.length;
            const simuladoIndex = Math.floor(usedCount / QUESTIONS_PER_SIMULADO);
            currentSimuladoNumber = Math.min(simuladoIndex + 1, totalSimulados);
        } else {
            // Fallback
            currentSimuladoNumber = 1;
        }
        
        // Garante que n√£o ultrapassa o total de simulados
        if (currentSimuladoNumber > totalSimulados) {
            currentSimuladoNumber = totalSimulados;
        }
        
        console.log(`Simulado configurado: ${currentSimuladoNumber}/${totalSimulados}`);
        
        return selectedIndices.map(index => ({
            ...masterBank[index], 
            originalIndex: index
        }));
    }

    // ============================================
    // FUN√á√ÉO GENERATENEWSIMULADO CORRIGIDA
    // ============================================

    function generateNewSimulado() {
        const totalQuestions = masterBank.length;
        const totalAvailable = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        
        let message;
        if (totalAvailable === 0) {
            message = `Todas as quest√µes j√° foram usadas!\n\nDeseja reiniciar o hist√≥rico?`;
        } else if (totalAvailable < QUESTIONS_PER_SIMULADO) {
            message = `S√≥ restam ${totalAvailable} quest√µes.\n\nDeseja fazer simulado com elas?`;
        } else {
            message = `Gerar novo simulado com ${Math.min(QUESTIONS_PER_SIMULADO, totalAvailable)} quest√µes?`;
        }
        
        if (confirm(message)) {
            if (totalAvailable === 0) {
                usedQuestionsHistory = [];
                localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                alert('Hist√≥rico reiniciado!');
            }
            
            // RESETA INTERFACE
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            // Gera novo simulado SEM for√ßar o primeiro (deixa a l√≥gica normal decidir)
            currentQuestions = selectRandomQuestions(false);
            
            if (currentQuestions.length === 0) {
                alert("Erro ao gerar simulado.");
                return;
            }
            
            const newSessionId = 'session_' + Date.now();
            sessionStorage.setItem(SESSION_ID_KEY, newSessionId);
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            
            saveCurrentSessionState();
            
            updatePageTitle();
            document.getElementById('timer').textContent = formatTime(timeLeft);
            document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
            startTimer();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateSimuladoInfo();
            updateReforcoButton();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
        }
    }

    // ============================================
    // FUN√á√ÉO STARTSIMULADOFROMBANCO CORRIGIDA
    // ============================================

    function startNewSimuladoFromResults() {
        // RESETA A INTERFACE
        document.getElementById('results').style.display = 'none';
        document.getElementById('finish-btn').style.display = 'block';
        document.getElementById('restart-btn').style.display = 'none';
        document.getElementById('voltar-inicio-btn').style.display = 'none';
        document.getElementById('continuar-banco-btn').style.display = 'none';
        document.getElementById('wrong-questions-btn').style.display = 'none';
        document.getElementById('reiniciar-banco-btn').style.display = 'none';
        document.getElementById('new-simulado-btn').style.display = 'none';
        document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
        document.querySelector('.nav-buttons').style.display = 'flex';
        
        // Gera novo simulado normal (deixa a l√≥gica normal decidir o n√∫mero)
        currentQuestions = selectRandomQuestions(false);
        
        if (currentQuestions.length === 0) {
            alert("N√£o foi poss√≠vel gerar novo simulado.");
            return;
        }
        
        const newSessionId = 'session_' + Date.now();
        sessionStorage.setItem(SESSION_ID_KEY, newSessionId);
        
        userAnswers = new Array(currentQuestions.length).fill(null);
        currentQuestionIndex = 0;
        TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
        timeLeft = TIME_LIMIT;
        autoNavEnabled = true;
        
        saveCurrentSessionState();
        
        updatePageTitle();
        document.getElementById('timer').textContent = formatTime(timeLeft);
        document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
        startTimer();
        renderCurrentQuestion();
        updateCounters();
        updateNavButtons();
        updateFinishButton();
        updatePendingQuestions();
        updateSimuladoInfo();
        updateReforcoButton();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
        
        // Mostra mensagem informativa
        const totalQuestions = masterBank.length;
        const remainingQuestions = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        alert(`‚úÖ NOVO SIMULADO INICIADO!\n\n${currentQuestions.length} quest√µes selecionadas.\n\nRestam ${remainingQuestions} quest√µes no banco.`);
    }
    
    // ============================================
    // FUN√á√ÉO: ATUALIZAR BOT√ÉO VOLTAR AO IN√çCIO
    // ============================================
    
    function updateVoltarInicioButton() {
        const voltarBtn = document.getElementById('voltar-inicio-btn');
        if (!voltarBtn) return;
        
        const isReforco = currentQuestions[0]?.isWrongQuestion;
        const isResultsVisible = document.getElementById('results').style.display === 'block';
        const percent = parseInt(document.getElementById('final-percent')?.textContent?.replace('%', '') || 0);
        
        if (isReforco && isResultsVisible && percent >= MIN_PERCENT_FOR_SUCCESS) {
            voltarBtn.style.display = 'block';
            voltarBtn.innerHTML = `üèÅ Voltar ao In√≠cio (Limpar Tudo)`;
        } else {
            voltarBtn.style.display = 'none';
        }
    }
    
    // ============================================
    // CONTINUA√á√ÉO DO C√ìDIGO EXISTENTE
    // ============================================
    
    function startWrongQuestionsSimulado() {
        console.log('Iniciando simulado de refor√ßo...');
        
        currentQuestions = generateWrongQuestionsSimulado();
        
        if (currentQuestions.length === 0) {
            alert('N√£o h√° quest√µes erradas para fazer o simulado de refor√ßo.');
            updateReforcoButton();
            return;
        }
        
        currentSimuladoNumber = totalSimulados + 1;
        
        userAnswers = new Array(currentQuestions.length).fill(null);
        currentQuestionIndex = 0;
        TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
        timeLeft = TIME_LIMIT;
        autoNavEnabled = true;
        
        saveCurrentSessionState();
        
        updatePageTitle();
        document.getElementById('timer').textContent = formatTime(timeLeft);
        document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
        
        document.getElementById('results').style.display = 'none';
        document.getElementById('finish-btn').style.display = 'block';
        document.getElementById('restart-btn').style.display = 'none';
        document.getElementById('voltar-inicio-btn').style.display = 'none';
        document.getElementById('continuar-banco-btn').style.display = 'none';
        document.getElementById('wrong-questions-btn').style.display = 'none';
        document.getElementById('reiniciar-banco-btn').style.display = 'none';
        document.getElementById('new-simulado-btn').style.display = 'none';
        document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
        document.querySelector('.nav-buttons').style.display = 'flex';
        
        const wrongCount = wrongQuestionsHistory.length;
        const totalQuestions = masterBank.length;
        const successRate = Math.round(((totalQuestions - wrongCount) / totalQuestions) * 100);
        
        document.getElementById('simulado-info').innerHTML = `
            <div style="color: var(--danger); font-weight: bold; text-align: center;">‚ö° SIMULADO DE REFOR√áO</div>
            <div style="text-align: center; font-size: 0.6rem;">Quest√µes que voc√™ errou anteriormente</div>
            <div class="simulado-stats">
                <span>Quest√µes: ${currentQuestions.length}</span>
                <span>Acertos anteriores: ${successRate}%</span>
            </div>
        `;
        document.getElementById('simulado-info').style.display = 'block';
        
        startTimer();
        renderCurrentQuestion();
        updateCounters();
        updateNavButtons();
        updateFinishButton();
        updatePendingQuestions();
        
        updateReforcoButton();
        updateReiniciarBancoButton();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
        
        alert(`üéØ SIMULADO DE REFOR√áO INICIADO!\n\n${currentQuestions.length} quest√µes que voc√™ errou anteriormente.\nBoa sorte!`);
    }
    
    function updateReforcoButton() {
        const wrongBtn = document.getElementById('wrong-questions-btn');
        if (!wrongBtn) return;
        
        const hasEnough = hasEnoughWrongQuestionsForSimulado();
        const isReforcoActive = currentQuestions[0]?.isWrongQuestion;
        const isResultsVisible = document.getElementById('results').style.display === 'block';
        
        if (hasEnough && !isReforcoActive && isResultsVisible) {
            wrongBtn.style.display = 'block';
            wrongBtn.innerHTML = `‚ö° Simulado de Refor√ßo (${wrongQuestionsHistory.length})`;
        } else {
            wrongBtn.style.display = 'none';
        }
    }
    
    function updateReiniciarBancoButton() {
        const reiniciarBtn = document.getElementById('reiniciar-banco-btn');
        if (!reiniciarBtn) return;
        
        const isReforco = currentQuestions[0]?.isWrongQuestion;
        const isResultsVisible = document.getElementById('results').style.display === 'block';
        const percent = parseInt(document.getElementById('final-percent')?.textContent?.replace('%', '') || 0);
        
        if (isReforco && isResultsVisible && percent < MIN_PERCENT_FOR_SUCCESS) {
            reiniciarBtn.style.display = 'block';
            reiniciarBtn.innerHTML = `üîÑ Reiniciar Banco (${masterBank.length} quest√µes)`;
        } else {
            reiniciarBtn.style.display = 'none';
        }
    }
    
    function reiniciarBancoCompleto() {
        const totalQuestions = masterBank.length;
        const wrongCount = wrongQuestionsHistory.length;
        
        let message = `üîÑ REINICIAR BANCO COMPLETO\n\n`;
        message += `Voc√™ n√£o atingiu 70% no simulado de refor√ßo.\n\n`;
        message += `Esta a√ß√£o vai:\n`;
        message += `‚Ä¢ Limpar TODO o hist√≥rico (${usedQuestionsHistory.length} quest√µes usadas)\n`;
        message += `‚Ä¢ Limpar TODO o hist√≥rico de erros (${wrongCount} quest√µes)\n`;
        message += `‚Ä¢ Reiniciar o progresso do ZERO\n\n`;
        message += `Deseja reiniciar completamente?`;
        
        if (confirm(message)) {
            usedQuestionsHistory = [];
            localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
            
            wrongQuestionsHistory = [];
            saveWrongQuestionsHistory();
            
            localStorage.removeItem(LAST_OFFER_KEY);
            
            clearSessionData();
            
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            currentQuestions = selectRandomQuestions(true); // true = for√ßar simulado 1
            
            if (currentQuestions.length === 0) {
                alert("Erro ao gerar novo simulado.");
                return;
            }
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            currentSimuladoNumber = 1;
            
            saveCurrentSessionState();
            
            updatePageTitle();
            document.getElementById('timer').textContent = formatTime(timeLeft);
            document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
            
            startTimer();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateSimuladoInfo();
            updateReforcoButton();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
            
            document.getElementById('motivation-message').innerHTML = '';
            document.getElementById('motivation-message').className = 'motivation-message';
            
            alert(`‚úÖ BANCO REINICIADO!\n\n${totalQuestions} quest√µes dispon√≠veis.\nBoa sorte!`);
        }
    }
    
    // ============================================
    // FUN√á√ÉO RESETQUIZ CORRIGIDA
    // ============================================
    
    function resetQuiz() {
        if (confirm('Reiniciar este simulado?')) {
            userAnswers = new Array(currentQuestions.length).fill(null);
            timeLeft = TIME_LIMIT;
            currentQuestionIndex = 0;
            
            // Volta para o modo de simulado ativo
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            // Limpa o conte√∫do das quest√µes (remove o gabarito)
            document.getElementById('quiz-content').innerHTML = '';
            
            saveCurrentSessionState();
            
            startTimer();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
        }
    }
    
    // ============================================
    // FUN√á√ÉO STARTNEWQUIZ CORRIGIDA
    // ============================================
    
    function startNewQuiz() {
        // RESETA A INTERFACE
        document.getElementById('results').style.display = 'none';
        document.getElementById('finish-btn').style.display = 'block';
        document.getElementById('restart-btn').style.display = 'none';
        document.getElementById('voltar-inicio-btn').style.display = 'none';
        document.getElementById('continuar-banco-btn').style.display = 'none';
        document.getElementById('wrong-questions-btn').style.display = 'none';
        document.getElementById('reiniciar-banco-btn').style.display = 'none';
        document.getElementById('new-simulado-btn').style.display = 'none';
        document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
        document.querySelector('.nav-buttons').style.display = 'flex';
        
        // Limpa o conte√∫do das quest√µes
        document.getElementById('quiz-content').innerHTML = '';
        
        // Usa as MESMAS quest√µes
        userAnswers = new Array(currentQuestions.length).fill(null);
        timeLeft = TIME_LIMIT;
        currentQuestionIndex = 0;
        
        saveCurrentSessionState();
        
        startTimer();
        renderCurrentQuestion();
        updateCounters();
        updateNavButtons();
        updateFinishButton();
        updatePendingQuestions();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
    }
    
    // ============================================
    // RESTANTE DAS FUN√á√ïES EXISTENTES
    // ============================================
    
    function loadWrongQuestionsHistory() {
        const saved = localStorage.getItem(WRONG_QUESTIONS_KEY);
        if (saved) {
            try {
                wrongQuestionsHistory = JSON.parse(saved);
                console.log(`Hist√≥rico de quest√µes erradas carregado: ${wrongQuestionsHistory.length} quest√µes`);
            } catch (e) {
                console.error('Erro ao carregar hist√≥rico de quest√µes erradas:', e);
                wrongQuestionsHistory = [];
            }
        } else {
            wrongQuestionsHistory = [];
            console.log('Nenhum hist√≥rico de quest√µes erradas encontrado');
        }
    }
    
    function saveWrongQuestionsHistory() {
        localStorage.setItem(WRONG_QUESTIONS_KEY, JSON.stringify(wrongQuestionsHistory));
    }
    
    function addWrongQuestionsToHistory() {
        if (!currentQuestions || currentQuestions.length === 0) return;
        
        currentQuestions.forEach((question, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer !== null && userAnswer === question.c;
            
            if (!isCorrect && question.originalIndex !== undefined) {
                if (!wrongQuestionsHistory.includes(question.originalIndex)) {
                    wrongQuestionsHistory.push(question.originalIndex);
                }
            }
        });
        
        wrongQuestionsHistory = [...new Set(wrongQuestionsHistory)];
        saveWrongQuestionsHistory();
        
        console.log(`Quest√µes erradas adicionadas ao hist√≥rico. Total: ${wrongQuestionsHistory.length}`);
    }
    
    function removeCorrectQuestionsFromHistory() {
        const initialCount = wrongQuestionsHistory.length;
        
        if (!currentQuestions || currentQuestions.length === 0) return;
        
        currentQuestions.forEach((question, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer !== null && userAnswer === question.c;
            
            if (isCorrect && question.originalIndex !== undefined) {
                const indexInHistory = wrongQuestionsHistory.indexOf(question.originalIndex);
                if (indexInHistory !== -1) {
                    wrongQuestionsHistory.splice(indexInHistory, 1);
                }
            }
        });
        
        saveWrongQuestionsHistory();
        
        console.log(`Quest√µes removidas do hist√≥rico de erradas: ${initialCount - wrongQuestionsHistory.length}`);
    }
    
    function allQuestionsUsed() {
        const totalQuestions = masterBank.length;
        const uniqueUsed = [...new Set(usedQuestionsHistory)];
        return uniqueUsed.length >= totalQuestions;
    }
    
    function hasEnoughWrongQuestionsForSimulado() {
        return wrongQuestionsHistory.length >= MIN_WRONG_QUESTIONS_FOR_SIMULADO;
    }
    
    function canOfferReforcoSimulado() {
        const condition1 = hasEnoughWrongQuestionsForSimulado();
        const condition2 = !currentQuestions[0]?.isWrongQuestion;
        const condition3 = !hasRecentOffer();
        
        return condition1 && condition2 && condition3;
    }
    
    function hasRecentOffer() {
        const lastOffer = localStorage.getItem(LAST_OFFER_KEY);
        if (!lastOffer) return false;
        
        const now = Date.now();
        const lastOfferTime = parseInt(lastOffer);
        const TWO_HOURS_MS = 2 * 60 * 60 * 1000;
        
        return (now - lastOfferTime) < TWO_HOURS_MS;
    }
    
    function saveOfferTimestamp() {
        localStorage.setItem(LAST_OFFER_KEY, Date.now().toString());
    }
    
    function generateWrongQuestionsSimulado() {
        console.log(`Gerando simulado de refor√ßo com ${wrongQuestionsHistory.length} quest√µes erradas...`);
        
        if (wrongQuestionsHistory.length === 0) {
            console.error('Nenhuma quest√£o errada no hist√≥rico');
            return [];
        }
        
        let availableWrongQuestions = [...wrongQuestionsHistory];
        availableWrongQuestions = shuffleArray(availableWrongQuestions);
        
        const selectedIndices = availableWrongQuestions;
        
        console.log(`Selecionadas ${selectedIndices.length} quest√µes para o simulado de refor√ßo`);
        
        const questions = selectedIndices.map(index => {
            if (index >= 0 && index < masterBank.length) {
                return {
                    ...masterBank[index],
                    originalIndex: index,
                    isWrongQuestion: true
                };
            }
            return null;
        }).filter(q => q !== null);
        
        return questions;
    }
    
    function offerWrongQuestionsSimulado() {
        if (!canOfferReforcoSimulado()) {
            console.log('N√£o pode oferecer simulado de refor√ßo no momento');
            updateReforcoButton();
            return false;
        }
        
        const wrongCount = wrongQuestionsHistory.length;
        
        let title = "üéØ TEMPO DE REFOR√áO";
        let message = `Identificamos ${wrongCount} quest√µes que voc√™ errou.\n\n`;
        message += `‚ö° SIMULADO DE REFOR√áO DISPON√çVEL\n`;
        message += `Deseja focar nessas ${wrongCount} quest√µes?\n\n`;
        message += `‚úÖ Benef√≠cios:\n`;
        message += `‚Ä¢ Foco nas suas dificuldades\n`;
        message += `‚Ä¢ Refor√ßo da mem√≥ria\n`;
        message += `‚Ä¢ Maior taxa de acerto`;
        
        const userWantsReforco = confirm(`${title}\n\n${message}`);
        
        saveOfferTimestamp();
        
        if (userWantsReforco) {
            console.log('Usu√°rio aceitou simulado de refor√ßo');
            startWrongQuestionsSimulado();
            return true;
        } else {
            console.log('Usu√°rio recusou simulado de refor√ßo');
            updateReforcoButton();
            return false;
        }
    }
    
    function isNewSession() {
        const sessionId = sessionStorage.getItem(SESSION_ID_KEY);
        const simuladoStarted = sessionStorage.getItem(SIMULADO_STARTED_KEY);
        
        if (!sessionId || !simuladoStarted) {
            const newSessionId = 'session_' + Date.now();
            sessionStorage.setItem(SESSION_ID_KEY, newSessionId);
            sessionStorage.setItem(SIMULADO_STARTED_KEY, 'true');
            return true;
        }
        return false;
    }
    
    function clearSessionData() {
        sessionStorage.removeItem(CURRENT_QUESTIONS_KEY);
        sessionStorage.removeItem(CURRENT_QUESTION_INDEX_KEY);
        sessionStorage.removeItem(USER_ANSWERS_KEY);
        sessionStorage.removeItem(TIME_LEFT_KEY);
        sessionStorage.removeItem(AUTO_NAV_KEY);
        sessionStorage.removeItem(SIMULADO_STARTED_KEY);
        sessionStorage.removeItem(CURRENT_SIMULADO_NUMBER_KEY);
    }
    
    function saveCurrentSessionState() {
        try {
            sessionStorage.setItem(CURRENT_QUESTIONS_KEY, JSON.stringify(currentQuestions));
            sessionStorage.setItem(CURRENT_QUESTION_INDEX_KEY, currentQuestionIndex.toString());
            sessionStorage.setItem(USER_ANSWERS_KEY, JSON.stringify(userAnswers));
            sessionStorage.setItem(TIME_LEFT_KEY, timeLeft.toString());
            sessionStorage.setItem(AUTO_NAV_KEY, autoNavEnabled.toString());
            sessionStorage.setItem(SIMULADO_STARTED_KEY, 'true');
            sessionStorage.setItem(CURRENT_SIMULADO_NUMBER_KEY, currentSimuladoNumber.toString());
        } catch (e) {
            console.error('Erro ao salvar estado da sess√£o:', e);
        }
    }
    
    function loadCurrentSessionState() {
        try {
            const savedQuestions = sessionStorage.getItem(CURRENT_QUESTIONS_KEY);
            const savedIndex = sessionStorage.getItem(CURRENT_QUESTION_INDEX_KEY);
            const savedAnswers = sessionStorage.getItem(USER_ANSWERS_KEY);
            const savedTime = sessionStorage.getItem(TIME_LEFT_KEY);
            const savedAutoNav = sessionStorage.getItem(AUTO_NAV_KEY);
            const savedSimuladoNumber = sessionStorage.getItem(CURRENT_SIMULADO_NUMBER_KEY);
            
            if (savedQuestions) currentQuestions = JSON.parse(savedQuestions);
            if (savedIndex) currentQuestionIndex = parseInt(savedIndex);
            if (savedAnswers) userAnswers = JSON.parse(savedAnswers);
            if (savedTime) timeLeft = parseInt(savedTime);
            if (savedAutoNav) autoNavEnabled = savedAutoNav === 'true';
            if (savedSimuladoNumber) currentSimuladoNumber = parseInt(savedSimuladoNumber);
            
            return {
                hasQuestions: !!savedQuestions,
                hasState: !!(savedQuestions && savedIndex !== null)
            };
        } catch (e) {
            console.error('Erro ao carregar estado da sess√£o:', e);
            return { hasQuestions: false, hasState: false };
        }
    }
    
    function generateQuizId() {
        const pageTitle = document.title || "Quiz";
        const cleanTitle = pageTitle
            .replace(/[^a-zA-Z0-9\s]/g, '')
            .replace(/\s+/g, '_')
            .toLowerCase()
            .substring(0, 30);
        const titleHash = pageTitle.length.toString(36);
        return `quiz_${cleanTitle}_${titleHash}`;
    }
    
    const QUIZ_ID = generateQuizId();
    const HISTORY_KEY = `${QUIZ_ID}_history`;
    const REPORTS_KEY = `${QUIZ_ID}_reports`;
    
    function updatePageTitle() {
        const totalQuestions = masterBank.length;
        let simuladoText = '';
        
        if (currentQuestions && currentQuestions[0]?.isWrongQuestion) {
            simuladoText = ' (‚ö° Refor√ßo)';
        } else if (totalSimulados > 1) {
            simuladoText = ` (Simulado ${currentSimuladoNumber}/${totalSimulados})`;
        }
        
        const pageTitle = document.title || "Quiz Simulado";
        let cleanTitle = pageTitle
            .replace(/^GMP\s*[-‚Äì‚Äî]\s*/i, '')
            .replace(/^Simulado\s*[-‚Äì‚Äî]\s*/i, '')
            .replace(/^Quiz\s*[-‚Äì‚Äî]\s*/i, '')
            .replace(/\s*[-‚Äì‚Äî]\s*Simulado$/i, '')
            .replace(/\s*[-‚Äì‚Äî]\s*Quiz$/i, '')
            .replace(/\s*[-‚Äì‚Äî]\s*Teste$/i, '')
            .trim();
        
        if (!cleanTitle) cleanTitle = pageTitle;
        if (cleanTitle.length > 40) cleanTitle = cleanTitle.substring(0, 37) + '...';
        
        const questionCount = currentQuestions ? currentQuestions.length : 0;
        document.getElementById('page-title').textContent = 
            `${cleanTitle}${simuladoText} (${questionCount}/${totalQuestions})`;
    }
    
    function calculateTimeLimit(questionsCount) {
        return questionsCount * 60;
    }
    
    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
    }
    
    function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }
    
    function showHistoryInfo() {
        const totalQuestions = masterBank.length;
        const usedCount = usedQuestionsHistory.length;
        const availableCount = Math.max(0, totalQuestions - usedCount);
        const percentUsed = totalQuestions > 0 ? Math.round((usedCount / totalQuestions) * 100) : 0;
        const wrongCount = wrongQuestionsHistory.length;
        
        let message = `üìä ESTAT√çSTICAS:\n\n`;
        message += `‚Ä¢ Total: ${totalQuestions} quest√µes\n`;
        message += `‚Ä¢ Usadas: ${usedCount} (${percentUsed}%)\n`;
        message += `‚Ä¢ Dispon√≠veis: ${availableCount}\n`;
        message += `‚Ä¢ Erradas: ${wrongCount}\n`;
        
        if (currentQuestions && currentQuestions[0]?.isWrongQuestion) {
            message += `\n‚ö° SIMULADO DE REFOR√áO ATIVO\n`;
        }
        
        if (wrongCount >= MIN_WRONG_QUESTIONS_FOR_SIMULADO) {
            message += `\n‚ö° SIMULADO DE REFOR√áO DISPON√çVEL\n`;
            message += `‚Ä¢ ${wrongCount} quest√µes para revisar\n`;
        }
        
        alert(message);
    }
    
    function updatePendingQuestions() {
        const pendingList = document.getElementById('pending-list');
        const pendingCount = document.getElementById('pending-count');
        const answeredCount = getAnsweredCount();
        const pending = currentQuestions ? currentQuestions.length - answeredCount : 0;
        
        if (pendingCount) pendingCount.textContent = pending;
        
        if (pending === 0) {
            if (pendingList) pendingList.innerHTML = '<span style="color: #28a745;">‚úÖ Todas</span>';
            return;
        }
        
        let html = '';
        let pendingNumbers = [];
        
        if (currentQuestions) {
            for (let i = 0; i < currentQuestions.length; i++) {
                if (userAnswers[i] === null) {
                    pendingNumbers.push(i + 1);
                }
            }
        }
        
        const maxToShow = 10;
        const numbersToShow = pendingNumbers.slice(0, maxToShow);
        
        numbersToShow.forEach(num => {
            html += `<span class="pending-number">${num}</span>`;
        });
        
        if (pendingNumbers.length > maxToShow) {
            html += `<span style="color: #6c757d; font-size: 0.55rem;"> +${pendingNumbers.length - maxToShow}</span>`;
        }
        
        if (pendingList) {
            pendingList.innerHTML = html || '<span style="color: #6c757d;">Nenhuma</span>';
        }
    }
    
    // ============================================
    // FUN√á√ÉO INITQUIZ ATUALIZADA
    // ============================================

    function initQuiz() {
        loadWrongQuestionsHistory();
        
        if (masterBank.length === 0) {
            document.getElementById('page-title').textContent = "‚ö†Ô∏è BANCO VAZIO";
            document.getElementById('quiz-content').innerHTML = `
                <div class="question-block-mini">
                    <div class="question-text-mini" style="color: var(--danger);">
                        ‚ö†Ô∏è ERRO: Banco de quest√µes vazio!
                    </div>
                </div>
            `;
            return;
        }
        
        const config = calcularConfiguracaoSimulados();
        console.log('Configura√ß√£o:', config.mensagem);
        totalSimulados = config.totalSimulados;
        QUESTIONS_PER_SIMULADO = config.questionsPerSimulado;
        
        const savedHistory = localStorage.getItem(HISTORY_KEY);
        if (savedHistory) {
            try {
                usedQuestionsHistory = JSON.parse(savedHistory);
            } catch (e) {
                console.error('Erro ao carregar hist√≥rico:', e);
                usedQuestionsHistory = [];
            }
        } else {
            usedQuestionsHistory = [];
        }
        
        // VERIFICA SE √â UMA NOVA SESS√ÉO OU UM REFRESH
        if (isNewSession()) {
            console.log('Nova sess√£o - gerando quest√µes');
            currentQuestions = selectRandomQuestions();
            
            if (currentQuestions.length === 0) {
                alert("N√£o foi poss√≠vel selecionar quest√µes.");
                return;
            }
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            
            saveCurrentSessionState();
        } else {
            console.log('Sess√£o existente - restaurando');
            const state = loadCurrentSessionState();
            
            if (state.hasQuestions && state.hasState) {
                console.log('Estado restaurado');
                if (timeLeft <= 0) {
                    TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
                    timeLeft = TIME_LIMIT;
                }
            } else {
                console.log('N√£o h√° estado - gerando novo');
                currentQuestions = selectRandomQuestions();
                if (currentQuestions.length === 0) {
                    alert("N√£o foi poss√≠vel gerar o simulado.");
                    return;
                }
                
                userAnswers = new Array(currentQuestions.length).fill(null);
                currentQuestionIndex = 0;
                TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
                timeLeft = TIME_LIMIT;
                autoNavEnabled = true;
                
                saveCurrentSessionState();
            }
        }
        
        updatePageTitle();
        document.getElementById('timer').textContent = formatTime(timeLeft);
        document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
        
        updateSimuladoInfo();
        startTimer();
        renderCurrentQuestion();
        updateCounters();
        updateNavButtons();
        updateFinishButton();
        updatePendingQuestions();
        updateReforcoButton();
        updateReiniciarBancoButton();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
    }
    
    // ============================================
    // FUN√á√ÉO UPDATESIMULADOINFO ATUALIZADA
    // ============================================

    function updateSimuladoInfo() {
        const totalQuestions = masterBank.length;
        const remaining = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        const recentUsed = usedQuestionsHistory.length;
        const percentUsed = totalQuestions > 0 ? Math.round((recentUsed / totalQuestions) * 100) : 0;
        
        // Se for simulado de refor√ßo
        if (currentQuestions && currentQuestions[0]?.isWrongQuestion) {
            const wrongCount = wrongQuestionsHistory.length;
            const successRate = Math.round(((totalQuestions - wrongCount) / totalQuestions) * 100);
            
            document.getElementById('simulado-info').innerHTML = `
                <div style="color: var(--danger); font-weight: bold; text-align: center;">‚ö° SIMULADO DE REFOR√áO</div>
                <div style="text-align: center; font-size: 0.6rem;">Quest√µes que voc√™ errou anteriormente</div>
                <div class="simulado-stats">
                    <span>Quest√µes: ${currentQuestions.length}</span>
                    <span>Acertos gerais: ${successRate}%</span>
                </div>
            `;
            document.getElementById('simulado-info').style.display = 'block';
            return;
        }
        
        // Info normal - MOSTRA SEMPRE O N√öMERO CORRETO DO SIMULADO
        let simuladoNumberText = '';
        if (totalSimulados > 1) {
            // Garante que mostra o n√∫mero correto baseado no hist√≥rico
            const simuladoAtual = Math.min(currentSimuladoNumber, totalSimulados);
            simuladoNumberText = ` (${simuladoAtual}/${totalSimulados})`;
        }
        
        document.getElementById('simulado-info').innerHTML = `
            <div>Simulado${simuladoNumberText}: <span id="questions-per-simulado">${currentQuestions ? currentQuestions.length : 0}</span> quest√µes</div>
            <div class="simulado-stats">
                <span id="remaining-questions">Dispon√≠veis: ${remaining}</span>
                <span id="recent-used">Usadas: ${recentUsed} (${percentUsed}%)</span>
            </div>
            
            <div class="history-controls">
                <button class="clear-history-btn" onclick="clearHistory()">üóëÔ∏è Limpar Hist√≥rico</button>
                <button class="info-history-btn" onclick="showHistoryInfo()">‚ÑπÔ∏è Info</button>
            </div>
        `;
        document.getElementById('simulado-info').style.display = 'block';
    }
    
    function renderCurrentQuestion() {
        const container = document.getElementById('quiz-content');
        
        if (!currentQuestions || currentQuestions.length === 0) {
            container.innerHTML = '<div class="question-block-mini">Erro: Nenhuma quest√£o carregada.</div>';
            return;
        }
        
        const question = currentQuestions[currentQuestionIndex];
        
        container.innerHTML = `
            <div class="question-block-mini">
                <div class="question-text-mini">
                    ${currentQuestionIndex + 1}. ${question.q}
                </div>
                <div class="options-mini">
                    ${question.a.map((opt, i) => `
                        <label class="option-mini" id="option-${i}">
                            <input type="radio" name="currentQuestion" value="${i}" 
                                   ${userAnswers[currentQuestionIndex] === i ? 'checked' : ''}
                                   onchange="selectAnswer(${i})">
                            ${opt}
                        </label>
                    `).join('')}
                </div>
                <button class="report-btn" onclick="openReportModal(${currentQuestionIndex})">
                    <span>‚ö†Ô∏è</span> Reportar Problema
                </button>
            </div>
        `;
    }
    
    function selectAnswer(answerIndex) {
        userAnswers[currentQuestionIndex] = answerIndex;
        saveCurrentSessionState();
        
        updateCounters();
        updateFinishButton();
        updatePendingQuestions();
        
        if (autoNavEnabled && currentQuestionIndex < currentQuestions.length - 1) {
            setTimeout(() => {
                nextQuestion();
            }, 200);
        }
    }
    
    function toggleAutoNav() {
        autoNavEnabled = !autoNavEnabled;
        document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
        saveCurrentSessionState();
    }
    
    function getAnsweredCount() {
        return userAnswers.filter(answer => answer !== null).length;
    }
    
    function updateFinishButton() {
        const finishBtn = document.getElementById('finish-btn');
        const answeredCount = getAnsweredCount();
        const allAnswered = currentQuestions && answeredCount === currentQuestions.length;
        
        finishBtn.disabled = !allAnswered;
        finishBtn.innerHTML = allAnswered ? 'üèÅ Finalizar' : `‚ùå Faltam ${currentQuestions ? currentQuestions.length - answeredCount : 0}`;
    }
    
    function updateNavButtons() {
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        
        prevBtn.disabled = currentQuestionIndex === 0;
        nextBtn.disabled = currentQuestions ? currentQuestionIndex === currentQuestions.length - 1 : true;
        nextBtn.innerHTML = currentQuestions && currentQuestionIndex === currentQuestions.length - 1 ? '√öltima' : 'Pr√≥ximo ‚Üí';
    }
    
    function updateCounters() {
        const answeredCount = getAnsweredCount();
        const totalQuestions = currentQuestions ? currentQuestions.length : 0;
        
        document.getElementById('question-counter').textContent = `${currentQuestionIndex + 1}/${totalQuestions}`;
        document.getElementById('answered-counter').textContent = `${answeredCount}/${totalQuestions}`;
        document.getElementById('progress-percent').textContent = `${totalQuestions > 0 ? Math.round((answeredCount / totalQuestions) * 100) : 0}%`;
        document.getElementById('status-count').textContent = `${answeredCount}/${totalQuestions}`;
        
        updateTimerDisplay();
    }
    
    function updateTimerDisplay() {
        const timerElement = document.getElementById('timer');
        timerElement.textContent = formatTime(timeLeft);
        
        if (timeLeft <= Math.min(300, Math.floor(TIME_LIMIT * 0.25))) {
            timerElement.classList.add('timer-warning');
        } else {
            timerElement.classList.remove('timer-warning');
        }
    }
    
    function startTimer() {
        clearInterval(timerId);
        
        timerId = setInterval(() => {
            timeLeft--;
            
            if (timeLeft % 5 === 0) {
                saveCurrentSessionState();
            }
            
            updateTimerDisplay();
            
            if (timeLeft <= 0) {
                clearInterval(timerId);
                if (getAnsweredCount() === currentQuestions.length) {
                    finalizeQuiz();
                } else {
                    if (confirm('Tempo esgotado! Finalizar?')) {
                        finalizeQuiz();
                    }
                }
            }
        }, 1000);
    }
    
    function nextQuestion() {
        if (currentQuestions && currentQuestionIndex < currentQuestions.length - 1) {
            currentQuestionIndex++;
            saveCurrentSessionState();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
        }
    }
    
    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            saveCurrentSessionState();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
        }
    }
    
    // ============================================
    // FUN√á√ÉO FINALIZEQUIZ ATUALIZADA COM NOVO BOT√ÉO
    // ============================================
    
    function finalizeQuiz() {
        clearInterval(timerId);
        
        const answeredCount = getAnsweredCount();
        if (answeredCount !== currentQuestions.length && !confirm(`Respondidas: ${answeredCount}/${currentQuestions.length}. Finalizar?`)) {
            startTimer();
            return;
        }
        
        let finalScore = 0;
        userAnswers.forEach((answer, index) => {
            if (answer !== null && answer === currentQuestions[index].c) {
                finalScore++;
            }
        });
        
        const percent = currentQuestions.length > 0 ? Math.round((finalScore / currentQuestions.length) * 100) : 0;
        const feedback = document.getElementById('feedback-msg');
        
        if (percent >= 70) {
            feedback.textContent = "üéâ Excelente!";
            feedback.style.color = "var(--success)";
        } else if (percent >= 50) {
            feedback.textContent = "üëç Quase l√°!";
            feedback.style.color = "var(--accent)";
        } else {
            feedback.textContent = "üí™ Continue!";
            feedback.style.color = "var(--danger)";
        }
        
        if (currentQuestions[0]?.isWrongQuestion) {
            removeCorrectQuestionsFromHistory();
        } else {
            addWrongQuestionsToHistory();
        }
        
        if (currentSimuladoIndices.length > 0 && !currentQuestions[0]?.isWrongQuestion) {
            usedQuestionsHistory.push(...currentSimuladoIndices);
            usedQuestionsHistory = [...new Set(usedQuestionsHistory)];
            localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
        }
        
        clearSessionData();
        
        let quizHTML = '';
        currentQuestions.forEach((question, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer === question.c;
            
            quizHTML += `
                <div class="question-block-mini">
                    <button class="report-gabarito-btn" onclick="openReportModal(${index})" title="Reportar problema">
                        ‚ö†Ô∏è
                    </button>
                    
                    <div class="question-text-mini">
                        ${index + 1}. ${question.q}
                    </div>
                    <div class="options-mini">
                        ${question.a.map((opt, i) => {
                            let classes = 'option-mini';
                            if (i === question.c) classes += ' correct-answer';
                            else if (userAnswer === i && !isCorrect) classes += ' wrong-answer';
                            
                            return `<label class="${classes}">
                                <input type="radio" disabled ${userAnswer === i ? 'checked' : ''}>
                                ${opt}
                                ${userAnswer === i ? '<span style="margin-left: auto; font-size: 0.6rem; color: #6c757d;">(sua resposta)</span>' : ''}
                                ${i === question.c && userAnswer !== i ? '<span style="margin-left: auto; font-size: 0.6rem; color: var(--success);">(correta)</span>' : ''}
                            </label>`;
                        }).join('')}
                    </div>
                </div>
            `;
        });
        
        document.getElementById('quiz-content').innerHTML = quizHTML;
        document.getElementById('final-score').textContent = `${finalScore}/${currentQuestions.length}`;
        document.getElementById('final-percent').textContent = `${percent}%`;
        
        const motivationElement = document.getElementById('motivation-message');
        let motivationHTML = '';
        
        if (currentQuestions[0]?.isWrongQuestion) {
            if (percent >= MIN_PERCENT_FOR_SUCCESS) {
                motivationHTML = `‚úÖ <strong>PARAB√âNS!</strong> Voc√™ superou suas dificuldades!`;
                motivationElement.className = 'motivation-message motivation-success';
            } else {
                motivationHTML = `‚ö° <strong>PRECISA MELHORAR</strong><br>`;
                motivationHTML += `Voc√™ acertou ${finalScore} de ${currentQuestions.length}.<br>`;
                motivationHTML += `Faltam ${MIN_PERCENT_FOR_SUCCESS - percent}% para a meta de ${MIN_PERCENT_FOR_SUCCESS}%.`;
                motivationElement.className = 'motivation-message motivation-warning';
            }
        } else {
            if (percent >= MIN_PERCENT_FOR_SUCCESS) {
                motivationHTML = `üéØ <strong>√ìTIMO DESEMPENHO!</strong>`;
                motivationElement.className = 'motivation-message motivation-success';
            } else {
                motivationHTML = `üìö <strong>CONTINUE ESTUDANDO!</strong>`;
                motivationElement.className = 'motivation-message motivation-warning';
            }
        }
        
        motivationElement.innerHTML = motivationHTML;
        
        const totalQuestions = masterBank.length;
        const remainingQuestions = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        const wrongCount = wrongQuestionsHistory.length;
        
        let summaryText = '';
        let showNewSimuladoBtn = true;
        let showReiniciarBancoBtn = false;
        let showNovoSimuladoReforcoBtn = false;
        
        if (currentQuestions[0]?.isWrongQuestion) {
            summaryText = `‚ö° <strong>SIMULADO DE REFOR√áO FINALIZADO</strong><br>`;
            summaryText += `Voc√™ revisou ${currentQuestions.length} quest√µes que errou anteriormente.<br>`;
            summaryText += `Quest√µes ainda erradas: <strong>${wrongCount}</strong>`;
            showNewSimuladoBtn = false;
            showNovoSimuladoReforcoBtn = true;
            
            if (percent < MIN_PERCENT_FOR_SUCCESS) {
                showReiniciarBancoBtn = true;
            }
        } else if (remainingQuestions === 0) {
            summaryText = `üéØ <strong>COMPLETOU TODAS AS ${totalQuestions} QUEST√ïES!</strong><br>`;
            summaryText += `Quest√µes erradas: <strong>${wrongCount}</strong>`;
            
            if (wrongCount < MIN_WRONG_QUESTIONS_FOR_SIMULADO) {
                showNewSimuladoBtn = false;
            }
        } else {
            summaryText = `Restam: <strong>${remainingQuestions}</strong> | Usadas: <strong>${usedQuestionsHistory.length}</strong><br>`;
            summaryText += `Quest√µes erradas: <strong>${wrongCount}</strong>`;
        }
        
        document.getElementById('simulado-summary').innerHTML = summaryText;
        
        document.querySelector('.nav-buttons').style.display = 'none';
        document.getElementById('results').style.display = 'block';
        document.getElementById('finish-btn').style.display = 'none';
        document.getElementById('restart-btn').style.display = 'block';
        
        document.getElementById('wrong-questions-btn').style.display = 'none';
        document.getElementById('reiniciar-banco-btn').style.display = showReiniciarBancoBtn ? 'block' : 'none';
        document.getElementById('new-simulado-btn').style.display = showNewSimuladoBtn ? 'block' : 'none';
        document.getElementById('novo-simulado-reforco-btn').style.display = showNovoSimuladoReforcoBtn ? 'block' : 'none';
        
        updateSimuladoInfo();
        updateReforcoButton();
        updateReiniciarBancoButton();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
        
        setTimeout(() => {
            if (canOfferReforcoSimulado()) {
                console.log('Oferecendo simulado de refor√ßo...');
                setTimeout(() => {
                    offerWrongQuestionsSimulado();
                }, 1500);
            } else {
                console.log('N√£o pode oferecer refor√ßo no momento');
            }
        }, 500);
    }
    
    // ============================================
    // SISTEMA DE REPORTE - CORRIGIDO
    // ============================================
    
    function initReportSystem() {
        const savedReports = localStorage.getItem(REPORTS_KEY);
        if (savedReports) {
            reportsHistory = JSON.parse(savedReports);
        } else {
            reportsHistory = [];
        }
        
        // CORRE√á√ÉO: Adiciona os event listeners diretamente
        document.getElementById('cancelReport').addEventListener('click', closeReportModal);
        document.getElementById('submitReport').addEventListener('click', submitReport);
        
        document.getElementById('reportModal').addEventListener('click', function(e) {
            if (e.target.id === 'reportModal') {
                closeReportModal();
            }
        });
        
        const reportDetails = document.getElementById('reportDetails');
        const charCount = document.getElementById('charCount');
        
        if (reportDetails && charCount) {
            reportDetails.addEventListener('input', function() {
                charCount.textContent = this.value.length;
                if (this.value.length > 1000) {
                    this.value = this.value.substring(0, 1000);
                    charCount.textContent = 1000;
                }
            });
        }
        
        const inputs = document.querySelectorAll('.form-input');
        inputs.forEach(input => {
            input.addEventListener('input', function() {
                if (this.classList.contains('error')) {
                    this.classList.remove('error');
                    hideError();
                }
            });
        });
    }
    
    function openReportModal(questionIndex) {
        currentReportQuestionIndex = questionIndex;
        
        if (!currentQuestions || currentQuestions.length === 0) {
            alert("N√£o h√° quest√µes carregadas.");
            return;
        }
        
        const question = currentQuestions[questionIndex];
        
        document.getElementById('reportQuestionNumber').textContent = questionIndex + 1;
        
        let questionText = question.q;
        if (questionText.length > 150) {
            questionText = questionText.substring(0, 147) + '...';
        }
        document.getElementById('reportQuestionText').textContent = questionText;
        
        document.querySelectorAll('input[name="reportType"]').forEach(radio => {
            radio.checked = false;
        });
        document.getElementById('reportDetails').value = '';
        document.getElementById('userName').value = '';
        document.getElementById('userEmail').value = '';
        document.getElementById('userInfo').value = '';
        document.getElementById('charCount').textContent = '0';
        document.getElementById('reportSuccess').style.display = 'none';
        document.getElementById('reportErrorMsg').style.display = 'none';
        
        document.getElementById('submitReport').disabled = false;
        document.getElementById('submitText').textContent = 'Enviar Reporte';
        document.getElementById('submitLoading').style.display = 'none';
        
        document.getElementById('reportModal').style.display = 'flex';
        
        setTimeout(() => {
            document.getElementById('userName').focus();
        }, 100);
    }
    
    function closeReportModal() {
        document.getElementById('reportModal').style.display = 'none';
        currentReportQuestionIndex = null;
    }
    
    function showError(message) {
        const errorElement = document.getElementById('reportErrorMsg');
        errorElement.textContent = message;
        errorElement.style.display = 'block';
        errorElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
    
    function hideError() {
        document.getElementById('reportErrorMsg').style.display = 'none';
    }
    
    function validateForm() {
        const name = document.getElementById('userName').value.trim();
        const email = document.getElementById('userEmail').value.trim();
        const reportType = document.querySelector('input[name="reportType"]:checked');
        
        if (!name) {
            document.getElementById('userName').classList.add('error');
            showError('Por favor, preencha seu nome completo.');
            return false;
        }
        
        if (!email) {
            document.getElementById('userEmail').classList.add('error');
            showError('Por favor, preencha seu e-mail.');
            return false;
        }
        
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            document.getElementById('userEmail').classList.add('error');
            showError('Por favor, insira um e-mail v√°lido.');
            return false;
        }
        
        if (!reportType) {
            showError('Por favor, selecione o tipo de problema.');
            return false;
        }
        
        return true;
    }
    
    async function submitReport() {
        if (!validateForm()) {
            return;
        }
        
        const questionIndex = currentReportQuestionIndex;
        const question = currentQuestions[questionIndex];
        
        const reportData = {
            quizId: QUIZ_ID,
            materia: document.title || "Quiz",
            questionIndex: questionIndex + 1,
            originalIndex: question.originalIndex,
            questionText: question.q,
            reportType: document.querySelector('input[name="reportType"]:checked').value,
            reportLabel: REPORT_TYPES[document.querySelector('input[name="reportType"]:checked').value],
            details: document.getElementById('reportDetails').value.trim(),
            userName: document.getElementById('userName').value.trim(),
            userEmail: document.getElementById('userEmail').value.trim(),
            userInfo: document.getElementById('userInfo').value.trim(),
            userAnswer: userAnswers[questionIndex] !== null ? 
                question.a[userAnswers[questionIndex]] : 'N√£o respondida',
            correctAnswer: question.a[question.c],
            userAnswerIndex: userAnswers[questionIndex],
            correctAnswerIndex: question.c,
            timestamp: new Date().toLocaleString('pt-BR'),
            url: window.location.href,
            userAgent: navigator.userAgent
        };
        
        document.getElementById('submitReport').disabled = true;
        document.getElementById('submitText').textContent = 'Enviando...';
        document.getElementById('submitLoading').style.display = 'inline-block';
        
        try {
            const response = await sendToGoogleSheets(reportData);
            
            if (response.success) {
                const report = {
                    ...reportData,
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    sentToGoogleSheets: true
                };
                
                reportsHistory.push(report);
                localStorage.setItem(REPORTS_KEY, JSON.stringify(reportsHistory));
                
                document.getElementById('reportSuccess').style.display = 'block';
                document.getElementById('submitText').textContent = 'Enviado!';
                
                setTimeout(() => {
                    closeReportModal();
                }, 3000);
            } else {
                throw new Error(response.message || 'Erro ao enviar');
            }
        } catch (error) {
            console.error('Erro ao enviar reporte:', error);
            
            const emailSent = sendReportByEmailFallback(reportData);
            
            if (emailSent) {
                const report = {
                    ...reportData,
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    sentByEmail: true
                };
                
                reportsHistory.push(report);
                localStorage.setItem(REPORTS_KEY, JSON.stringify(reportsHistory));
                
                document.getElementById('reportSuccess').innerHTML = 
                    '‚úÖ Reporte enviado por email! Obrigado pela contribui√ß√£o.<br>' +
                    '<small>Voc√™ receber√° um feedback por email em breve.</small>';
                document.getElementById('reportSuccess').style.display = 'block';
                document.getElementById('submitText').textContent = 'Enviado!';
                
                setTimeout(() => {
                    closeReportModal();
                }, 3000);
            } else {
                const report = {
                    ...reportData,
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    savedLocally: true
                };
                
                reportsHistory.push(report);
                localStorage.setItem(REPORTS_KEY, JSON.stringify(reportsHistory));
                
                showError('Erro de conex√£o. Reporte salvo localmente. Tente novamente mais tarde.');
                document.getElementById('submitReport').disabled = false;
                document.getElementById('submitText').textContent = 'Enviar Reporte';
                document.getElementById('submitLoading').style.display = 'none';
            }
        }
    }
    
    async function sendToGoogleSheets(reportData) {
        const formData = new FormData();
        
        Object.keys(reportData).forEach(key => {
            formData.append(key, reportData[key]);
        });
        
        const response = await fetch(API_URL, {
            method: 'POST',
            body: formData,
            mode: 'no-cors'
        });
        
        return { success: true, message: 'Enviado com sucesso' };
    }
    
    function sendReportByEmailFallback(reportData) {
        try {
            const subject = `[REPORTE] ${reportData.materia} - Quest√£o #${reportData.questionIndex}`;
            
            let body = `NOVO REPORTE DE QUEST√ÉO\n`;
            body += `=======================\n\n`;
            body += `MAT√âRIA: ${reportData.materia}\n`;
            body += `ID DO QUIZ: ${reportData.quizId}\n`;
            body += `QUEST√ÉO #${reportData.questionIndex}\n`;
            body += `√çNDICE ORIGINAL: ${reportData.originalIndex}\n\n`;
            body += `ENUNCIADO:\n${reportData.questionText}\n\n`;
            body += `TIPO DE PROBLEMA: ${reportData.reportLabel}\n\n`;
            body += `RESPOSTA DO USU√ÅRIO: ${reportData.userAnswer}\n`;
            body += `RESPOSTA CORRETA: ${reportData.correctAnswer}\n\n`;
            
            body += `INFORMA√á√ïES DO USU√ÅRIO:\n`;
            body += `Nome: ${reportData.userName}\n`;
            body += `E-mail: ${reportData.userEmail}\n`;
            body += `Institui√ß√£o/Curso: ${reportData.userInfo || 'N√£o informado'}\n\n`;
            
            if (reportData.details) {
                body += `DETALHES ADICIONAIS:\n${reportData.details}\n\n`;
            }
            
            body += `DATA/HORA: ${reportData.timestamp}\n`;
            body += `URL DA P√ÅGINA: ${reportData.url}\n`;
            
            const encodedSubject = encodeURIComponent(subject);
            const encodedBody = encodeURIComponent(body);
            
            const mailtoLink = `mailto:${EMAIL_DESTINO}?subject=${encodedSubject}&body=${encodedBody}`;
            
            window.open(mailtoLink, '_blank');
            return true;
        } catch (error) {
            console.error('Erro ao enviar email:', error);
            return false;
        }
    }
    
    // ============================================
    // INICIALIZA√á√ÉO
    // ============================================
    
    function hasUnsavedProgress() {
        const answeredCount = getAnsweredCount();
        return answeredCount > 0 && answeredCount < currentQuestions.length;
    }
    
    function showCloseWarning(event) {
        if (hasUnsavedProgress()) {
            const message = '‚ö†Ô∏è ATEN√á√ÉO!\n\nVoc√™ tem um simulado em andamento.\nSe sair agora, todo o seu progresso ser√° perdido!\n\nTem certeza que deseja sair?';
            
            if (event) {
                event.preventDefault();
                event.returnValue = message;
            }
            
            return message;
        }
    }
    
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === ' ') nextQuestion();
        if (e.key === 'ArrowLeft') prevQuestion();
    });
    
    window.addEventListener('beforeunload', function(event) {
        if (hasUnsavedProgress()) {
            try {
                saveCurrentSessionState();
            } catch (e) {
                console.error('Erro ao salvar estado antes de sair:', e);
            }
            
            return showCloseWarning(event);
        }
    });
    
    window.onload = function() {
        initQuiz();
        initReportSystem();
    };
</script>

</body>
</html>
