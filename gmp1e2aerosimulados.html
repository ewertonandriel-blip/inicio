<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GMP 1/2 - AEROSIMULADOS</title>
    <style>
        :root {
            --primary: #1a3a5a;
            --accent: #007bff;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --purple: #6f42c1;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 4px;
            font-size: 13px;
            line-height: 1.3;
        }

        .container {
            max-width: 100%;
            background: white;
            padding: 6px;
            border-radius: 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            position: relative;
            margin: 0 auto;
        }

        .credits-integrated {
            position: absolute;
            top: 2px;
            right: 6px;
            background: var(--primary);
            color: white;
            padding: 1px 3px;
            font-size: 0.5rem;
            font-weight: bold;
            border-radius: 1px;
            z-index: 10;
        }

        /* CABE√áALHO SUPER COMPACTO */
        .header-mini {
            position: sticky;
            top: 0;
            background: white;
            padding-bottom: 4px;
            border-bottom: 1px solid var(--primary);
            z-index: 5;
            margin-bottom: 6px;
            padding-top: 16px;
        }

        .header-mini-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
        }

        .page-title-mini {
            margin: 0;
            color: var(--primary);
            font-size: 0.85rem;
            font-weight: bold;
            line-height: 1.1;
            max-width: 65%;
        }

        .timer-compact {
            background: #f8f9fa;
            color: var(--primary);
            padding: 2px 4px;
            border-radius: 2px;
            font-size: 0.75rem;
            font-weight: bold;
            border: 1px solid #dee2e6;
            min-width: 40px;
            text-align: center;
        }

        .timer-warning {
            background: #fff5f5 !important;
            color: var(--danger) !important;
            border-color: var(--danger) !important;
        }

        /* INFO DO SIMULADO MAIS COMPACTA */
        .simulado-info {
            background: #e7f3ff;
            border: 1px solid var(--accent);
            border-radius: 3px;
            padding: 4px 5px;
            margin-bottom: 5px;
            font-size: 0.65rem;
            color: var(--primary);
            display: none;
        }

        .simulado-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 2px;
            font-weight: 600;
        }

        /* CONTROLES DE HIST√ìRICO COMPACTOS */
        .history-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4px;
            margin-top: 4px;
        }

        .history-controls button {
            padding: 2px 4px;
            font-size: 0.6rem;
            border-radius: 2px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
        }

        .clear-history-btn {
            background: var(--warning);
            color: #856404;
            border: 1px solid #ffc107;
        }

        .info-history-btn {
            background: #6c757d;
            color: white;
        }

        /* INFO B√ÅSICA SUPER COMPACTA */
        .quiz-info-mini {
            background: #f8f9fa;
            border-radius: 3px;
            padding: 5px 6px;
            border: 1px solid #dee2e6;
            margin-bottom: 4px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 4px;
            margin-bottom: 4px;
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 0.55rem;
            color: #6c757d;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 0;
        }

        .info-value {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--primary);
        }

        /* CONTROLES COMPACTOS */
        .controls-compact {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 4px;
        }

        .auto-nav-toggle {
            display: flex;
            align-items: center;
            gap: 3px;
            padding: 2px 4px;
            background: #e9ecef;
            border-radius: 2px;
            cursor: pointer;
            font-size: 0.65rem;
        }

        .auto-nav-checkbox {
            transform: scale(0.8);
            accent-color: var(--primary);
        }

        .auto-nav-label {
            font-weight: 600;
            color: var(--primary);
            white-space: nowrap;
        }

        .reset-btn-mini {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 2px;
            padding: 2px 4px;
            font-size: 0.65rem;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
        }

        /* STATUS COMPACTO */
        .completion-status {
            background: #f8f9fa;
            border-radius: 3px;
            padding: 4px 5px;
            margin: 5px 0;
            border: 1px solid #dee2e6;
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2px;
        }

        .status-text {
            font-size: 0.65rem;
            font-weight: 600;
        }

        .status-count {
            font-size: 0.65rem;
            font-weight: bold;
            color: var(--primary);
        }

        /* PENDENTES SUPER COMPACTOS */
        .pending-compact {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 2px;
            padding: 2px 3px;
            font-size: 0.6rem;
        }

        .pending-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1px;
        }

        .pending-count {
            font-weight: bold;
            color: #856404;
            font-size: 0.65rem;
        }

        .pending-list-compact {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            max-height: 18px;
            overflow-y: auto;
            padding: 1px 0;
        }

        .pending-number {
            background: #ffc107;
            color: #856404;
            font-weight: bold;
            padding: 0 2px;
            border-radius: 1px;
            font-size: 0.55rem;
            min-width: 12px;
            text-align: center;
            line-height: 1.2;
        }

        .pending-number.answered {
            background: #28a745;
            color: white;
            opacity: 0.5;
        }

        /* QUEST√ïES COMPACTAS */
        .question-block-mini {
            margin: 6px 0;
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: 3px;
            background: #fff;
            position: relative;
        }

        .question-text-mini {
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 6px;
            color: var(--primary);
            line-height: 1.2;
        }

        .options-mini {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .option-mini {
            padding: 5px 6px;
            border: 1px solid #eee;
            border-radius: 2px;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 0.75rem;
            min-height: 28px;
            position: relative;
        }

        input[type="radio"] {
            margin-right: 4px;
            transform: scale(0.8);
            accent-color: var(--primary);
        }

        .correct-answer {
            background-color: #d4edda !important;
            border-color: #28a745 !important;
            color: #155724;
        }

        .wrong-answer {
            background-color: #f8d7da !important;
            border-color: #dc3545 !important;
            color: #721c24;
        }

        /* BOT√ÉO DE REPORTAR NAS QUEST√ïES */
        .report-btn {
            background: transparent;
            color: #6c757d;
            border: 1px solid #dee2e6;
            border-radius: 2px;
            padding: 2px 6px;
            font-size: 0.55rem;
            cursor: pointer;
            margin-top: 4px;
            display: flex;
            align-items: center;
            gap: 3px;
            transition: all 0.2s;
        }

        .report-btn:hover {
            background: #f8f9fa;
            color: var(--danger);
            border-color: var(--danger);
        }

        /* BOT√ÉO DE REPORTAR NO GABARITO (canto superior direito) */
        .report-gabarito-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: transparent;
            color: #6c757d;
            border: 1px solid #dee2e6;
            border-radius: 2px;
            padding: 1px 4px;
            font-size: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 2px;
            transition: all 0.2s;
            z-index: 2;
        }

        .report-gabarito-btn:hover {
            background: #f8f9fa;
            color: var(--danger);
            border-color: var(--danger);
        }

        /* BOT√ïES DE NAVEGA√á√ÉO COMPACTOS */
        .nav-buttons {
            display: flex;
            gap: 4px;
            margin: 8px 0;
        }

        .nav-btn {
            flex: 1;
            padding: 6px 4px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 2px;
            font-weight: 600;
            font-size: 0.75rem;
            cursor: pointer;
            text-align: center;
            min-height: 32px;
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            opacity: 0.5;
        }

        /* BOT√ïES PRINCIPAIS COMPACTOS */
        .btn {
            padding: 8px;
            font-size: 0.8rem;
            font-weight: bold;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            width: 100%;
            margin-top: 8px;
            min-height: 36px;
        }

        .btn-finish {
            background: var(--primary);
            color: white;
        }

        .btn-finish:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .btn-restart {
            background: var(--success);
            color: white;
            display: none;
        }

        .btn-restart-success {
            background: linear-gradient(135deg, var(--success), #1e7e34);
            color: white;
            display: none;
        }

        /* BOT√ÉO VOLTAR AO IN√çCIO */
        .btn-voltar-inicio {
            background: linear-gradient(135deg, var(--accent), #0056b3);
            color: white;
            border: none;
            display: none;
        }

        /* BOT√ÉO CONTINUAR BANCO */
        .btn-continuar-banco {
            background: linear-gradient(135deg, var(--info), #138496);
            color: white;
            border: none;
            display: none;
        }

        /* BOT√ÉO DE SIMULADO DE REFOR√áO */
        .btn-reforco {
            background: linear-gradient(135deg, var(--danger), #c82333);
            color: white;
            border: none;
            display: none;
        }

        /* BOT√ÉO DE REINICIAR BANCO */
        .btn-reiniciar-banco {
            background: linear-gradient(135deg, var(--purple), #5a32a3);
            color: white;
            border: none;
            display: none;
        }

        /* BOT√ÉO DE NOVO SIMULADO NO REFOR√áO */
        .btn-novo-simulado-reforco {
            background: linear-gradient(135deg, var(--warning), #e0a800);
            color: #856404;
            border: none;
            display: none;
        }

        /* RESULTADOS COMPACTOS */
        #results {
            display: none;
            padding: 10px;
            text-align: center;
            border: 1px solid var(--primary);
            margin: 8px 0;
            border-radius: 3px;
            background: #f8f9fa;
        }

        .result-title {
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 4px;
            color: var(--primary);
        }

        .score-mini {
            font-size: 1.1rem;
            margin: 4px 0;
            font-weight: 800;
            color: var(--primary);
        }

        /* MENSAGEM DE MOTIVA√á√ÉO */
        .motivation-message {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 3px;
            padding: 8px 10px;
            margin: 8px 0;
            font-size: 0.7rem;
            color: #856404;
            text-align: center;
        }

        .motivation-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .motivation-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .motivation-danger {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        /* MODAL DE REPORTE - ATUALIZADO */
        .report-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .report-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 95%;
            max-width: 500px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .report-title {
            font-size: 1rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
        }

        .report-question-info {
            background: #f8f9fa;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent);
        }

        .report-section {
            margin-bottom: 15px;
        }

        .report-section-title {
            font-size: 0.8rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .report-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin: 10px 0;
        }

        .report-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .report-option:hover {
            background: #f8f9fa;
            border-color: var(--accent);
        }

        .report-option input[type="radio"] {
            margin: 0;
            transform: scale(0.9);
        }

        .report-option label {
            font-size: 0.75rem;
            cursor: pointer;
            flex: 1;
        }

        /* FORMUL√ÅRIO DE IDENTIFICA√á√ÉO */
        .user-info-form {
            background: #f0f8ff;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            border: 1px solid #cce5ff;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-label {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .form-input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 0.8rem;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(0,123,255,0.1);
        }

        .form-input.error {
            border-color: var(--danger);
            background-color: #fff5f5;
        }

        .form-hint {
            font-size: 0.65rem;
            color: #6c757d;
            margin-top: 4px;
            display: block;
        }

        .required-star {
            color: var(--danger);
            font-weight: bold;
        }

        .report-textarea {
            width: 100%;
            min-height: 80px;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 0.8rem;
            resize: vertical;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .report-textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(0,123,255,0.1);
        }

        .report-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .report-submit {
            flex: 2;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 12px;
            font-size: 0.85rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .report-submit:hover {
            background: #0d2c4a;
        }

        .report-submit:disabled {
            background: #6c757d;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .report-cancel {
            flex: 1;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 12px;
            font-size: 0.85rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .report-cancel:hover {
            background: #545b62;
        }

        .report-success {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 5px;
            font-size: 0.8rem;
            text-align: center;
            margin-top: 15px;
            border: 1px solid #c3e6cb;
            display: none;
        }

        .report-error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.75rem;
            text-align: center;
            margin-top: 10px;
            border: 1px solid #f5c6cb;
            display: none;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* SCROLL PERSONALIZADO */
        .pending-list-compact::-webkit-scrollbar {
            height: 2px;
        }
        
        .pending-list-compact::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 1px;
        }
        
        .pending-list-compact::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 1px;
        }

        /* AJUSTES PARA TELAS MUITO PEQUENAS */
        @media (max-width: 320px) {
            body {
                padding: 2px;
                font-size: 12px;
            }
            
            .container {
                padding: 4px;
            }
            
            .page-title-mini {
                font-size: 0.75rem;
                max-width: 60%;
            }
            
            .timer-compact {
                font-size: 0.7rem;
                min-width: 35px;
                padding: 1px 3px;
            }
            
            .info-grid {
                gap: 3px;
            }
            
            .info-label {
                font-size: 0.5rem;
            }
            
            .info-value {
                font-size: 0.7rem;
            }
            
            .question-text-mini {
                font-size: 0.75rem;
            }
            
            .option-mini {
                padding: 4px 5px;
                font-size: 0.7rem;
                min-height: 26px;
            }
            
            .nav-btn, .btn {
                font-size: 0.7rem;
                padding: 5px 3px;
            }
            
            .pending-list-compact {
                max-height: 16px;
            }
            
            .pending-number {
                font-size: 0.5rem;
                min-width: 10px;
            }
            
            .report-gabarito-btn {
                font-size: 0.45rem;
                padding: 1px 3px;
            }
            
            .report-content {
                padding: 15px;
            }
            
            .report-buttons {
                flex-direction: column;
            }
        }

        @media (max-height: 600px) {
            .header-mini {
                padding-top: 10px;
            }
            
            .question-block-mini {
                margin: 4px 0;
                padding: 6px;
            }
            
            .nav-buttons {
                margin: 6px 0;
            }
            
            .btn {
                margin-top: 6px;
                min-height: 32px;
            }
        }
    </style>
</head>
<body>

<div class="container" id="main-container">
    <div class="credits-integrated">BY EWERTON</div>
    
    <div class="header-mini">
        <div class="header-mini-top">
            <h1 class="page-title-mini" id="page-title">Carregando...</h1>
            <div id="timer" class="timer-compact">00:00</div>
        </div>
        
        <div class="simulado-info" id="simulado-info">
            <div>Simulado: <span id="questions-per-simulado">20</span> quest√µes</div>
            <div class="simulado-stats">
                <span id="remaining-questions">Dispon√≠veis: 0</span>
                <span id="recent-used">Usadas: 0</span>
            </div>
            
            <div class="history-controls">
                <button class="clear-history-btn" onclick="clearHistory()">
                    üóëÔ∏è Limpar Hist√≥rico
                </button>
                <button class="info-history-btn" onclick="showHistoryInfo()">
                    ‚ÑπÔ∏è Info
                </button>
            </div>
        </div>
        
        <div class="quiz-info-mini">
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">Quest√£o</div>
                    <div class="info-value" id="question-counter">0/0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Respondidas</div>
                    <div class="info-value" id="answered-counter">0/0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Progresso</div>
                    <div class="info-value" id="progress-percent">0%</div>
                </div>
            </div>
            
            <div class="controls-compact">
                <div class="auto-nav-toggle" onclick="toggleAutoNav()">
                    <input type="checkbox" id="auto-nav-checkbox" class="auto-nav-checkbox" checked>
                    <label class="auto-nav-label">Auto-navega√ß√£o</label>
                </div>
                <button class="reset-btn-mini" onclick="resetQuiz()">
                    ‚Üª Reiniciar
                </button>
            </div>
        </div>

        <div class="completion-status">
            <div class="status-header">
                <span class="status-text">Status:</span>
                <span class="status-count" id="status-count">0/0</span>
            </div>
            <div class="pending-compact" id="pending-questions">
                <div class="pending-summary">
                    <span>Pendentes:</span>
                    <span class="pending-count" id="pending-count">0</span>
                </div>
                <div class="pending-list-compact" id="pending-list">
                    <span style="color: #6c757d; font-style: italic;">Nenhuma pendente</span>
                </div>
            </div>
        </div>
    </div>

    <div id="results">
        <div class="result-title" id="feedback-msg"></div>
        <div class="score-mini" id="final-score"></div>
        <div id="final-percent" style="font-size: 0.8rem; font-weight: bold; margin-bottom: 6px; color: var(--accent);"></div>
        <div id="motivation-message" class="motivation-message"></div>
        <div id="simulado-summary" style="margin-bottom: 8px; font-size: 0.7rem; color: var(--primary);"></div>
        
        <button id="restart-btn" class="btn btn-restart" onclick="startNewQuiz()">üîÑ Refazer Simulado</button>
        <button id="voltar-inicio-btn" class="btn btn-voltar-inicio" onclick="voltarAoInicio()">
            üèÅ Voltar ao In√≠cio
        </button>
        <button id="continuar-banco-btn" class="btn btn-continuar-banco" onclick="continuarComBanco()">
            üìö Continuar com Banco
        </button>
        <button id="wrong-questions-btn" class="btn btn-reforco" onclick="startWrongQuestionsSimulado()">
            ‚ö° Simulado de Refor√ßo
        </button>
        <button id="reiniciar-banco-btn" class="btn btn-reiniciar-banco" onclick="reiniciarBancoCompleto()">
            üîÑ Reiniciar Banco Completo
        </button>
        <button id="new-simulado-btn" class="btn" style="background: var(--accent); color: white; margin-top: 4px; display: none;" onclick="generateNewSimulado()">üé≤ Novo Simulado</button>
        <!-- NOVO BOT√ÉO PARA SIMULADO DE REFOR√áO -->
        <button id="novo-simulado-reforco-btn" class="btn btn-novo-simulado-reforco" onclick="novoSimuladoAposReforco()">
            üéØ Novo Simulado
        </button>
    </div>

    <div id="quiz-content"></div>

    <div class="nav-buttons">
        <button id="prev-btn" class="nav-btn" onclick="prevQuestion()" disabled>
            ‚Üê Anterior
        </button>
        <button id="next-btn" class="nav-btn" onclick="nextQuestion()">
            Pr√≥ximo ‚Üí
        </button>
    </div>

    <button id="finish-btn" class="btn btn-finish" onclick="finalizeQuiz()" disabled>
        üèÅ Finalizar
    </button>
</div>

<!-- MODAL DE REPORTE ATUALIZADO -->
<div id="reportModal" class="report-modal">
    <div class="report-content">
        <div class="report-title">üìù Reportar Quest√£o</div>
        
        <div class="report-question-info">
            <div><strong>Quest√£o #<span id="reportQuestionNumber">1</span></strong></div>
            <div id="reportQuestionText" style="font-size: 0.75rem; margin-top: 5px;">Carregando...</div>
        </div>
        
        <!-- SE√á√ÉO: TIPO DE PROBLEMA -->
        <div class="report-section">
            <div class="report-section-title">üìå Tipo de Problema</div>
            <div class="report-options">
                <div class="report-option">
                    <input type="radio" id="reportError" name="reportType" value="error">
                    <label for="reportError">‚ùå Quest√£o com erro</label>
                </div>
                <div class="report-option">
                    <input type="radio" id="reportWrongAnswer" name="reportType" value="wrong_answer">
                    <label for="reportWrongAnswer">‚ö†Ô∏è Resposta incorreta</label>
                </div>
                <div class="report-option">
                    <input type="radio" id="reportConfusing" name="reportType" value="confusing">
                    <label for="reportConfusing">ü§î Enunciado confuso</label>
                </div>
                <div class="report-option">
                    <input type="radio" id="reportAlternative" name="reportType" value="alternative">
                    <label for="reportAlternative">üî§ Alternativas erradas</label>
                </div>
                <div class="report-option">
                    <input type="radio" id="reportOther" name="reportType" value="other">
                    <label for="reportOther">üìù Outro problema</label>
                </div>
            </div>
        </div>
        
        <!-- SE√á√ÉO: SUA IDENTIFICA√á√ÉO -->
        <div class="report-section">
            <div class="report-section-title">üë§ Sua Identifica√ß√£o <span class="required-star">*</span></div>
            <div class="user-info-form">
                <div class="form-group">
                    <label class="form-label" for="userName">Nome Completo <span class="required-star">*</span></label>
                    <input type="text" id="userName" class="form-input" placeholder="Digite seu nome completo" maxlength="100">
                    <span class="form-hint">Para podermos entrar em contato com voc√™</span>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="userEmail">E-mail <span class="required-star">*</span></label>
                    <input type="email" id="userEmail" class="form-input" placeholder="seu.email@exemplo.com" maxlength="100">
                    <span class="form-hint">Para enviarmos o feedback sobre sua solicita√ß√£o</span>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="userInfo">Institui√ß√£o/Curso (opcional)</label>
                    <input type="text" id="userInfo" class="form-input" placeholder="Ex: SENAI, Engenharia Mec√¢nica" maxlength="100">
                    <span class="form-hint">Ajuda a identificar o contexto do reporte</span>
                </div>
            </div>
        </div>
        
        <!-- SE√á√ÉO: DETALHES -->
        <div class="report-section">
            <div class="report-section-title">üìã Detalhes do Problema</div>
            <textarea 
                id="reportDetails" 
                class="report-textarea" 
                placeholder="Descreva detalhadamente o problema encontrado na quest√£o. Se achar que h√° erro na resposta, explique sua justificativa..."
                maxlength="1000"
            ></textarea>
            <div class="form-hint" style="text-align: right;">
                <span id="charCount">0</span>/1000 caracteres
            </div>
        </div>
        
        <div id="reportErrorMsg" class="report-error"></div>
        
        <div class="report-buttons">
            <button id="cancelReport" class="report-cancel" onclick="closeReportModal()">Cancelar</button>
            <button id="submitReport" class="report-submit" onclick="submitReport()">
                <span id="submitText">Enviar Reporte</span>
                <span id="submitLoading" class="loading-spinner" style="display: none;"></span>
            </button>
        </div>
        
        <div id="reportSuccess" class="report-success">
            ‚úÖ Reporte enviado com sucesso! Obrigado pela contribui√ß√£o.<br>
            <small>Voc√™ receber√° um feedback por email em breve.</small>
        </div>
    </div>
</div>

<script>
    // ============================================
    // BANCO DE QUEST√ïES - ADICIONE AS SUAS AQUI
    // ============================================
    
    // FORMATO: {q: "Pergunta?", a: ["Op√ß√£o A", "Op√ß√£o B", "Op√ß√£o C", "Op√ß√£o D"], c: 0}
    // Onde 'c' √© o √≠ndice da resposta correta (0 = A, 1 = B, 2 = C, 3 = D)
    
 const masterBank = [


  {q: "As posi√ß√µes da chave seletora do magneto que s√£o utilizadas para testar o sistema de igni√ß√£o dupla?", a: ["Esquerdo e direito.", "Ambos e direito.", "Desligado e ambos.", "Esquerdo e ambos."], c: 3},
{q: "O tipo de conector, cujo inv√≥lucro √© feito de a√ßo, pertence √† classe?", a: ["D.", "K.", "B.", "C."], c: 1},
  {q: "A posi√ß√£o do interruptor na qual os magnetos ficam aterrados √©?", a: ["Ambos.", "On.", "Direito.", "Off."], c: 3},
  {q: "A v√°lvula de al√≠vio de uma bomba de combust√≠vel acionada pelo motor √© projetada para abrir?", a: ["A uma tens√£o pr√©-ajustada da mola.", "Ap√≥s o corte do motor.", "A uma determinada press√£o atmosf√©rica.", "Quando a press√£o de combust√≠vel for muito baixa."], c: 0},
  {q: "√â a sequ√™ncia na qual o tempo motor ocorre nos diferentes cilindros, sendo projetada para proporcionar o balanceamento e para eliminar a vibra√ß√£o ao m√°ximo poss√≠vel:", a: ["Trabalho.", "Ordem de fogo.", "Raz√£o de compress√£o.", "Pot√™ncia."], c: 1},
  {q: "O aquecedor de combust√≠vel (fuel heater) opera como um?", a: ["Trocador de pot√™ncia.", "Trocador de calor.", "Trocador de press√£o.", "Trocador de √≥leo."], c: 1},
  {q: "Um ciclo de quatro tempos completo demanda duas voltas do virabrequim do motor, perfazendo um total de 720¬∫ de giro. Em tese, cada uma das fases equivale a quantos graus?", a: ["90 graus.", "180 graus.", "360 graus.", "270 graus."], c: 1},
  {q: "A mistura ar/combust√≠vel entra nos cilindros atrav√©s das passagens das v√°lvulas de?", a: ["Compress√£o.", "Arrefecimento.", "Admiss√£o.", "Refrigera√ß√£o."], c: 2},
  {q: "A sequ√™ncia na qual o tempo motor ocorre nos diferentes cilindros denomina-se?", a: ["Claro de v√°lvulas.", "Claro de pist√µes.", "Ordem de fogo.", "Ordem de queima."], c: 2},
  {q: "A fun√ß√£o b√°sica de uma h√©lice √© converter a pot√™ncia do motor em for√ßa de?", a: ["Tra√ß√£o.", "Tor√ß√£o.", "Arrasto.", "Sustenta√ß√£o."], c: 0},
  {q: "O mecanismo de um motor de cilindros opostos. O eixo de ressaltos sempre gira com a metade da velocidade do:", a: ["Eixo transversal.", "Eixo da roda livre.", "Eixo de manivelas.", "Eixo cardan."], c: 2},
  {q: "Para o acionamento inicial do conjunto compressor (axial e centr√≠fugo), como tamb√©m a turbina, usa-se:", a: ["Ignitores de partida.", "Gerador de vortex.", "Roda livre.", "Start generation."], c: 3},
  {q: "O componente do motor que transmite a for√ßa do pist√£o para o eixo de manivelas √© o(a)?", a: ["Mancal.", "Biela.", "Pino do pist√£o.", "Vela."], c: 1},
  {q: "A finalidade das alhetas, na cabe√ßa do cilindro de um motor convencional, √©?", a: ["Arrefecer o cilindro.", "Acoplar as molas das v√°lvulas.", "Reduzir o peso do cilindro.", "Manter elevada a temperatura do cilindro."], c: 0},
  {q: "No pist√£o, o anel de compress√£o do motor √© instalado?", a: ["Na ranhura superior do pist√£o.", "Em qualquer ranhura do pist√£o.", "Na ranhura central do pist√£o.", "Na ranhura inferior do pist√£o."], c: 0},
  {q: "O objetivo principal do eixo de manivelas √© transformar o movimento:", a: ["Linear do tucho em movimento axial do eixo de ressaltos.", "Alternativo do eixo de ressaltos em movimento rotativo para orientar o curso do cilindro.", "Alternativo do pist√£o em movimento rotativo para acionamento da h√©lice.", "Flex√≠vel do balancim em movimento alternado das v√°lvulas."], c: 2},
  {q: "Responda com a alternativa certa. Several different types of fire detection system are installed in aircraft to detect engine fires. \"Installed\" quer dizer:", a: ["Alimentado.", "Instalado.", "Unido.", "Inserido."], c: 1},
  {q: "A turbina transforma a energia cin√©tica dos gases de escapamento em energia:", a: ["Pneum√°tica.", "Mec√¢nica.", "Est√°tica.", "El√©trica."], c: 1},
  {q: "Se o motor for operado como recomendado e a manuten√ß√£o preventiva for executada, os cilindros normalmente resistir√£o at√© que o motor seja removido por:", a: ["Limite de torque.", "Vontade do operador.", "Limite de voo.", "Limite de horas."], c: 3},
  {q: "Em um sistema de igni√ß√£o de um motor convencional, a alta tens√£o induzida na bobina secund√°ria √©, em seguida, enviada √† (ao):", a: ["Vela.", "Bobina prim√°ria.", "Platinado.", "Distribuidor."], c: 3},
  {q: "Os dois principais elementos funcionais do compressor centr√≠fugo s√£o?", a: ["Turbina e difusor.", "Carca√ßa e difusor.", "Pist√£o e biela.", "Impulsor e difusor."], c: 3},
  {q: "A alta tens√£o induzida na bobina secund√°ria √© enviada ao distribuidor, o qual consiste em:", a: ["Quatro partes.", "Duas partes.", "Seis partes.", "Tr√™s partes."], c: 1},
  {q: "Quando a h√©lice d√° uma volta completa e ocorre um recuo a mesma realiza o passo?", a: ["Bandeira.", "Efetivo.", "Ativo.", "Te√≥rico."], c: 1},
  {q: "Os dois tipos mais comuns de compressor que encontramos nos motores a rea√ß√£o?", a: ["Fluxo centr√≠fugo e axial.", "Axial e tipo fly by stol.", "Radial inconstante e centr√≠fugo.", "Caneca e canular."], c: 0},
  {q: "O cruzamento das v√°lvulas ocorre no?", a: ["In√≠cio da exaust√£o e final da compress√£o.", "Final da exaust√£o e in√≠cio da admiss√£o.", "In√≠cio da expans√£o e final da compress√£o.", "Final da expans√£o e in√≠cio da admiss√£o."], c: 1},
  {q: "A expans√£o dos gases cin√©ticos da queima, transforma energia calor√≠fica em energia?", a: ["Cin√©tica.", "Pneum√°tica.", "Est√°tica.", "Mec√¢nica."], c: 3},
  {q: "As partes b√°sicas que constituem uma turbina s√£o?", a: ["Rotor e coletor.", "Coletor e difusor.", "Impelidor e estator.", "Estator e rotor."], c: 3},
  {q: "O combust√≠vel √© fornecido para entrada da unidade de controle, vindo dos tanques do avi√£o atrav√©s de uma s√©rie de?", a: ["Bombas acionadas pelo motor.", "Filtros.", "Bombas de refor√ßo.", "V√°lvulas seletoras."], c: 2},
  {q: "A se√ß√£o da turbina de um motor turbojato ou turborreator est√° localizada na parte?", a: ["Superior.", "Traseira.", "Dianteira.", "Inferior."], c: 1},
  {q: "No motor a turbina, a se√ß√£o que transforma a alta velocidade do ar da sa√≠da do compressor, em press√£o est√°tica, denomina-se se√ß√£o?", a: ["De escapamento.", "De combust√£o.", "Difusora.", "Acess√≥ria."], c: 2},
  {q: "A maioria dos motores alternativos de aeronaves opera com ciclo de quantos tempos?", a: ["Cinco tempos.", "Dois tempos yamaha.", "Quatro tempos.", "Um tempo."], c: 2},
  {q: "O componente do motor que tem a finalidade de expulsar os gases de escapamento do cilindro denomina-se?", a: ["Pist√£o.", "V√°lvula.", "Anel de segmento.", "Eixo de ressaltos."], c: 1},
  {q: "Muitos motores correntemente fabricados utilizam velas com roscas?", a: ["Posti√ßas (heli-coil) de borracha.", "Posti√ßas de alum√≠nio.", "Posti√ßas (heli-coil) de a√ßo inoxid√°vel.", "Posti√ßas (heli-coil) de a√ßo baquelite."], c: 2},
  {q: "O mecanismo respons√°vel pelo fechamento das v√°lvulas do cilindro √©?", a: ["Condutor e eixo.", "Ressalto e pino.", "Condutor e mola.", "Mola."], c: 3},
  {q: "Al√©m dos a rea√ß√£o, os motores radial s√£o fixados √† nacele do avi√£o atrav√©s de(o)?", a: ["Tubo.", "Suporte.", "Montante.", "Ber√ßo."], c: 3},
  {q: "Many older model aircraft still operating have some type of thermal switch system or thermocouple system...", a: ["Sistema de igni√ß√£o.", "Sistema de detec√ß√£o de calor.", "Sistema de interruptor t√©rmico.", "Sistema de troca t√©rmica."], c: 1},
  {q: "Uma aeronave, impulsionada por grandes motores turbojato, requer algum tipo de dispositivo silenciador de ru√≠dos...", a: ["Supressores de ru√≠dos.", "Supressores de atrito.", "Supressores de ouvido.", "Supressores de gases cin√©ticos stop by."], c: 0},
  {q: "O servo do governador controla o fluxo de combust√≠vel com a fun√ß√£o de ajustar a velocidade do:", a: ["Eixo.", "Filtro.", "Motor.", "Carburador."], c: 2},
  {q: "As posi√ß√µes da chave seletora do magneto, usadas para testar o sistema de igni√ß√£o dupla, s√£o?", a: ["On e both.", "Right e both.", "Left e right.", "Off e on."], c: 2},
  {q: "A turbina transforma uma quantidade de energia cin√©tica dos gases de escapamento em energia mec√¢nica, para acionar o?", a: ["Difusor e acess√≥rios.", "Compressor e acess√≥rios.", "C√¢mara de combust√£o e acess√≥rios.", "Distribuidor e difusor."], c: 1},
  {q: "A quantidade ou a carga da mistura ar/combust√≠vel depende da abertura da?", a: ["Manete de dreno.", "Manete de alijamento.", "Manete de √¢ngulo.", "Manete de acelera√ß√£o."], c: 3},
  {q: "No sistema de combust√≠vel motor a rea√ß√£o, o aquecedor usa como fonte de aquecimento, ar sangrado do(a)?", a: ["Escapamento ou √≥leo do sistema de lubrifica√ß√£o.", "Compressor ou √≥leo do sistema de lubrifica√ß√£o.", "Se√ß√£o da turbina ou √≥leo do sistema hidr√°ulico.", "C√¢mara de combust√£o ou √≥leo do sistema hidr√°ulico."], c: 1},
  {q: "Para se combater o desenvolvimento microbiol√≥gico no combust√≠vel deve-se?", a: ["Drenar o combust√≠vel diariamente.", "Destanquear o avi√£o antes do pernoite.", "Vedar as entradas de ventila√ß√£o sempre que o avi√£o for pernoitar.", "Adicionar bactericida diariamente."], c: 0},
  {q: "A finalidade da liga√ß√£o √† massa encontrada nos sistemas el√©tricos do avi√£o √©?", a: ["Evitar a fadiga mec√¢nica dos fios.", "Proporcionar caminhos de retorno da corrente.", "Aumentar a resist√™ncia total do circuito el√©trico.", "Acumular carga est√°tica."], c: 1},
  {q: "A parte do motor na qual a pot√™ncia √© desenvolvida, √© chamada de?", a: ["As hastes de mudan√ßa de passo.", "V√°lvulas.", "Cilindro.", "Rodas do trem de pouso."], c: 2},
  {q: "Os cilindros dos motores radiais s√£o instalados?", a: ["Em carreira, no eixo das manivelas.", "Na parte traseira do c√°rter.", "Ao redor de um c√°rter central.", "Diretamente nas engrenagens de redu√ß√£o."], c: 2},
  {q: "O pino do pist√£o une o pist√£o √†?", a: ["Bengala.", "Transmissor.", "Biela.", "Turbina."], c: 2},
  {q: "O cal√ßo hidr√°ulico no motor radial, ocorre normalmente?", a: ["Nos cilindros laterais.", "Nos cilindros inferiores.", "Nos cilindros superiores.", "Em todos os cilindros."], c: 1},
  {q: "O cal√ßo hidr√°ulico ocorre normalmente em qual tipo de motor do ciclo otto?", a: ["A turbina de fluxo centr√≠fugo.", "Convencional do tipo cilindros em v.", "A turbina de fluxo axial.", "Alternativo do tipo radial."], c: 3},
  {q: "O tempo que o √™mbolo est√° se deslocando do pmb para o pma, e as v√°lvulas est√£o fechadas, denomina-se?", a: ["Pot√™ncia.", "Admiss√£o.", "Escapamento.", "Compress√£o."], c: 3},
  {q: "A maneira para identificar o tipo de gasolina √© pelo(a)?", a: ["Quantidade.", "Temperatura.", "Cor.", "Pureza."], c: 2},
  {q: "O componente do sistema de combust√≠vel, que tem a finalidade de cortar o fluxo de combust√≠vel que sai do tanque, √© o(a)?", a: ["V√°lvula seletora.", "Dreno.", "Filtro.", "V√°lvula de transfer√™ncia."], c: 0},
  {q: "O motor t√©rmico transforma energia calor√≠fica em energia?", a: ["Cin√©tica.", "El√©trica.", "Hidr√°ulica.", "Mec√¢nica."], c: 3},
  {q: "A express√£o \"overheat conditions\" quer dizer:", a: ["Condi√ß√µes de calor.", "Condi√ß√µes de tempo.", "Condi√ß√µes clim√°ticas.", "Condi√ß√µes de superaquecimento."], c: 3},
  {q: "O componente de um motor convencional que tem a finalidade de transformar o movimento alternativo do pist√£o em movimento rotativo para acionamento da h√©lice, denomina-se?", a: ["Eixo de manivelas.", "Mancal.", "Eixo de ressaltos.", "Caixa de engrenagem."], c: 0},
  {q: "Em um motor a rea√ß√£o a pot√™ncia indicada ou desenvolvida ocorre no(a)?", a: ["Se√ß√£o de escapamento.", "Compressor.", "Super turbina weel.", "Se√ß√£o de combust√£o."], c: 3},
  {q: "Nos motores em 'V' os cilindros s√£o montados em duas carreiras em linha, geralmente ao um √¢ngulo de quantos graus?", a: ["90¬∫.", "10¬∫.", "20¬∫.", "60¬∫."], c: 3},
  {q: "Equipamento respons√°vel para modificar o n√≠vel de voltagem, aumentando-o ou diminuindo-o como necess√°rio, denomina-se?", a: ["Gerador.", "Volt√≠metro.", "Potenci√¥metro.", "Transformador."], c: 3},
  {q: "Os motores a combust√£o interna s√£o aqueles em que o combust√≠vel √© queimado internamente. Um mecanismo constitu√≠do por pist√£o, biela e virabrequim √© que transforma a energia t√©rmica (calor√≠fica) em?", a: ["Energia cin√©tica.", "Energia est√°tica.", "Energia qu√¢ntica.", "Energia mec√¢nica."], c: 3},
  {q: "O sistema de medi√ß√£o principal fornece combust√≠vel para o motor em todas?", a: ["As velocidades acima de marcha lenta.", "As velocidades acima de marcha lenta ap√≥s o disparo do motor de ciclo spacer.", "As baixa rota√ß√£o do rotor de igni√ß√£o.", "As velocidades de baixa marcha lenta."], c: 0},
  {q: "Dentre as se√ß√µes abaixo, aquela que converte velocidade em press√£o no motor a rea√ß√£o, denomina-se?", a: ["Acess√≥rios.", "Eixo curto.", "Difusora.", "Turbina."], c: 2},
  {q: "O tac√¥metro √© um dispositivo que serve para fazer medi√ß√£o da quantidade de:", a: ["Pot√™ncia por hora (PRH).", "Torque por hora (TPH).", "Temperatura por minuto (TPM).", "Rota√ß√£o por minuto (RPM)."], c: 3},
  {q: "As v√°lvulas de admiss√£o e escapamento s√£o abertas e fechadas, nos tempos apropriados, por a√ß√£o?", a: ["El√©trica.", "Pneum√°tica.", "Hidr√°ulica.", "Mec√¢nica."], c: 3},
  {q: "A pe√ßa m√≥vel do motor convencional respons√°vel pela acomoda√ß√£o dos an√©is de segmentos denomina-se?", a: ["Contrapeso.", "Pist√£o.", "Eixo de manivelas.", "Moente da biela."], c: 1},
  {q: "Responda com a alternativa certa. Some warning lights are push-to-test lights. The bulb is tested by pushing it in to check an auxiliary test circuit. \"Warning lights\" pode ser traduzido como:", a: ["Luzes de calor.", "Luzes de aviso.", "Luzes de indica√ß√£o.", "Luzes de superaquecimento."], c: 1},
  {q: "Ap√≥s a sua leitura, assinale a alternativa correta. If the temperature rises rapidly, the thermocouple produces a voltage because of the temperature difference between the reference junction and the hot junction. \"Hot junction\" quer dizer:", a: ["Jun√ß√£o de fogo.", "Aviso de jun√ß√£o.", "Jun√ß√£o quente.", "Aviso de calor."], c: 2},
  {q: "O difusor √© a se√ß√£o divergente do motor. Tem a importante fun√ß√£o de trocar a alta velocidade do ar de descarga do compressor para a press√£o?", a: ["Est√°tica.", "Nula.", "Aerodin√¢mica.", "T√©rmica."], c: 0},
  {q: "No texto, a express√£o \"cathode ray tube\" quer dizer: The analog signal produced by the sensing element loop as its temperature changes can readily be converted to signals suitable for meter or cathode ray tube.", a: ["Tubo de raios ultravioleta.", "Tubo de raios cat√≥dicos.", "Tubo de raios quentes.", "Tubo de raios congelados."], c: 1},
  {q: "A ordem de fogo de um motor √© a sequ√™ncia de queima que proporciona melhor?", a: ["Taxa de compress√£o.", "Balanceamento com elimina√ß√£o de vibra√ß√£o.", "Rendimento t√©rmico.", "Queima do combust√≠vel."], c: 1},
  {q: "A bolha de vapor pode ser perigosa o suficiente para bloquear o?", a: ["Start generation.", "Pist√£o na compress√£o.", "Fluxo de combust√≠vel e parar o motor.", "Pinh√£o."], c: 2},
  {q: "O que √© recuo de h√©lice?", a: ["Igualdade entre passo geom√©trico e efetivo.", "Diferen√ßa entre passo geom√©trico e efetivo.", "Indiferen√ßa entre passo geom√©trico e te√≥rico.", "Diferen√ßa entre passo te√≥rico e definitivo."], c: 1},
  {q: "S√£o requeridas duas voltas completas do eixo de manivelas (720¬∫) para o motor de quantos tempos?", a: ["Seis tempos.", "Dois tempos.", "Um tempo.", "Quatro tempos."], c: 3},
  {q: "Nos motores a rea√ß√£o, a pot√™ncia indicada desenvolve-se, no(a)?", a: ["C√°rter e no rotor.", "Cilindro e no compressor.", "C√¢mara de combust√£o.", "Carburador e na turbina."], c: 2},
  {q: "Durante a partida de um motor a rea√ß√£o, deve-se monitorar o(a)?", a: ["Press√£o de √≥leo, temperatura do compressor e a tit.", "Temperatura do compressor e o tac√¥metro.", "Tac√¥metro e a tit.", "Press√£o, temperatura e rpm."], c: 3},
  {q: "O fluxo de ar para o motor √© controlado atrav√©s?", a: ["Magneto.", "FCU.", "Carburador.", "UCP."], c: 1},
  {q: "O cone interno de localiza√ß√£o central √© fixado junto √† face traseira do disco da turbina evitando?", a: ["Orientar os gases para a turbina.", "Turbul√™ncia dos gases.", "Fixar a se√ß√£o de escapamento no motor.", "Reduzir a temperatura dos gases de exaust√£o."], c: 1},
  {q: "Os tanques de combust√≠veis s√£o adaptados com defletores internos, com a finalidade de?", a: ["Resistir √†s flutua√ß√µes do combust√≠vel, causadas pelas mudan√ßas de atitude da aeronave.", "Manter a press√£o atmosf√©rica dentro do tanque.", "Eliminar as impurezas no combust√≠vel, atrav√©s da decanta√ß√£o.", "Permitir o perfeito alijamento do combust√≠vel, em voo."], c: 0},
  {q: "Dentre os instrumentos abaixo, aquele que √© utilizado para verificar o desempenho e tamb√©m o consumo de combust√≠vel do motor √© o?", a: ["Torqu√≠metro.", "Fuel pressure.", "Indicador de egt.", "Fuel flow."], c: 3},
  {q: "Os ignitores s√£o instalados na c√¢mara de combust√£o do tipo anular em quais posi√ß√µes, levando em considera√ß√£o a ordem do rel√≥gio:", a: ["Olhando o motor por tr√°s, nas posi√ß√µes tr√™s (3) e nove (9) horas.", "Olhando o motor de frente, nas posi√ß√µes duas (2) e dez (10) horas.", "Olhando o motor de lado, nas posi√ß√µes tr√™s (3) e nove (9) horas.", "Olhando o motor de frente, nas posi√ß√µes doze (12) e seis (6) horas."], c: 3},
  {q: "Alguns motores de aeronave incorporam tuchos:", a: ["√ìptico.", "Hidr√°ulico.", "Radiais.", "El√©tricos."], c: 1},
  {q: "Qual a finalidade do compressor no motor a rea√ß√£o?", a: ["Diminuir a press√£o e a temperatura do ar hidraulicamente.", "Diminuir a press√£o e a temperatura do ar mecanicamente?", "Aumenta a press√£o e a pot√™ncia do ar eletromagneticamente.", "Aumenta a press√£o e a temperatura do ar, mecanicamente."], c: 3},
  {q: "√â uma compara√ß√£o do volume de um cilindro quando o √™mbolo est√° no ponto morto inferior, e o volume quando ele est√° no o ponto morto superior denomina-se:", a: ["Acelera√ß√£o.", "Raz√£o de compress√£o.", "Pot√™ncia indicada.", "Ciclo."], c: 1},
  {q: "Dentre os componentes abaixo, aquele que tem a finalidade de gerar a alta tens√£o para os sistema de igni√ß√£o √© o(a)?", a: ["Magneto.", "Cablagem.", "Distribuidor.", "Vela."], c: 0},
  {q: "Leia com aten√ß√£o o texto e responda a alternativa correta. The thermocouple fire warning system operates on an entirely different principle than the thermal switch system. \"Fire warning\" quer dizer:", a: ["Aviso de pressuriza√ß√£o.", "Aviso de alerta.", "Aviso de aquecimento.", "Aviso de inc√™ndio."], c: 3},
  {q: "No motor a rea√ß√£o, o alinhamento dos gases de escapamento e a fixa√ß√£o do cone interno √© feita pelo componente denominado?", a: ["Alheta ejetora da turbina.", "Longarina radial.", "Elemento estator do conjunto da turbina.", "Manta de isolamento."], c: 1},
  {q: "Num motor ciclo de otto, ocorrendo um cal√ßo hidr√°ulico, este ocorrer√° nos cilindros?", a: ["Inferiores.", "Pares.", "√çmpares.", "Superiores."], c: 0},
  {q: "A compara√ß√£o do volume de um cilindro quando o √™mbolo est√° no pma e o volume quando o √™mbolo est√° no pmb denomina-se?", a: ["Balanceamento do eixo de manivelas.", "Taxa de compress√£o.", "Volume total.", "Empuxo."], c: 1},
  {q: "O carburador √© instalado no motor, na se√ß√£o de?", a: ["Acess√≥rios.", "For√ßa.", "Pot√™ncia.", "Difusora."], c: 0},
  {q: "A forma√ß√£o de gelo no sistema de admiss√£o pode ser impedida ou eliminada pelo aumento?", a: ["Da temperatura.", "De est√°tica.", "Da altitude.", "De qav."], c: 0},
  {q: "O rendimento √∫til do motor que impele o avi√£o denomina-se?", a: ["Mistura.", "Consumo espec√≠fico.", "Taxa de compress√£o.", "Empuxo."], c: 3},
  {q: "Num motor axial, da entrada para a sa√≠da, o ar flui por um caminho axial e √© comprimido a uma raz√£o aproximadamente de?", a: ["12,5.", "1,25.", "137,7.", "1512,5."], c: 0},
  {q: "Em um motor a rea√ß√£o, o ar ao entrar na c√¢mara de combust√£o diminui a velocidade e aumenta a press√£o por qual componente?", a: ["Estator.", "Venturi.", "Compressor.", "Difusor."], c: 3},
  {q: "O mecanismo de um motor convencional(ciclo de otto), de cilindros opostos √© acionado por qual eixo?", a: ["Eixo de ressaltos ou eixo de comando de v√°lvulas.", "Eixo longo conc√™ntrico.", "Eixo oculto.", "Eixo de assaltos ou eixo de comando de v√°lvulas."], c: 0},
  {q: "Dentre as alternativas abaixo, aquele que indica o componente do motor convencional respons√°vel pela expuls√£o dos gases queimados √© o(a)?", a: ["V√°lvula de escapamento.", "Pist√£o.", "Cilindro.", "Tubo de descarga."], c: 0},
  {q: "Os an√©is de segmento nos motores convencionais tem a fun√ß√£o de?", a: ["Ventila√ß√£o.", "Limitar o movimento do eixo de manivelas.", "Contra√ß√£o.", "Veda√ß√£o."], c: 3},
  {q: "O fechamento das v√°lvulas √© realizado atrav√©s de?", a: ["Hastes.", "Pinos.", "Molas.", "Eixos."], c: 2},
  {q: "A gasolina de avia√ß√£o de grau115/145 √© de cor?", a: ["Verde.", "Cinza.", "Azul.", "P√∫rpura."], c: 3},
  {q: "Dentre os componentes abaixo, aquele que tem a finalidade de transformar energia cin√©tica dos gases de escapamentos em energia mec√¢nica, denomina-se:", a: ["Coletor.", "Compressor.", "Turbina.", "Estator."], c: 2},
  {q: "A vela de igni√ß√£o deve ser substitu√≠da sempre que?", a: ["Apresentar falha.", "Ocorrer o claro de v√°lvulas.", "A mistura ar/combust√≠vel empobrecer.", "A igni√ß√£o ocorrer no tempo de escapamento."], c: 0},
  {q: "O motor a rea√ß√£o do tipo turbo-fan, √© um motor?", a: ["Turbo√©lice com fan.", "Turbojato com fan.", "Turboeixo com fan.", "Turboh√©lice com fan."], c: 1},
  {q: "O motor a rea√ß√£o que desenvolve maior empuxo em baixas velocidades e baixas altitudes denomina-se?", a: ["Turbojato.", "Turboeixo.", "Turbofan.", "Estatojato."], c: 2},
  {q: "A biela √© o elo que transmite a for√ßa entre?", a: ["O pist√£o e o anel.", "O pist√£o e o cilindro.", "O pist√£o e a biela.", "O pist√£o e o eixo de manivelas."], c: 3},
  {q: "√â o maior componente do motor, e eleva a temperatura do ar atrav√©s da queima?", a: ["Turbina.", "Compressor.", "Escapamento.", "C√¢mara de combust√£o."], c: 3},
  {q: "√â o maior componente do motor convencional, no qual as demais partes s√£o instaladas?", a: ["Bloco.", "C√°rter.", "Cilindro.", "Eixo de manivelas."], c: 1},
  {q: "Quando a h√©lice d√° uma volta completa e n√£o ocorre o recuo a mesma realiza o passo?", a: ["Bandeira.", "Efetivo.", "Ativo.", "Te√≥rico."], c: 3},
  {q: "Qual o instrumento que faz a medi√ß√£o da rota√ß√£o do motor?", a: ["Torqu√≠metro.", "Hor√≠metro.", "Tac√¥metro.", "Press√£o de admiss√£o."], c: 2},
  {q: "O combust√≠vel √© atomizado e pulverizado na c√¢mara de combust√£o atrav√©s do(a)?", a: ["Bico injetor.", "Bomba de press√£o.", "Bomba de recalque.", "V√°lvula de fluxo."], c: 0},
  {q: "O eixo de ressalto de um motor de cilindros opostos sempre gira com?", a: ["O dobro da velocidade do eixo de manivelas.", "A mesma velocidade do eixo de manivelas.", "Metade da velocidade do eixo de manivelas.", "Um quarto da velocidade do eixo de manivelas."], c: 2},
  {q: "A se√ß√£o do motor a rea√ß√£o que tem a finalidade de aumentar a press√£o do ar, denomina-se?", a: ["Turbina.", "Difusora.", "Compressor.", "De combust√£o."], c: 2},
  {q: "Nos motores turbo√©lices, a h√©lice √© acionada pelo(a)?", a: ["Compressor.", "Eixo do rotor.", "Eixo da turbina.", "Trem de engrenagens de redu√ß√£o."], c: 2},
  {q: "Os dois principais elementos que formam o compressor centr√≠fugo s√£o?", a: ["Impulsor e difusor.", "Rotor e estator.", "Impulsor e rotor.", "Rotor e difusor."], c: 0},
  {q: "Na c√¢mara de combust√£o, o ar √© dividido em fluxo prim√°rio e secund√°rio. O fluxo prim√°rio tem a fun√ß√£o de?", a: ["Arrefecer a c√¢mara.", "Arrefecer o motor.", "Manter a combust√£o.", "Isolar o calor da c√¢mara."], c: 2},
  {q: "No ciclo de quatro tempos, o pist√£o realiza quantos cursos?", a: ["Um curso.", "Dois cursos.", "Tr√™s cursos.", "Quatro cursos."], c: 3},
  {q: "Nos motores a rea√ß√£o, a h√©lice √© acionada por um eixo ligado ao conjunto?", a: ["Do compressor.", "Do estator.", "Da turbina.", "Do bico injetor."], c: 2},
  {q: "A se√ß√£o do motor turbojato que tem por finalidade transformar a alta velocidade do ar em press√£o est√°tica denomina-se?", a: ["De admiss√£o.", "De compress√£o.", "Difusora.", "De combust√£o."], c: 2},
  {q: "O combust√≠vel de avia√ß√£o deve possuir baixo ponto de congelamento e alto?", a: ["Poder de fulgor.", "Poder calor√≠fico.", "Ponto de gota.", "√çndice de octana."], c: 1},
  {q: "O objetivo principal do eixo de manivelas √© transformar o movimento alternativo do pist√£o em movimento?", a: ["Axial.", "Linear.", "Rotativo.", "Transversal."], c: 2},
  {q: "A abertura e o fechamento das v√°lvulas de admiss√£o e escapamento, no tempo apropriado, s√£o feitos pelo?", a: ["Virabrequim.", "Eixo de manivelas.", "Eixo de ressaltos.", "Balancim."], c: 2},
  {q: "Qual o instrumento utilizado para monitorar a integridade das palhetas da turbina e do compressor?", a: ["Tac√¥metro.", "Torqu√≠metro.", "EGT / TIT.", "Press√£o de combust√≠vel."], c: 2},
  {q: "O componente que tem a finalidade de fornecer a centelha el√©trica para que ocorra a queima denomina-se?", a: ["Vela.", "Bobina.", "Distribuidor.", "Magneto."], c: 0},
  {q: "Nos motores radiais, o cilindro n√∫mero um (1) √© sempre o cilindro?", a: ["De baixo.", "De cima.", "Da direita.", "Da esquerda."], c: 1},
  {q: "A parte do cilindro onde as velas s√£o instaladas denomina-se?", a: ["Saia do cilindro.", "Camisa do cilindro.", "Cabe√ßa do cilindro.", "Base do cilindro."], c: 2},
  {q: "Os an√©is que t√™m a fun√ß√£o de impedir a passagem dos gases para o c√°rter s√£o os an√©is de?", a: ["Compress√£o.", "Raspadores.", "Lubrifica√ß√£o.", "Segmento."], c: 0},
  {q: "A dist√¢ncia entre o ponto morto superior (PMS) e o ponto morto inferior (PMI) denomina-se?", a: ["Di√¢metro.", "Raio.", "Curso.", "Tempo."], c: 2},
  {q: "A h√©lice que permite ao piloto selecionar o √¢ngulo das p√°s durante o voo denomina-se h√©lice de?", a: ["Passo fixo.", "Passo ajust√°vel.", "Passo vari√°vel.", "Velocidade constante."], c: 2},
  {q: "O excesso de calor em um motor convencional pode causar?", a: ["Aumento da pot√™ncia.", "Redu√ß√£o do consumo.", "Detona√ß√£o e pr√©-igni√ß√£o.", "Melhora na lubrifica√ß√£o."], c: 2},
  {q: "O tipo de motor que utiliza a energia dos gases de escapamento para acionar um compressor de ar denomina-se?", a: ["Superalimentado.", "Turboalimentado.", "Injetado.", "Aspirado."], c: 1},
  {q: "No motor a rea√ß√£o, a se√ß√£o que direciona os gases de escapamento para a atmosfera com a velocidade adequada denomina-se?", a: ["Turbina.", "Difusor.", "Escapamento.", "C√¢mara de combust√£o."], c: 2},
  {q: "O componente que liga o pist√£o √† biela denomina-se?", a: ["Pino do pist√£o.", "Mancal.", "Tucho.", "Vareta."], c: 0},
  {q: "A h√©lice de passo vari√°vel que mant√©m a rota√ß√£o do motor constante, independentemente da atitude da aeronave, √© controlada pelo?", a: ["Manete de mistura.", "Carburador.", "Governador.", "Distribuidor."], c: 2},
  {q: "O sistema de lubrifica√ß√£o de c√°rter seco utiliza?", a: ["Apenas uma bomba de press√£o.", "O pr√≥prio c√°rter como reservat√≥rio.", "Um reservat√≥rio separado e bombas de recupera√ß√£o.", "√ìleo derivado de gordura animal."], c: 2},
  {q: "Qual a cor da gasolina de avia√ß√£o (AVGAS) 100LL?", a: ["Verde.", "Azul.", "P√∫rpura.", "Incolor."], c: 1},
  {q: "O dispositivo que mede a press√£o do √≥leo do motor √© o?", a: ["Man√¥metro.", "Term√¥metro.", "Flux√¥metro.", "Volt√≠metro."], c: 0},
  {q: "Em um motor a rea√ß√£o, a queima do combust√≠vel ocorre de forma?", a: ["Intermitente.", "Cont√≠nua.", "Alternada.", "Sob press√£o negativa."], c: 1},
  {q: "O compressor axial √© composto por?", a: ["Impulsores e difusores.", "Rotores e estatores.", "Pist√µes e bielas.", "Palhetas fixas e m√≥veis."], c: 1},
  {q: "O componente que protege o sistema el√©trico contra sobrecargas, podendo ser rearmado, √© o?", a: ["Fus√≠vel.", "Disjuntor (Circuit Breaker).", "Rel√©.", "Alternador."], c: 1},
  {q: "A h√©lice em posi√ß√£o de \"bandeira\" √© utilizada para?", a: ["Reduzir o arrasto em caso de falha do motor.", "Aumentar a tra√ß√£o na decolagem.", "Facilitar a partida do motor.", "Frear a aeronave no pouso."], c: 0},
  {q: "O sistema que evita a forma√ß√£o de gelo no carburador utiliza?", a: ["Ar quente proveniente de uma mufla no escapamento.", "√Ålcool injetado na admiss√£o.", "Resist√™ncias el√©tricas no venturi.", "O calor do √≥leo lubrificante."], c: 0},
  {q: "A unidade de medida de pot√™ncia dos motores a rea√ß√£o (turbojato/turbofan) √© o?", a: ["Cavalo-vapor (CV).", "Horsepower (HP).", "Libras de empuxo (Lbs).", "Quilowatt (kW)."], c: 2},
  {q: "A parte do motor a rea√ß√£o onde a energia cin√©tica √© convertida em energia mec√¢nica √© a?", a: ["C√¢mara de combust√£o.", "Se√ß√£o difusora.", "Turbina.", "Se√ß√£o de acess√≥rios."], c: 2},
  {q: "O tipo de igni√ß√£o utilizado nos motores a rea√ß√£o para a partida denomina-se?", a: ["Igni√ß√£o por magneto.", "Igni√ß√£o de alta energia (capacitiva).", "Igni√ß√£o por platinado.", "Igni√ß√£o por compress√£o."], c: 1},
  {q: "O componente que permite o movimento das p√°s da h√©lice para mudar o passo √© o?", a: ["Cubo da h√©lice.", "Spinner.", "Governador.", "Eixo de manivelas."], c: 0},
  {q: "O \"overhaul\" de um motor significa?", a: ["Revis√£o geral.", "Inspe√ß√£o de pr√©-voo.", "Troca de √≥leo.", "Limpeza externa."], c: 0},
  {q: "O sistema que fornece combust√≠vel sob press√£o para os bicos injetores denomina-se?", a: ["Carburador.", "Sistema de inje√ß√£o.", "Sistema de gravidade.", "Sistema de dreno."], c: 1},
  {q: "A fun√ß√£o do √≥leo lubrificante, al√©m de lubrificar, √©?", a: ["Arrefecer, vedar e limpar.", "Aumentar o atrito.", "Fornecer energia para a centelha.", "Auxiliar na combust√£o."], c: 0},
  {q: "O que indica uma queda excessiva de RPM ao testar os magnetos?", a: ["Mistura rica.", "Mau funcionamento do sistema de igni√ß√£o ou velas sujas.", "Motor superaquecido.", "H√©lice fora de passo."], c: 1},
  {q: "O ar secund√°rio no motor a rea√ß√£o representa cerca de?", a: ["10% do ar total.", "25% do ar total.", "75% do ar total.", "100% do ar total."], c: 2},
  {q: "O \"venturi\" no carburador tem a fun√ß√£o de?", a: ["Aumentar a velocidade do ar e diminuir a press√£o.", "Diminuir a velocidade do ar e aumentar a press√£o.", "Filtrar o ar de admiss√£o.", "Controlar a marcha lenta."], c: 0},
  {q: "A pr√©-igni√ß√£o √© causada por?", a: ["Pontos quentes na c√¢mara de combust√£o.", "Uso de combust√≠vel de alta octanagem.", "Mistura excessivamente rica.", "Magnetos atrasados."], c: 0},
  {q: "O componente que sincroniza a abertura das v√°lvulas com a posi√ß√£o do pist√£o √©?", a: ["A biela.", "O eixo de ressaltos.", "O governador.", "O distribuidor."], c: 1},
  {q: "Nos motores turbo√©lices, a maior parte do empuxo √© produzida?", a: ["Pela h√©lice.", "Pelo jato de escapamento.", "Pelo compressor.", "Pela turbina de acess√≥rios."], c: 0},
  {q: "A v√°lvula que controla a sa√≠da dos gases de escapamento para o turboalimentador denomina-se?", a: ["V√°lvula de al√≠vio.", "Wastegate.", "V√°lvula seletora.", "V√°lvula de reten√ß√£o."], c: 1},
  {q: "O instrumento que indica a rela√ß√£o entre a press√£o de admiss√£o e a press√£o atmosf√©rica √© o?", a: ["Alt√≠metro.", "Manifold Pressure (Press√£o de Admiss√£o).", "Tac√¥metro.", "Veloc√≠metro."], c: 1},
  {q: "O uso de combust√≠vel de octanagem inferior √† recomendada pode causar?", a: ["Detona√ß√£o.", "Aumento de pot√™ncia.", "Redu√ß√£o da temperatura.", "Economia de combust√≠vel."], c: 0},
  {q: "O \"pitch\" de uma h√©lice refere-se ao seu?", a: ["Di√¢metro.", "Passo.", "Peso.", "Comprimento."], c: 1},
  {q: "O sistema de exaust√£o tem a fun√ß√£o de?", a: ["Remover os gases queimados e reduzir o ru√≠do.", "Fornecer ar para o compressor.", "Resfriar os cilindros.", "Filtrar o combust√≠vel."], c: 0},
  {q: "O componente que transforma a corrente alternada em corrente cont√≠nua √© o?", a: ["Transformador.", "Retificador.", "Inversor.", "Comutador."], c: 1},
  {q: "No motor a rea√ß√£o, a se√ß√£o de acess√≥rios √© geralmente acionada pelo?", a: ["Eixo do compressor.", "Fluxo de ar externo.", "Eixo da h√©lice.", "Ar sangrado."], c: 0},
  {q: "A mistura \"pobre\" cont√©m?", a: ["Excesso de combust√≠vel.", "Excesso de ar.", "Excesso de √≥leo.", "Baixa press√£o."], c: 1},
  {q: "O \"firewall\" (parede de fogo) localiza-se entre?", a: ["O motor e a cabine/fuselagem.", "O compressor e a turbina.", "O c√°rter e o cilindro.", "O tanque de combust√≠vel e a bomba."], c: 0},
  {q: "O compressor centr√≠fugo √© caracterizado por?", a: ["Grande aumento de press√£o por est√°gio.", "Pequeno di√¢metro frontal.", "Fluxo de ar em linha reta.", "Grande n√∫mero de est√°gios."], c: 0},
  {q: "O teto operacional de um motor turboalimentado √©?", a: ["Maior que o de um motor aspirado.", "Menor que o de um motor aspirado.", "Igual ao de um motor aspirado.", "Limitado apenas pela h√©lice."], c: 0},
  {q: "O componente que distribui a alta tens√£o para as velas na ordem correta √© o?", a: ["Platinado.", "Condensador.", "Distribuidor.", "Bobina."], c: 2},
  {q: "O combust√≠vel JET A-1 √© utilizado em motores?", a: ["Convencionais (pist√£o).", "A rea√ß√£o (turbina).", "Radiais.", "El√©tricos."], c: 1},
  {q: "A \"sangria de ar\" (bleed air) do compressor √© utilizada para?", a: ["Pressuriza√ß√£o, degelo e aquecimento.", "Lubrifica√ß√£o das turbinas.", "Aumentar o empuxo.", "Refrigera√ß√£o do √≥leo."], c: 0},
  {q: "O rolamento que suporta cargas paralelas ao eixo denomina-se?", a: ["Rolamento de roletes.", "Rolamento de esferas (ou de encosto).", "Bucha.", "Mancal de deslizamento."], c: 1},
  {q: "O curso do pist√£o √© definido pelo?", a: ["Di√¢metro do cilindro.", "Desenho do eixo de manivelas (virabrequim).", "Tamanho da biela.", "Eixo de ressaltos."], c: 1},
  {q: "O \"FOD\" (Foreign Object Damage) refere-se a danos causados por?", a: ["Objetos estranhos ingeridos pelo motor.", "Falta de lubrifica√ß√£o.", "Combust√≠vel contaminado.", "Erro de pilotagem."], c: 0},
  {q: "O que acontece com a densidade do ar √† medida que a altitude aumenta?", a: ["Aumenta.", "Diminui.", "Permanece constante.", "Dobra a cada 1000 p√©s."], c: 1},
  {q: "A fun√ß√£o das palhetas estatoras no compressor axial √©?", a: ["Direcionar o ar para o pr√≥ximo est√°gio e converter velocidade em press√£o.", "Girar o rotor.", "Queimar o combust√≠vel.", "Arrefecer o motor."], c: 0},
  {q: "O motor que possui os cilindros dispostos em duas fileiras paralelas denomina-se motor?", a: ["Radial.", "Em V.", "Em linha.", "Oposto."], c: 2},
  {q: "A \"manete de mistura\" controla a propor√ß√£o de?", a: ["Combust√≠vel em rela√ß√£o ao ar.", "√ìleo em rela√ß√£o ao combust√≠vel.", "Ar prim√°rio em rela√ß√£o ao secund√°rio.", "Rota√ß√£o da h√©lice."], c: 0},
  {q: "O motor turboeixo (turboshaft) √© amplamente utilizado em?", a: ["Ca√ßas supers√¥nicos.", "Avi√µes agr√≠colas.", "Helic√≥pteros.", "Planadores."], c: 2},
  {q: "A \"folga de v√°lvulas\" (claro) √© necess√°ria para?", a: ["Permitir a expans√£o t√©rmica dos componentes.", "Aumentar a pot√™ncia.", "Reduzir o ru√≠do.", "Facilitar a lubrifica√ß√£o."], c: 0},
  {q: "O sistema de igni√ß√£o de um motor convencional √©?", a: ["Independente do sistema el√©trico da aeronave.", "Dependente da bateria.", "Dependente do alternador.", "Acionado pelo fluxo de ar."], c: 0},
  {q: "A carca√ßa de admiss√£o do motor a rea√ß√£o tem a fun√ß√£o de?", a: ["Conduzir o ar para o compressor com o m√≠nimo de turbul√™ncia.", "Filtrar o ar.", "Comprimir o ar.", "Aquecer o ar."], c: 0},
  {q: "O termo \"TBO\" (Time Between Overhaul) significa?", a: ["Tempo entre revis√µes gerais.", "Tempo total de voo.", "Tempo de garantia.", "Tempo de aquecimento do motor."], c: 0},
  {q: "A \"detona√ß√£o\" √© caracterizada por?", a: ["Explos√£o repentina e violenta da mistura.", "Queima lenta e progressiva.", "Falta de centelha.", "Excesso de √≥leo na c√¢mara."], c: 0},
  {q: "O governador de h√©lice utiliza qual for√ßa para alterar o passo das p√°s?", a: ["El√©trica.", "Manual.", "Press√£o de √≥leo e for√ßa centr√≠fuga.", "Press√£o de ar."], c: 2},
  {q: "Qual a fun√ß√£o do dreno de combust√≠vel?", a: ["Remover √°gua e sedimentos.", "Alijar combust√≠vel em emerg√™ncia.", "Medir a press√£o.", "Transferir combust√≠vel entre tanques."], c: 0},
  {q: "No motor radial, o c√°rter √© dividido em quantas se√ß√µes principais?", a: ["Uma.", "Duas.", "Tr√™s.", "Quatro ou cinco."], c: 3},
  {q: "O tipo de c√¢mara de combust√£o que consiste em v√°rias c√¢maras cil√≠ndricas independentes denomina-se?", a: ["Caneca (tipo can).", "Anular.", "Canular.", "Radial."], c: 0},
  {q: "A efici√™ncia t√©rmica de um motor √© a rela√ß√£o entre?", a: ["A energia do combust√≠vel e a energia √∫til produzida.", "O peso e a pot√™ncia.", "O consumo e a velocidade.", "O ar e o combust√≠vel."], c: 0},
  {q: "O componente que mant√©m a press√£o constante no sistema de combust√≠vel √© a?", a: ["V√°lvula de al√≠vio.", "V√°lvula de corte.", "V√°lvula de reten√ß√£o.", "V√°lvula seletora."], c: 0},
  {q: "O \"estol de compressor\" ocorre quando?", a: ["O √¢ngulo de ataque das palhetas do rotor excede o limite.", "O motor para por falta de combust√≠vel.", "A turbina derrete.", "O √≥leo acaba."], c: 0},
  {q: "A h√©lice de passo fixo √© projetada para ter melhor rendimento em?", a: ["Apenas na decolagem.", "Apenas no cruzeiro.", "Em uma condi√ß√£o espec√≠fica de voo (conforme o projeto).", "Em todas as altitudes."], c: 2},
  {q: "O sensor que detecta vibra√ß√µes excessivas no motor √© o?", a: ["Transmissor de vibra√ß√£o (Vibrometer).", "Tac√¥metro.", "Termopar.", "Chip detector."], c: 0},
  {q: "O sistema de partida pneum√°tico utiliza?", a: ["Ar comprimido para girar o motor.", "Um motor el√©trico de alta pot√™ncia.", "In√©rcia de um volante.", "Combust√£o de um cartucho."], c: 0},
  {q: "O pist√£o atinge o ponto m√°ximo de sua trajet√≥ria no?", a: ["PMS.", "PMI.", "Curso m√©dio.", "Tempo de exaust√£o."], c: 0},
  {q: "A finalidade do sistema de \"supercharging\" √©?", a: ["Manter a pot√™ncia do motor em altitudes elevadas.", "Reduzir o peso do motor.", "Aumentar o consumo de combust√≠vel.", "Facilitar a descida."], c: 0},
  {q: "O √≥leo lubrificante de baixa viscosidade √©?", a: ["Mais fino e flui mais facilmente.", "Mais grosso e resistente.", "Utilizado apenas em climas quentes.", "De origem mineral pura."], c: 0},
  {q: "A parte da turbina que permanece fixa √© o?", a: ["Rotor.", "Estator (ou bocal de entrada).", "Disco.", "Eixo."], c: 1},
  {q: "O \"vapor lock\" (bolha de vapor) √© mais comum em?", a: ["Dias quentes com combust√≠veis vol√°teis.", "Dias frios com alta umidade.", "Voos de alta altitude.", "Motores a rea√ß√£o."], c: 0},
  {q: "O componente que converte o movimento rotativo do eixo em movimento linear para abrir as v√°lvulas √© o?", a: ["Ressalto (came).", "Pist√£o.", "Biela.", "Mancal."], c: 0},
  {q: "A ordem de fogo em um motor de 4 cilindros opostos √© geralmente?", a: ["1-3-2-4.", "1-2-3-4.", "1-4-3-2.", "4-3-2-1."], c: 0},
  {q: "O instrumento que indica a temperatura dos gases logo ap√≥s a turbina √© o?", a: ["EGT.", "CHT.", "Oil Temp.", "Carb Temp."], c: 0},
  {q: "A \"manta t√©rmica\" no motor a rea√ß√£o serve para?", a: ["Isolar o calor e proteger a estrutura da aeronave.", "Aumentar a temperatura da combust√£o.", "Reduzir o arrasto.", "Filtrar o ar."], c: 0},
  {q: "O que ocorre se a mistura estiver muito rica?", a: ["Perda de pot√™ncia e carboniza√ß√£o das velas.", "Superaquecimento do motor.", "Aumento excessivo de RPM.", "Detona√ß√£o imediata."], c: 0},
  {q: "O eixo que interliga o compressor √† turbina denomina-se?", a: ["Eixo do rotor.", "Eixo de manivelas.", "Eixo de ressaltos.", "Eixo de acess√≥rios."], c: 0},
  {q: "O motor turbojato que possui dois ou mais conjuntos de compressores independentes, acionados por turbinas independentes, denomina-se?", a: ["Monobloco.", "Simples.", "Dual-spool (ou de dois eixos).", "Axial-reverso."], c: 2},
  {q: "A finalidade do sistema de igni√ß√£o em um motor a rea√ß√£o √©?", a: ["Inflamar a mistura ar/combust√≠vel durante a partida.", "Manter a centelha constante em todas as fases do voo.", "Gerar energia para os acess√≥rios.", "Sincronizar os magnetos."], c: 0},
  {q: "A unidade de controle de combust√≠vel (FCU) nos motores a rea√ß√£o responde principalmente a?", a: ["Rota√ß√£o do motor (RPM) e press√£o/temperatura do ar.", "Quantidade de √≥leo no c√°rter.", "Altitude de cruzeiro apenas.", "Press√£o hidr√°ulica dos freios."], c: 0},
  {q: "O empuxo reverso (reverse thrust) √© utilizado principalmente para?", a: ["Aumentar a velocidade de subida.", "Auxiliar na frenagem da aeronave ap√≥s o pouso.", "Economizar combust√≠vel em voo.", "Facilitar o taxiamento de r√©."], c: 1},
  {q: "Qual componente do motor a rea√ß√£o suporta as maiores temperaturas de trabalho?", a: ["Compressor de baixa.", "C√¢mara de combust√£o.", "Palhetas da turbina (primeiro est√°gio).", "Cone de exaust√£o."], c: 2},
  {q: "A fun√ß√£o das varetas de comando (push rods) em um motor convencional √©?", a: ["Transmitir o movimento do tucho para o balancim.", "Girar o eixo de manivelas.", "Comprimir o anel de segmento.", "Abrir a v√°lvula de al√≠vio de √≥leo."], c: 0},
  {q: "O fen√¥meno de \"cocking\" nos an√©is de segmento refere-se a?", a: ["Quebra por excesso de RPM.", "Ac√∫mulo de carbono que prende o anel na ranhura.", "Desgaste natural por tempo de uso.", "Instala√ß√£o invertida do anel."], c: 1},
  {q: "O sistema de lubrifica√ß√£o por \"salpico\" utiliza?", a: ["O movimento das partes m√≥veis para espalhar o √≥leo.", "Uma bomba de alta press√£o dedicada.", "A gravidade apenas.", "Jatos injetores controlados eletronicamente."], c: 0},
  {q: "O filtro de combust√≠vel tem a fun√ß√£o de remover part√≠culas s√≥lidas e?", a: ["√Ågua (atrav√©s da decanta√ß√£o).", "Excesso de octanagem.", "Chumbo tetraetila.", "Ar do sistema."], c: 0},
  {q: "A \"raz√£o de mistura ideal\" (estequiom√©trica) para a combust√£o completa √© de aproximadamente?", a: ["1:1.", "15:1 (15 partes de ar para 1 de combust√≠vel).", "8:1.", "20:1."], c: 1},
  {q: "O instrumento de \"CHT\" (Cylinder Head Temperature) mede a temperatura?", a: ["Da cabe√ßa do cilindro.", "Do √≥leo lubrificante.", "Do ar de admiss√£o.", "Dos gases de exaust√£o."], c: 0},
  {q: "O que acontece se o respiro do tanque de combust√≠vel ficar obstru√≠do?", a: ["O fluxo de combust√≠vel para o motor pode ser interrompido por v√°cuo.", "O tanque pode explodir por sobrepress√£o.", "O combust√≠vel congela.", "A mistura enriquecer√° automaticamente."], c: 0},
  {q: "As h√©lices de madeira s√£o geralmente protegidas nas pontas e bordos de ataque por?", a: ["Verniz extra.", "Revestimento de metal (lat√£o ou a√ßo inoxid√°vel).", "Fita pl√°stica.", "Borracha vulcanizada."], c: 1},
  {q: "O componente que une o cabe√ßote ao cilindro em motores menores √© geralmente?", a: ["Cola ep√≥xi.", "Prisioneiros e porcas.", "Solda el√©trica.", "Rebites."], c: 1},
  {q: "A v√°lvula de admiss√£o geralmente √© maior que a de escapamento para?", a: ["Facilitar a entrada da carga de mistura ar/combust√≠vel.", "Aguentar mais calor.", "Reduzir o peso do cabe√ßote.", "Evitar a pr√©-igni√ß√£o."], c: 0},
  {q: "O \"EGT\" (Exhaust Gas Temperature) √© usado pelo piloto para?", a: ["Ajustar corretamente a mistura (ajuste de pico).", "Medir a rota√ß√£o do motor.", "Controlar a press√£o do √≥leo.", "Verificar o n√≠vel de combust√≠vel."], c: 0},
  {q: "Motores a rea√ß√£o que utilizam um duto de contorno (bypass) s√£o chamados de?", a: ["Turbojatos puros.", "Turbofans.", "Turbo√©lices.", "Turboeixos."], c: 1},
  {q: "O rolamento de roletes √© mais adequado para suportar cargas?", a: ["Radiais.", "De encosto (axiais).", "M√≠nimas.", "Apenas em alta temperatura."], c: 0},
  {q: "O \"check de magnetos\" deve ser feito?", a: ["Com a aeronave voltada contra o vento, se poss√≠vel, e seguindo o manual.", "Apenas ap√≥s o primeiro pouso do dia.", "Com o motor em marcha lenta.", "Somente se o piloto sentir vibra√ß√£o."], c: 0},
  {q: "A \"flutua√ß√£o de v√°lvulas\" ocorre quando?", a: ["A mola da v√°lvula n√£o consegue fech√°-la rapidamente em alta rota√ß√£o.", "O √≥leo est√° muito viscoso.", "O motor est√° desligado.", "A h√©lice est√° em passo bandeira."], c: 0},
  {q: "O \"bico injetor\" de um motor a rea√ß√£o tem a fun√ß√£o de?", a: ["Atomizar o combust√≠vel para uma queima eficiente.", "Medir a rota√ß√£o da turbina.", "Filtrar as impurezas do JET A-1.", "Resfriar o ar prim√°rio."], c: 0},
  {q: "O c√°rter √∫mido √© aquele que?", a: ["Carrega o suprimento de √≥leo na sua pr√≥pria base.", "N√£o utiliza √≥leo lubrificante.", "Possui um tanque de √≥leo externo na fuselagem.", "√â refrigerado por √°gua."], c: 0},
  {q: "A \"corre√ß√£o de altitude\" no carburador serve para?", a: ["Empobrecer a mistura conforme a densidade do ar diminui.", "Enriquecer a mistura conforme o avi√£o sobe.", "Aumentar a press√£o de admiss√£o.", "Fechar a borboleta de acelera√ß√£o."], c: 0},
  {q: "O sistema de igni√ß√£o dupla (dois magnetos e duas velas por cilindro) serve para?", a: ["Seguran√ßa (redund√¢ncia) e melhor efici√™ncia na combust√£o.", "Aumentar o consumo de combust√≠vel.", "Facilitar a limpeza das velas.", "Reduzir a temperatura do motor."], c: 0},
  {q: "O \"impulsor\" do compressor centr√≠fugo gira em?", a: ["Alta velocidade para acelerar o ar para fora radialmente.", "Baixa velocidade para economizar torque.", "Sentido oposto ao da turbina.", "Movimento alternativo."], c: 0},
  {q: "O motor turbo√©lice √© mais eficiente que o turbojato em?", a: ["Velocidades baixas e m√©dias.", "Velocidades supers√¥nicas.", "Voos estratosf√©ricos.", "Decolagens curtas apenas."], c: 0},
  {q: "A forma√ß√£o de gelo no carburador √© indicada inicialmente por?", a: ["Queda de RPM (passo fixo) ou queda de press√£o de admiss√£o (passo vari√°vel).", "Aumento s√∫bito da temperatura do √≥leo.", "Vibra√ß√£o violenta na h√©lice.", "Fuma√ßa preta no escapamento."], c: 0},
  {q: "O \"starter-generator\" tem a fun√ß√£o dupla de?", a: ["Dar partida no motor e gerar eletricidade ap√≥s o acionamento.", "Bombear combust√≠vel e √≥leo simultaneamente.", "Resfriar a turbina e o compressor.", "Controlar o passo da h√©lice e a RPM."], c: 0},
  {q: "A se√ß√£o de combust√£o de fluxo reverso √© usada para?", a: ["Encurtar o comprimento total do motor.", "Aumentar a velocidade dos gases.", "Reduzir a emiss√£o de poluentes.", "Evitar o estol de compressor."], c: 0},
  {q: "O \"ponto morto inferior\" (PMI) √© a posi√ß√£o onde o pist√£o est√°?", a: ["No ponto mais baixo do seu curso.", "No ponto mais alto do seu curso.", "Exatamente no meio do cilindro.", "Com as duas v√°lvulas abertas."], c: 0},
  {q: "A viscosidade do √≥leo lubrificante deve ser escolhida de acordo com?", a: ["A temperatura ambiente de opera√ß√£o.", "A cor da aeronave.", "O tipo de h√©lice instalado.", "O n√∫mero de passageiros."], c: 0},
  {q: "O que √© o \"claro de ponta\" dos an√©is de segmento?", a: ["O espa√ßo entre as extremidades do anel quando instalado no cilindro.", "A dist√¢ncia entre o pist√£o e a biela.", "O di√¢metro externo do anel.", "A folga entre o anel e a ranhura."], c: 0},
  {q: "O \"turbocompressor\" √© acionado por?", a: ["Gases de escapamento.", "Correias ligadas ao virabrequim.", "Motores el√©tricos independentes.", "Press√£o hidr√°ulica."], c: 0},
  {q: "A \"tra√ß√£o\" gerada pela h√©lice √© uma for√ßa?", a: ["Paralela ao eixo de rota√ß√£o e para frente.", "Perpendicular ao eixo de rota√ß√£o.", "Que puxa a aeronave para baixo.", "De tor√ß√£o pura no motor."], c: 0},
  {q: "O sistema de drenagem de um motor a rea√ß√£o serve para?", a: ["Remover combust√≠vel acumulado ap√≥s uma partida abortada.", "Limpar o √≥leo usado.", "Eliminar o excesso de ar do compressor.", "Drenar a √°gua da chuva da nacele."], c: 0},
  {q: "A h√©lice de \"velocidade constante\" altera o passo para?", a: ["Manter a RPM selecionada pelo piloto.", "Aumentar a resist√™ncia do ar.", "Evitar que o avi√£o perca altitude.", "Economizar √≥leo do motor."], c: 0},
  {q: "O componente que \"sangra\" o ar do compressor para evitar o estol denomina-se?", a: ["V√°lvula de sangria (Bleed Valve).", "V√°lvula de al√≠vio de press√£o.", "Wastegate.", "V√°lvula de corte."], c: 0},
  {q: "Os mancais de um motor a rea√ß√£o s√£o geralmente do tipo?", a: ["Antifric√ß√£o (esferas ou roletes).", "Deslizamento (buchas de bronze).", "Madeira tratada.", "Pl√°stico de alta resist√™ncia."], c: 0},
  {q: "O \"impulso de partida\" (Starter) desengata do motor quando?", a: ["O motor atinge uma rota√ß√£o de auto-sustenta√ß√£o.", "O piloto solta o manete.", "O tanque de combust√≠vel est√° cheio.", "A aeronave come√ßa a se mover."], c: 0},
  {q: "Qual o principal contaminante do √≥leo lubrificante?", a: ["Res√≠duos de carbono, part√≠culas met√°licas e umidade.", "Nitrog√™nio atmosf√©rico.", "Chumbo da gasolina azul.", "Excesso de press√£o."], c: 0},
  {q: "O \"difusor\" da c√¢mara de combust√£o tem como objetivo?", a: ["Reduzir a velocidade do ar e aumentar a press√£o est√°tica.", "Aumentar a velocidade do ar para 1 Mach.", "Filtrar part√≠culas de poeira.", "Injetar o combust√≠vel no fluxo de ar."], c: 0},
  {q: "O que caracteriza um \"ciclo motor\" em um motor de 4 tempos?", a: ["Admiss√£o, Compress√£o, Pot√™ncia (Expans√£o) e Escapamento.", "Partida, T√°xi, Decolagem e Pouso.", "Rota√ß√£o, Igni√ß√£o e Combust√£o.", "Suc√ß√£o, Press√£o e Exaust√£o."], c: 0},
  {q: "O motor \"boxer\" √© um sin√¥nimo comum para?", a: ["Motor de cilindros opostos.", "Motor radial de duas estrelas.", "Motor em linha invertido.", "Motor a rea√ß√£o de fluxo axial."], c: 0},
  {q: "A fun√ß√£o do \"condensador\" no magneto √©?", a: ["Evitar o arco el√©trico no platinado e auxiliar no colapso do campo magn√©tico.", "Esfriar a bobina prim√°ria.", "Transformar CC em CA.", "Armazenar combust√≠vel para a partida."], c: 0},
  {q: "O bocal de escapamento de um motor supers√¥nico √© do tipo?", a: ["Convergente-divergente.", "Apenas divergente.", "Reto e curto.", "Em formato de caracol."], c: 0},
  {q: "O \"m√≥dulo\" de um motor a rea√ß√£o refere-se a?", a: ["Uma se√ß√£o principal completa que pode ser substitu√≠da individualmente.", "O computador de bordo.", "A unidade de medida de empuxo.", "O painel de instrumentos."], c: 0},
  {q: "A \"alavanca de h√©lice\" no cockpit controla?", a: ["O ajuste do governador de h√©lice.", "A abertura da borboleta de admiss√£o.", "A quantidade de combust√≠vel injetado.", "O freio das rodas."], c: 0},
  {q: "O \"estator\" da turbina tamb√©m √© conhecido como?", a: ["Palhetas guias de entrada da turbina (Nozzle Guide Vanes).", "Rotor de exaust√£o.", "Disco de for√ßa.", "Impulsor traseiro."], c: 0},
  {q: "O \"torque\" de um motor turbo√©lice √© medido atrav√©s de?", a: ["Press√£o de √≥leo em um mecanismo de engrenagens planet√°rias.", "Um veloc√≠metro no eixo da h√©lice.", "Sensores magn√©ticos nas p√°s.", "Balan√ßas de mola no ber√ßo do motor."], c: 0},
  {q: "O \"intercooler\" √© usado nos sistemas superalimentados para?", a: ["Resfriar o ar de admiss√£o ap√≥s a compress√£o.", "Resfriar o √≥leo lubrificante.", "Aquecer o combust√≠vel.", "Resfriar a cabine de comando."], c: 0},
  {q: "A vela de igni√ß√£o \"fria\" √© aquela que?", a: ["Dissipa o calor rapidamente para o cabe√ßote.", "Opera melhor em climas de inverno.", "N√£o gera centelha quente.", "Possui isolador de porcelana curto."], c: 0},
  {q: "O que ocorre no tempo de \"compress√£o\"?", a: ["Ambas as v√°lvulas est√£o fechadas e o pist√£o sobe.", "A v√°lvula de admiss√£o abre e o pist√£o desce.", "A v√°lvula de escapamento abre e o pist√£o sobe.", "O pist√£o est√° parado no PMS."], c: 0},
  {q: "O componente que permite que o motor continue girando se a h√©lice parar bruscamente denomina-se?", a: ["Roda livre (ou embreagem de sobre-velocidade).", "Eixo cardan.", "Tucho hidr√°ulico.", "Pinh√£o de redu√ß√£o."], c: 0},
  {q: "A \"raz√£o de desvio\" (bypass ratio) em um turbofan √©?", a: ["A raz√£o entre a massa de ar que passa pelo fan e a que passa pelo n√∫cleo.", "A quantidade de ar que vaza pelas juntas.", "A velocidade do avi√£o dividida pela do som.", "O consumo de √≥leo por hora de voo."], c: 0},
  {q: "O uso de \"√°gua-metanol\" em alguns motores serve para?", a: ["Aumentar a pot√™ncia temporariamente na decolagem (resfriamento e densidade).", "Limpar as c√¢maras de combust√£o.", "Apagar inc√™ndios internos.", "Lubrificar as palhetas da turbina."], c: 0},
  {q: "A se√ß√£o de \"admiss√£o\" de um motor a rea√ß√£o deve transformar?", a: ["Press√£o din√¢mica em press√£o est√°tica.", "Calor em movimento.", "√ìleo em n√©voa.", "Combust√≠vel em g√°s."], c: 0},
  {q: "O \"recuo\" da h√©lice √© maior quando?", a: ["A aeronave est√° parada e o motor em alta pot√™ncia.", "A aeronave est√° em voo de cruzeiro r√°pido.", "O motor est√° desligado.", "A h√©lice est√° em passo bandeira."], c: 0},
  {q: "O sistema de \"fire detection\" do tipo la√ßo cont√≠nuo (continuous loop)?", a: ["Detecta fogo em qualquer ponto ao longo do seu comprimento.", "Detecta apenas fuma√ßa.", "Precisa ser substitu√≠do ap√≥s cada voo.", "Funciona apenas por radia√ß√£o UV."], c: 0},
  {q: "A \"camisa de cilindro\" de a√ßo nitretado possui?", a: ["Superf√≠cie extremamente dura e resistente ao desgaste.", "Flexibilidade para dobrar sem quebrar.", "Cor azul brilhante natural.", "Baixa condutividade t√©rmica."], c: 0},
  {q: "O componente que mant√©m a press√£o do combust√≠vel acima da press√£o de vapor √©?", a: ["Bomba de refor√ßo (boost pump) no tanque.", "V√°lvula de dreno.", "Filtro principal.", "Injetor de partida."], c: 0},
  {q: "No motor radial, o cilindro mestre (master rod cylinder)?", a: ["Aloja a biela mestra onde as bielas articuladas s√£o presas.", "√â o √∫nico que recebe centelha.", "√â o cilindro que fica na posi√ß√£o de 6 horas.", "N√£o possui an√©is de segmento."], c: 0},
  {q: "A \"tit√¢nio\" √© frequentemente usado no compressor devido √† sua?", a: ["Alta resist√™ncia e baixo peso (raz√£o resist√™ncia/peso).", "Baixa temperatura de fus√£o.", "Cor prateada que facilita a inspe√ß√£o.", "Facilidade de soldagem manual."], c: 0},
  {q: "O \"magneto de baixa tens√£o\" utiliza?", a: ["Um transformador externo perto da vela para elevar a voltagem.", "Baterias de 12 volts.", "Cabos de igni√ß√£o sem isolamento.", "Apenas um platinado de cobre."], c: 0},
  {q: "O \"empuxo espec√≠fico\" √©?", a: ["O empuxo produzido por unidade de massa de ar.", "O peso total do motor.", "A for√ßa da h√©lice no v√°cuo.", "O consumo de combust√≠vel na marcha lenta."], c: 0},
  {q: "O que causa a \"carboniza√ß√£o\" excessiva das velas?", a: ["Opera√ß√£o prolongada em marcha lenta ou mistura muito rica.", "Uso de gasolina de alta octanagem.", "Voos em altitudes elevadas.", "Magnetos muito adiantados."], c: 0},
  {q: "A \"veda√ß√£o de labirinto\" no motor a rea√ß√£o serve para?", a: ["Reter o √≥leo nos mancais sem contato f√≠sico direto.", "Evitar que p√°ssaros entrem no motor.", "Travar as palhetas no disco.", "Aumentar o ru√≠do do escapamento."], c: 0},
  {q: "O \"ponto de fulgor\" (flash point) de um lubrificante √© a temperatura onde?", a: ["O √≥leo libera vapores que se inflamam momentaneamente.", "O √≥leo vira gelatina.", "O √≥leo come√ßa a ferver.", "O √≥leo perde toda a sua cor."], c: 0},
  {q: "O sistema de \"fethering\" (embandeiramento) √© obrigat√≥rio em?", a: ["Aeronaves multimotores para garantir seguran√ßa em caso de pane.", "Aeronaves monomotores leves.", "Helic√≥pteros de pequeno porte.", "Planadores de instru√ß√£o."], c: 0},
  {q: "A \"caixa de engrenagens de redu√ß√£o\" da h√©lice serve para?", a: ["Permitir que o motor gire r√°pido enquanto a h√©lice gira mais devagar.", "Aumentar a rota√ß√£o da h√©lice acima da do motor.", "Inverter o sentido de rota√ß√£o da h√©lice.", "Ligar o motor de partida."], c: 0},
  {q: "O termo \"hot start\" em motores a rea√ß√£o indica?", a: ["Temperatura de exaust√£o (EGT/TIT) excedendo os limites na partida.", "Que o motor pegou fogo externamente.", "Que a bateria est√° muito quente.", "Que o combust√≠vel est√° fervendo no tanque."], c: 0},
  {q: "A \"mistura rica\" √© usada na decolagem para?", a: ["Fornecer pot√™ncia m√°xima e auxiliar no resfriamento interno.", "Economizar combust√≠vel.", "Evitar que o motor pare por excesso de ar.", "Reduzir a fuma√ßa no aeroporto."], c: 0},
  {q: "O \"shroud\" (anel de contorno) nas palhetas da turbina serve para?", a: ["Reduzir a vibra√ß√£o e aumentar a efici√™ncia aerodin√¢mica.", "Proteger contra a ingest√£o de gelo.", "Facilitar a pintura das palhetas.", "Diminuir o peso do disco."], c: 0},
  {q: "O \"tucho\" (lifter) est√° localizado entre?", a: ["O ressalto do eixo e a vareta de comando.", "O pist√£o e a biela.", "A h√©lice e o motor.", "O magneto e a vela."], c: 0},
  {q: "A \"contrapress√£o\" no sistema de exaust√£o deve ser?", a: ["A menor poss√≠vel para n√£o roubar pot√™ncia do motor.", "A maior poss√≠vel para aquecer o ar.", "Igual √† press√£o atmosf√©rica no n√≠vel do mar.", "Controlada pelo piloto via manete."], c: 0},
  {q: "O \"sistema de c√°rter seco\" √© superior ao \"√∫mido\" em voo acrob√°tico porque?", a: ["Garante a lubrifica√ß√£o em qualquer atitude da aeronave.", "Pesa menos.", "N√£o utiliza filtros.", "Usa √≥leo mais barato."], c: 0},
  {q: "O compressor \"axial\" √© preferido em avi√µes de alta velocidade porque?", a: ["Permite uma menor √°rea frontal (menos arrasto).", "√â mais simples de construir que o centr√≠fugo.", "N√£o sofre estol.", "Funciona sem √≥leo."], c: 0},
  {q: "O \"passo geom√©trico\" da h√©lice √©?", a: ["A dist√¢ncia te√≥rica que a h√©lice avan√ßaria em uma volta.", "O comprimento da p√°.", "O peso da h√©lice em gramas.", "A dist√¢ncia real percorrida no ar."], c: 0},
  {q: "A \"auto-igni√ß√£o\" ou \"detona√ß√£o\" pode ser identificada pelo?", a: ["Som de batida met√°lica (\"batida de pino\").", "Sil√™ncio absoluto do motor.", "Aumento da press√£o de √≥leo.", "Cor branca da fuma√ßa."], c: 0},
  {q: "O \"magneto\" √© basicamente um?", a: ["Gerador de corrente alternada de alta voltagem.", "Motor el√©trico de corrente cont√≠nua.", "Transformador de press√£o.", "Acumulador de carga est√°tica."], c: 0},
  {q: "O \"est√°gio\" de um compressor axial consiste em?", a: ["Uma fileira de palhetas rotativas e uma de est√°ticas.", "Dois rotores girando em sentidos opostos.", "Um bico injetor e uma vela.", "Uma turbina e um eixo."], c: 0},
  {q: "O combust√≠vel que sobra e n√£o √© queimado na partida vai para?", a: ["O tanque de dreno (drain tank) ou para o solo.", "De volta para o tanque principal de asa.", "Para o sistema de lubrifica√ß√£o.", "Para o radiador de √≥leo."], c: 0},
  {q: "O \"governador de h√©lice\" atua como um?", a: ["Sensor de velocidade que ajusta o passo hidraulicamente.", "Freio para parar a h√©lice em emerg√™ncia.", "Carburador de alta precis√£o.", "Alternador de emerg√™ncia."], c: 0},
  {q: "A \"folga entre o pist√£o e o cilindro\" √© necess√°ria para?", a: ["A expans√£o t√©rmica do pist√£o de alum√≠nio.", "Permitir que o √≥leo vaze para fora do motor.", "Facilitar a montagem manual.", "Reduzir a taxa de compress√£o."], c: 0},
  {q: "O \"chip detector\" magn√©tico no sistema de √≥leo serve para?", a: ["Detectar part√≠culas met√°licas ferrosas indicando desgaste interno.", "Medir a temperatura do √≥leo eletronicamente.", "Filtrar a areia do deserto.", "Controlar a press√£o da bomba."], c: 0},
  {q: "A \"c√¢mara de combust√£o anular\" possui a vantagem de?", a: ["Melhor distribui√ß√£o de temperatura e menor peso.", "Ser mais f√°cil de reparar em campo.", "N√£o precisar de ignitores.", "Operar apenas com gasolina verde."], c: 0},
  {q: "O tempo de \"trabalho\" ou \"pot√™ncia\" come√ßa quando?", a: ["A centelha inflama a mistura perto do PMS.", "O pist√£o atinge o PMI.", "A v√°lvula de admiss√£o abre.", "O motor de partida √© acionado."], c: 0},
  {q: "O \"passo reverso\" da h√©lice cria uma tra√ß√£o?", a: ["Para tr√°s, auxiliando na parada da aeronave.", "Para cima, aumentando a sustenta√ß√£o.", "Nula.", "Que faz o motor girar ao contr√°rio."], c: 0},
  {q: "O ar que \"contorna\" o n√∫cleo do motor turbofan (bypass air)?", a: ["Gera a maior parte do empuxo em motores de alto bypass.", "√â usado para pressurizar a cabine.", "N√£o serve para nada, √© apenas arrasto.", "Sai pela frente do motor."], c: 0},
  {q: "O \"platinado\" abre para?", a: ["Interromper a corrente prim√°ria e induzir alta tens√£o na secund√°ria.", "Ligar as luzes de navega√ß√£o.", "Injetar combust√≠vel no cilindro.", "Aliviar a press√£o do c√°rter."], c: 0},
  {q: "O \"moente\" √© a parte do eixo de manivelas onde?", a: ["A biela √© conectada.", "O eixo √© apoiado nos mancais principais.", "A h√©lice √© parafusada.", "O magneto √© instalado."], c: 0},
  {q: "A \"zona prim√°ria\" da c√¢mara de combust√£o √© onde?", a: ["Ocorre a queima real da mistura.", "O ar √© resfriado para entrar na turbina.", "O √≥leo √© pulverizado.", "Os gases saem para a atmosfera."], c: 0},
  {q: "O \"conector de igni√ß√£o\" (spark plug lead) √© blindado para?", a: ["Evitar interfer√™ncia de r√°dio (EMI).", "N√£o quebrar com a vibra√ß√£o.", "Manter os cabos aquecidos.", "Evitar choque el√©trico no mec√¢nico."], c: 0},
  {q: "A \"alheta de refrigera√ß√£o\" quebrada em um cilindro pode causar?", a: ["Um ponto quente no cilindro e poss√≠vel falha estrutural.", "Aumento imediato da velocidade da aeronave.", "Vazamento de combust√≠vel.", "Queda da press√£o de √≥leo."], c: 0},
  {q: "O \"indicador de fluxo de combust√≠vel\" (fuel flow) em motores injetados mede?", a: ["A press√£o nos bicos, calibrada em gal√µes ou libras por hora.", "O n√≠vel no tanque de asa.", "A temperatura da gasolina.", "A rota√ß√£o da bomba mec√¢nica."], c: 0},
  {q: "O \"disco de turbina\" √© fixado ao eixo atrav√©s de?", a: ["Estrias, parafusos ou acoplamentos de precis√£o.", "Pregos de a√ßo.", "Solda de estanho.", "Cordas de nylon de alta resist√™ncia."], c: 0},
  {q: "A h√©lice \"hidrom√°tica\" utiliza?", a: ["√ìleo sob press√£o para todas as mudan√ßas de passo.", "Contrapesos e for√ßa centr√≠fuga apenas.", "Cabos de a√ßo ligados √† manete.", "Motores el√©tricos de passo a passo."], c: 0},
  {q: "O \"vazamento interno\" em um tucho hidr√°ulico causa?", a: ["Ru√≠do met√°lico (batida) e perda de efici√™ncia na abertura da v√°lvula.", "Aumento da compress√£o do cilindro.", "Quebra imediata do pist√£o.", "Fogo no carburador."], c: 0},
  {q: "A se√ß√£o de \"estiramento\" (diffuser) no compressor centr√≠fugo serve para?", a: ["Converter a energia de velocidade em energia de press√£o.", "Aumentar a velocidade do som.", "Diminuir o consumo de √≥leo.", "Separar o ar do combust√≠vel."], c: 0},
  {q: "O \"selo de √≥leo\" (oil seal) do tipo anel de carbono √© usado em?", a: ["Eixos de alta rota√ß√£o em motores a rea√ß√£o.", "Pneus do trem de pouso.", "Janelas da cabine.", "Portas de servi√ßo."], c: 0},
  {q: "O \"per√≠odo de amaciamento\" de um motor novo serve para?", a: ["Permitir o assentamento correto dos an√©is de segmento e cilindros.", "Queimar o excesso de tinta interna.", "Testar se a h√©lice n√£o vai cair.", "Gastar o combust√≠vel antigo."], c: 0},
  {q: "Para que a h√©lice hidrom√°tica entre em bandeira, a v√°lvula distribuidora deve ser deslocada por?", a: ["Press√£o de ar.", "A√ß√£o mec√¢nica.", "For√ßa centr√≠fuga.", "Press√£o de √≥leo."], c: 3},
  {q: "O motor a rea√ß√£o que possui apenas um conjunto rotativo, denomina-se?", a: ["Dual-spool.", "Misto.", "Simples (single-spool).", "Composto."], c: 2},
  {q: "No motor a rea√ß√£o, a queima ocorre na se√ß√£o de?", a: ["Compress√£o.", "Difusora.", "Combust√£o.", "Turbina."], c: 2},
  {q: "O componente que tem a fun√ß√£o de transformar o movimento retil√≠neo do pist√£o em movimento circular √© o?", a: ["Eixo de manivelas.", "Eixo de ressaltos.", "Tucho.", "Balancim."], c: 0},
  {q: "A fun√ß√£o do sistema de lubrifica√ß√£o √© reduzir o atrito e?", a: ["Arrefecer as partes m√≥veis.", "Aumentar a temperatura.", "Diminuir a folga dos an√©is.", "Facilitar a detona√ß√£o."], c: 0},
  {q: "A cor do combust√≠vel JET A-1 √©?", a: ["Azul.", "Verde.", "Incolor ou levemente palha.", "P√∫rpura."], c: 2},
  {q: "O componente que fornece ar sob press√£o para a cabine em avi√µes a jato √© o?", a: ["Compressor (bleed air).", "Escapamento.", "Fan frontal.", "Difusor."], c: 0},
  {q: "O passo da h√©lice que proporciona melhor desempenho na decolagem √© o?", a: ["Passo m√≠nimo (√¢ngulo pequeno).", "Passo m√°ximo.", "Passo bandeira.", "Passo reverso."], c: 0},
  {q: "O dispositivo que evita o retorno da chama para o carburador denomina-se?", a: ["Abafador de chamas (flame arrester).", "V√°lvula de corte.", "Injetor.", "Dreno de duto."], c: 0},
  {q: "O motor radial possui os cilindros dispostos?", a: ["Em c√≠rculo ao redor do c√°rter.", "Em duas fileiras opostas.", "Em linha vertical.", "Em formato de \"X\"."], c: 0},
  {q: "A finalidade do intercooler nos motores turboalimentados √©?", a: ["Reduzir a temperatura do ar de admiss√£o.", "Aumentar a temperatura do combust√≠vel.", "Resfriar o √≥leo do governador.", "Lubrificar o compressor."], c: 0},
  {q: "O instrumento que indica a press√£o do ar que entra nos cilindros √© o?", a: ["Manifold Pressure.", "Tac√¥metro.", "EGT.", "CHT."], c: 0},
  {q: "A queima do combust√≠vel no motor convencional ocorre no tempo de?", a: ["Expans√£o (pot√™ncia).", "Compress√£o.", "Admiss√£o.", "Escapamento."], c: 0},
  {q: "Conforme o pist√£o se move para baixo no cilindro, ele aspira a mistura?", a: ["Ar/combust√≠vel.", "Porcentagem de nitro.", "H2o.", "Co2."], c: 0},
  {q: "As bombas que circulam o √≥leo atrav√©s do motor e as que retornam o √≥leo para o reservat√≥rio s√£o, respectivamente, do tipo?", a: ["Press√£o e suc√ß√£o (scavenge).", "Suc√ß√£o e press√£o.", "Press√£o e press√£o.", "Suc√ß√£o e suc√ß√£o."], c: 0},
  {q: "No motor a rea√ß√£o, o trocador de calor combust√≠vel/√≥leo tem a finalidade de?", a: ["Pr√© aquecer o combust√≠vel e o √≥leo.", "Pr√©-aquecer o combust√≠vel e resfriar o √≥leo.", "Resfriar o combust√≠vel e aquecer o √≥leo.", "Resfriar o combust√≠vel e o √≥leo."], c: 1},
  {q: "O sistema de detec√ß√£o de fogo que consiste de pontos de jun√ß√£o de metais diferentes √© chamado de?", a: ["Spot.", "Termopar ou par t√©rmico.", "Interruptor t√©rmico.", "Circuito cont√≠nuo."], c: 1},
  {q: "Havendo necessidade de substituir uma palheta danificada no disco de turbina de um motor a rea√ß√£o, al√©m da palheta danificada deveremos substituir qual palheta?", a: ["Todas as palhetas.", "A palheta seguinte.", "A palheta oposta (para balanceamento).", "Somente a palheta defeituosa."], c: 2},
  {q: "Se durante o funcionamento normal do motor \"n√£o\" ocorrer entupimento no filtro de √≥leo a?", a: ["V√°lvula by-pass permanecer√° fechada.", "V√°lvula by-pass abrir√°.", "Press√£o de √≥leo cair√° a zero.", "Bomba de √≥leo parar√° de girar."], c: 0}
];
    // ============================================
    // CONFIGURA√á√ïES DO SISTEMA
    // ============================================
    const QUESTIONS_PER_SIMULADO_PADRAO = 20;
    const MIN_WRONG_QUESTIONS_FOR_SIMULADO = 1;
    const MIN_PERCENT_FOR_SUCCESS = 70;
    
    // ============================================
    // VARI√ÅVEIS GLOBAIS
    // ============================================
    let QUESTIONS_PER_SIMULADO = QUESTIONS_PER_SIMULADO_PADRAO;
    let API_URL = "https://script.google.com/macros/s/AKfycbwcX8bNdrDQZ6sRB1sbG0COJe7aGYyBlOCPkno2JxbM-59_-FsWt4LCccUQ8DBLTy1S5g/exec";
    let EMAIL_DESTINO = "ewerton.andriel@hotmail.com";
    
    let TIME_LIMIT = 0;
    let currentQuestions = [];
    let userAnswers = [];
    let timeLeft = 0;
    let timerId;
    let currentQuestionIndex = 0;
    let autoNavEnabled = true;
    let usedQuestionsHistory = [];
    let currentSimuladoIndices = [];
    let totalSimulados = 1;
    let currentSimuladoNumber = 1;
    
    // VARI√ÅVEIS DO SISTEMA DE REPORTE
    let currentReportQuestionIndex = null;
    let reportsHistory = [];

    // TIPOS DE REPORTE
    const REPORT_TYPES = {
        error: "‚ùå Quest√£o com erro",
        wrong_answer: "‚ö†Ô∏è Resposta incorreta", 
        confusing: "ü§î Enunciado confuso",
        alternative: "üî§ Alternativas erradas",
        other: "üìù Outro problema"
    };
    
    // ============================================
    // VARI√ÅVEIS PARA SISTEMA DE REFOR√áO
    // ============================================
    let wrongQuestionsHistory = [];
    const WRONG_QUESTIONS_KEY = 'wrong_questions_history';
    const LAST_OFFER_KEY = 'last_reforco_offer';
    
    // ============================================
    // CHAVE PARA SESS√ÉO ATUAL
    // ============================================
    const SESSION_ID_KEY = 'current_session_id';
    const CURRENT_QUESTIONS_KEY = 'current_session_questions';
    const CURRENT_QUESTION_INDEX_KEY = 'current_question_index';
    const USER_ANSWERS_KEY = 'user_answers';
    const TIME_LEFT_KEY = 'time_left';
    const AUTO_NAV_KEY = 'auto_nav';
    const SIMULADO_STARTED_KEY = 'simulado_started';
    const CURRENT_SIMULADO_NUMBER_KEY = 'current_simulado_number';
    
    // ============================================
    // NOVA FUN√á√ÉO: EMBARALHAR ALTERNATIVAS
    // ============================================
    
    function shuffleAlternatives(question) {
        // Cria uma c√≥pia da quest√£o
        const shuffledQuestion = { ...question };
        
        // Cria um array de √≠ndices [0, 1, 2, 3...]
        const indices = Array.from({ length: question.a.length }, (_, i) => i);
        
        // Embaralha os √≠ndices
        const shuffledIndices = shuffleArray(indices);
        
        // Cria novas alternativas com a ordem embaralhada
        const shuffledAlternatives = shuffledIndices.map(index => question.a[index]);
        
        // Encontra o novo √≠ndice da resposta correta
        const newCorrectIndex = shuffledIndices.indexOf(question.c);
        
        // Atualiza a quest√£o com as alternativas embaralhadas e o novo √≠ndice correto
        shuffledQuestion.a = shuffledAlternatives;
        shuffledQuestion.c = newCorrectIndex;
        shuffledQuestion.shuffledIndices = shuffledIndices; // Guarda o mapeamento para o gabarito
        shuffledQuestion.originalCorrectIndex = question.c; // Guarda o √≠ndice original para refer√™ncia
        
        return shuffledQuestion;
    }
    
    // ============================================
    // FUN√á√ÉO SELECTRANDOMQUESTIONS ATUALIZADA
    // ============================================

    function selectRandomQuestions(forceFirstSimulado = false) {
        const totalQuestions = masterBank.length;
        
        if (totalQuestions === 0) {
            alert("‚ö†Ô∏è O banco de quest√µes est√° vazio! Adicione quest√µes no c√≥digo.");
            return [];
        }
        
        const config = calcularConfiguracaoSimulados();
        console.log(config.mensagem);
        
        let availableQuestions = [];
        for (let i = 0; i < totalQuestions; i++) {
            availableQuestions.push(i);
        }
        
        // Remove as j√° usadas
        if (usedQuestionsHistory.length > 0 && !forceFirstSimulado) {
            availableQuestions = availableQuestions.filter(index => 
                !usedQuestionsHistory.includes(index)
            );
        }
        
        const availableCount = availableQuestions.length;
        let questionsToSelect;
        
        if (availableCount === 0) {
            if (confirm(`Todas as ${totalQuestions} quest√µes j√° foram usadas!\n\nDeseja reiniciar o hist√≥rico?`)) {
                usedQuestionsHistory = [];
                localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                availableQuestions = Array.from({length: totalQuestions}, (_, i) => i);
                questionsToSelect = Math.min(QUESTIONS_PER_SIMULADO, totalQuestions);
                alert('Hist√≥rico reiniciado!');
                forceFirstSimulado = true;
            } else {
                availableQuestions = Array.from({length: totalQuestions}, (_, i) => i);
                questionsToSelect = Math.min(QUESTIONS_PER_SIMULADO, totalQuestions);
            }
        } else if (availableCount >= QUESTIONS_PER_SIMULADO) {
            questionsToSelect = QUESTIONS_PER_SIMULADO;
        } else if (availableCount >= 5) {
            questionsToSelect = availableCount;
        } else {
            if (confirm(`S√≥ restam ${availableCount} quest√µes!\n\nDeseja fazer simulado com essas quest√µes?`)) {
                questionsToSelect = availableCount;
            } else {
                if (confirm(`Deseja reiniciar o hist√≥rico?`)) {
                    usedQuestionsHistory = [];
                    localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                    availableQuestions = Array.from({length: totalQuestions}, (_, i) => i);
                    questionsToSelect = Math.min(QUESTIONS_PER_SIMULADO, totalQuestions);
                    forceFirstSimulado = true;
                } else {
                    questionsToSelect = availableCount;
                }
            }
        }
        
        if (totalQuestions <= 27) {
            questionsToSelect = totalQuestions;
            availableQuestions = Array.from({length: totalQuestions}, (_, i) => i);
        }
        
        const shuffledQuestions = shuffleArray(availableQuestions);
        const selectedIndices = shuffledQuestions.slice(0, questionsToSelect);
        
        currentSimuladoIndices = selectedIndices;
        
        if (forceFirstSimulado || usedQuestionsHistory.length === 0) {
            currentSimuladoNumber = 1;
        } else if (selectedIndices.length > 0) {
            const usedCount = usedQuestionsHistory.length;
            const simuladoIndex = Math.floor(usedCount / QUESTIONS_PER_SIMULADO);
            currentSimuladoNumber = Math.min(simuladoIndex + 1, totalSimulados);
        } else {
            currentSimuladoNumber = 1;
        }
        
        if (currentSimuladoNumber > totalSimulados) {
            currentSimuladoNumber = totalSimulados;
        }
        
        console.log(`Simulado configurado: ${currentSimuladoNumber}/${totalSimulados}`);
        
        // ALTERA√á√ÉO: Embaralha as alternativas de cada quest√£o selecionada
        const selectedQuestions = selectedIndices.map(index => {
            const originalQuestion = masterBank[index];
            return shuffleAlternatives({
                ...originalQuestion, 
                originalIndex: index
            });
        });
        
        return selectedQuestions;
    }

    // ============================================
    // FUN√á√ÉO: GENERATE WRONG QUESTIONS SIMULADO ATUALIZADA
    // ============================================
    
    function generateWrongQuestionsSimulado() {
        console.log(`Gerando simulado de refor√ßo com ${wrongQuestionsHistory.length} quest√µes erradas...`);
        
        if (wrongQuestionsHistory.length === 0) {
            console.error('Nenhuma quest√£o errada no hist√≥rico');
            return [];
        }
        
        let availableWrongQuestions = [...wrongQuestionsHistory];
        availableWrongQuestions = shuffleArray(availableWrongQuestions);
        
        const selectedIndices = availableWrongQuestions;
        
        console.log(`Selecionadas ${selectedIndices.length} quest√µes para o simulado de refor√ßo`);
        
        // ALTERA√á√ÉO: Embaralha as alternativas de cada quest√£o de refor√ßo
        const questions = selectedIndices.map(index => {
            if (index >= 0 && index < masterBank.length) {
                const originalQuestion = masterBank[index];
                return shuffleAlternatives({
                    ...originalQuestion,
                    originalIndex: index,
                    isWrongQuestion: true
                });
            }
            return null;
        }).filter(q => q !== null);
        
        return questions;
    }
    
    // ============================================
    // FUN√á√ÉO RENDERCURRENTQUESTION ATUALIZADA
    // ============================================
    
    function renderCurrentQuestion() {
        const container = document.getElementById('quiz-content');
        
        if (!currentQuestions || currentQuestions.length === 0) {
            container.innerHTML = '<div class="question-block-mini">Erro: Nenhuma quest√£o carregada.</div>';
            return;
        }
        
        const question = currentQuestions[currentQuestionIndex];
        
        container.innerHTML = `
            <div class="question-block-mini">
                <div class="question-text-mini">
                    ${currentQuestionIndex + 1}. ${question.q}
                </div>
                <div class="options-mini">
                    ${question.a.map((opt, i) => `
                        <label class="option-mini" id="option-${i}">
                            <input type="radio" name="currentQuestion" value="${i}" 
                                   ${userAnswers[currentQuestionIndex] === i ? 'checked' : ''}
                                   onchange="selectAnswer(${i})">
                            ${opt}
                        </label>
                    `).join('')}
                </div>
                <button class="report-btn" onclick="openReportModal(${currentQuestionIndex})">
                    <span>‚ö†Ô∏è</span> Reportar Problema
                </button>
            </div>
        `;
    }
    
    // ============================================
    // FUN√á√ÉO FINALIZEQUIZ ATUALIZADA
    // ============================================
    
    function finalizeQuiz() {
        clearInterval(timerId);
        
        const answeredCount = getAnsweredCount();
        if (answeredCount !== currentQuestions.length && !confirm(`Respondidas: ${answeredCount}/${currentQuestions.length}. Finalizar?`)) {
            startTimer();
            return;
        }
        
        let finalScore = 0;
        userAnswers.forEach((answer, index) => {
            if (answer !== null && answer === currentQuestions[index].c) {
                finalScore++;
            }
        });
        
        const percent = currentQuestions.length > 0 ? Math.round((finalScore / currentQuestions.length) * 100) : 0;
        const feedback = document.getElementById('feedback-msg');
        
        if (percent >= 70) {
            feedback.textContent = "üéâ Excelente!";
            feedback.style.color = "var(--success)";
        } else if (percent >= 50) {
            feedback.textContent = "üëç Quase l√°!";
            feedback.style.color = "var(--accent)";
        } else {
            feedback.textContent = "üí™ Continue!";
            feedback.style.color = "var(--danger)";
        }
        
        if (currentQuestions[0]?.isWrongQuestion) {
            removeCorrectQuestionsFromHistory();
        } else {
            addWrongQuestionsToHistory();
        }
        
        if (currentSimuladoIndices.length > 0 && !currentQuestions[0]?.isWrongQuestion) {
            usedQuestionsHistory.push(...currentSimuladoIndices);
            usedQuestionsHistory = [...new Set(usedQuestionsHistory)];
            localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
        }
        
        clearSessionData();
        
        let quizHTML = '';
        currentQuestions.forEach((question, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer === question.c;
            
            // Para o gabarito, usamos as alternativas como foram mostradas
            quizHTML += `
                <div class="question-block-mini">
                    <button class="report-gabarito-btn" onclick="openReportModal(${index})" title="Reportar problema">
                        ‚ö†Ô∏è
                    </button>
                    
                    <div class="question-text-mini">
                        ${index + 1}. ${question.q}
                    </div>
                    <div class="options-mini">
                        ${question.a.map((opt, i) => {
                            let classes = 'option-mini';
                            if (i === question.c) classes += ' correct-answer';
                            else if (userAnswer === i && !isCorrect) classes += ' wrong-answer';
                            
                            return `<label class="${classes}">
                                <input type="radio" disabled ${userAnswer === i ? 'checked' : ''}>
                                ${opt}
                                ${userAnswer === i ? '<span style="margin-left: auto; font-size: 0.6rem; color: #6c757d;">(sua resposta)</span>' : ''}
                                ${i === question.c && userAnswer !== i ? '<span style="margin-left: auto; font-size: 0.6rem; color: var(--success);">(correta)</span>' : ''}
                            </label>`;
                        }).join('')}
                    </div>
                </div>
            `;
        });
        
        document.getElementById('quiz-content').innerHTML = quizHTML;
        document.getElementById('final-score').textContent = `${finalScore}/${currentQuestions.length}`;
        document.getElementById('final-percent').textContent = `${percent}%`;
        
        const motivationElement = document.getElementById('motivation-message');
        let motivationHTML = '';
        
        if (currentQuestions[0]?.isWrongQuestion) {
            if (percent >= MIN_PERCENT_FOR_SUCCESS) {
                motivationHTML = `‚úÖ <strong>PARAB√âNS!</strong> Voc√™ superou suas dificuldades!`;
                motivationElement.className = 'motivation-message motivation-success';
            } else {
                motivationHTML = `‚ö° <strong>PRECISA MELHORAR</strong><br>`;
                motivationHTML += `Voc√™ acertou ${finalScore} de ${currentQuestions.length}.<br>`;
                motivationHTML += `Faltam ${MIN_PERCENT_FOR_SUCCESS - percent}% para a meta de ${MIN_PERCENT_FOR_SUCCESS}%.`;
                motivationElement.className = 'motivation-message motivation-warning';
            }
        } else {
            if (percent >= MIN_PERCENT_FOR_SUCCESS) {
                motivationHTML = `üéØ <strong>√ìTIMO DESEMPENHO!</strong>`;
                motivationElement.className = 'motivation-message motivation-success';
            } else {
                motivationHTML = `üìö <strong>CONTINUE ESTUDANDO!</strong>`;
                motivationElement.className = 'motivation-message motivation-warning';
            }
        }
        
        motivationElement.innerHTML = motivationHTML;
        
        const totalQuestions = masterBank.length;
        const uniqueUsed = [...new Set(usedQuestionsHistory)];
        const remainingQuestions = Math.max(0, totalQuestions - uniqueUsed.length);
        const wrongCount = wrongQuestionsHistory.length;
        
        let summaryText = '';
        let showNewSimuladoBtn = true;
        let showReiniciarBancoBtn = false;
        let showNovoSimuladoReforcoBtn = false;
        
        if (currentQuestions[0]?.isWrongQuestion) {
            summaryText = `‚ö° <strong>SIMULADO DE REFOR√áO FINALIZADO</strong><br>`;
            summaryText += `Voc√™ revisou ${currentQuestions.length} quest√µes que errou anteriormente.<br>`;
            summaryText += `Quest√µes ainda erradas: <strong>${wrongCount}</strong>`;
            showNewSimuladoBtn = false;
            showNovoSimuladoReforcoBtn = true;
            
            if (percent < MIN_PERCENT_FOR_SUCCESS) {
                showReiniciarBancoBtn = true;
            }
        } else if (remainingQuestions === 0) {
            summaryText = `üéØ <strong>COMPLETOU TODAS AS ${totalQuestions} QUEST√ïES!</strong><br>`;
            summaryText += `Quest√µes erradas: <strong>${wrongCount}</strong>`;
            
            if (wrongCount < MIN_WRONG_QUESTIONS_FOR_SIMULADO) {
                showNewSimuladoBtn = false;
            }
        } else {
            summaryText = `Restam: <strong>${remainingQuestions}</strong> | Usadas: <strong>${uniqueUsed.length}</strong><br>`;
            summaryText += `Quest√µes erradas: <strong>${wrongCount}</strong>`;
        }
        
        document.getElementById('simulado-summary').innerHTML = summaryText;
        
        document.querySelector('.nav-buttons').style.display = 'none';
        document.getElementById('results').style.display = 'block';
        document.getElementById('finish-btn').style.display = 'none';
        document.getElementById('restart-btn').style.display = 'block';
        
        document.getElementById('wrong-questions-btn').style.display = 'none';
        document.getElementById('reiniciar-banco-btn').style.display = showReiniciarBancoBtn ? 'block' : 'none';
        document.getElementById('new-simulado-btn').style.display = showNewSimuladoBtn ? 'block' : 'none';
        document.getElementById('novo-simulado-reforco-btn').style.display = showNovoSimuladoReforcoBtn ? 'block' : 'none';
        
        updateSimuladoInfo();
        updateReforcoButton();
        updateReiniciarBancoButton();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
        
        setTimeout(() => {
            if (canOfferReforcoSimulado()) {
                console.log('Oferecendo simulado de refor√ßo...');
                setTimeout(() => {
                    offerWrongQuestionsSimulado();
                }, 1500);
            } else {
                console.log('N√£o pode oferecer refor√ßo no momento');
            }
        }, 500);
    }
    
    // ============================================
    // FUN√á√ïES DE CONFIGURA√á√ÉO DO SIMULADO
    // ============================================
    
    function calcularConfiguracaoSimulados() {
        const totalQuestions = masterBank.length;
        
        if (totalQuestions <= 27) {
            totalSimulados = 1;
            QUESTIONS_PER_SIMULADO = totalQuestions;
            return {
                totalSimulados: 1,
                questionsPerSimulado: totalQuestions,
                mensagem: `Banco com ${totalQuestions} quest√µes ‚Üí 1 √∫nico simulado`
            };
        } else if (totalQuestions >= 28 && totalQuestions <= 39) {
            totalSimulados = 2;
            const questionsPerSimulado = Math.ceil(totalQuestions / 2);
            QUESTIONS_PER_SIMULADO = questionsPerSimulado;
            return {
                totalSimulados: 2,
                questionsPerSimulado: questionsPerSimulado,
                mensagem: `Banco com ${totalQuestions} quest√µes ‚Üí 2 simulados de ~${questionsPerSimulado} quest√µes cada`
            };
        } else {
            totalSimulados = Math.ceil(totalQuestions / QUESTIONS_PER_SIMULADO_PADRAO);
            QUESTIONS_PER_SIMULADO = QUESTIONS_PER_SIMULADO_PADRAO;
            return {
                totalSimulados: totalSimulados,
                questionsPerSimulado: QUESTIONS_PER_SIMULADO_PADRAO,
                mensagem: `Banco com ${totalQuestions} quest√µes ‚Üí ${totalSimulados} simulados de 20 quest√µes`
            };
        }
    }
    
    // ============================================
    // NOVA FUN√á√ÉO: NOVO SIMULADO AP√ìS REFOR√áO
    // ============================================
    
    function novoSimuladoAposReforco() {
        const totalQuestions = masterBank.length;
        const remainingQuestions = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        
        if (remainingQuestions === 0) {
            if (confirm(`Voc√™ j√° completou todas as ${totalQuestions} quest√µes!\n\nDeseja reiniciar o hist√≥rico e come√ßar um novo simulado?`)) {
                usedQuestionsHistory = [];
                localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                startNewSimuladoFromResults();
            }
        } else {
            if (confirm(`Deseja continuar com as pr√≥ximas quest√µes do banco?\n\nRestam: ${remainingQuestions} quest√µes\nUsadas: ${usedQuestionsHistory.length} quest√µes`)) {
                startNewSimuladoFromResults();
            }
        }
    }
    
    // ============================================
    // FUN√á√ÉO: ATUALIZAR BOT√ÉO NOVO SIMULADO REFOR√áO
    // ============================================
    
    function updateNovoSimuladoReforcoButton() {
        const novoSimuladoBtn = document.getElementById('novo-simulado-reforco-btn');
        if (!novoSimuladoBtn) return;
        
        const isReforco = currentQuestions[0]?.isWrongQuestion;
        const isResultsVisible = document.getElementById('results').style.display === 'block';
        const totalQuestions = masterBank.length;
        const remainingQuestions = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        
        if (isReforco && isResultsVisible) {
            novoSimuladoBtn.style.display = 'block';
            
            if (remainingQuestions === 0) {
                novoSimuladoBtn.innerHTML = `üéØ Novo Simulado (Reiniciar Banco)`;
            } else {
                novoSimuladoBtn.innerHTML = `üéØ Novo Simulado (${remainingQuestions} restantes)`;
            }
        } else {
            novoSimuladoBtn.style.display = 'none';
        }
    }
    
    // ============================================
    // NOVA FUN√á√ÉO: CONTINUAR COM BANCO
    // ============================================
    
    function continuarComBanco() {
        const totalQuestions = masterBank.length;
        const remainingQuestions = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        
        let message = `üìö CONTINUAR COM BANCO\n\n`;
        
        if (remainingQuestions === 0) {
            message += `Voc√™ j√° completou todas as ${totalQuestions} quest√µes!\n`;
            message += `Deseja reiniciar o hist√≥rico e come√ßar um novo simulado?`;
            
            if (confirm(message)) {
                usedQuestionsHistory = [];
                localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                startNewSimuladoFromResults();
            }
        } else {
            message += `Restam ${remainingQuestions} quest√µes no banco.\n`;
            message += `Voc√™ j√° completou ${usedQuestionsHistory.length} quest√µes.\n\n`;
            message += `Deseja continuar com as pr√≥ximas quest√µes do banco?`;
            
            if (confirm(message)) {
                startNewSimuladoFromResults();
            }
        }
    }
    
    // ============================================
    // FUN√á√ÉO: VOLTAR AO IN√çCIO
    // ============================================
    
    function voltarAoInicio() {
        const totalQuestions = masterBank.length;
        
        let message = `üèÅ VOLTAR AO IN√çCIO\n\n`;
        message += `Esta a√ß√£o vai:\n`;
        message += `‚Ä¢ Limpar TODO o hist√≥rico de progresso\n`;
        message += `‚Ä¢ Limpar TODO o hist√≥rico de quest√µes erradas\n`;
        message += `‚Ä¢ Reiniciar completamente o sistema\n`;
        message += `‚Ä¢ Come√ßar um NOVO simulado do zero\n\n`;
        message += `Tem certeza que deseja voltar ao in√≠cio?`;
        
        if (confirm(message)) {
            usedQuestionsHistory = [];
            localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
            
            wrongQuestionsHistory = [];
            saveWrongQuestionsHistory();
            
            localStorage.removeItem(LAST_OFFER_KEY);
            
            clearSessionData();
            
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            currentQuestions = selectRandomQuestions(true);
            
            if (currentQuestions.length === 0) {
                alert("Erro ao gerar novo simulado.");
                return;
            }
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            currentSimuladoNumber = 1;
            
            saveCurrentSessionState();
            
            updatePageTitle();
            document.getElementById('timer').textContent = formatTime(timeLeft);
            document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
            
            startTimer();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateSimuladoInfo();
            updateReforcoButton();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
            
            document.getElementById('motivation-message').innerHTML = '';
            document.getElementById('motivation-message').className = 'motivation-message';
            
            alert(`‚úÖ SISTEMA REINICIADO!\n\n${totalQuestions} quest√µes dispon√≠veis.\nBoa sorte!`);
        }
    }
    
    // ============================================
    // FUN√á√ïES DE HIST√ìRICO CORRIGIDAS
    // ============================================

    function clearHistory() {
        if (confirm(`Limpar hist√≥rico completo?`)) {
            usedQuestionsHistory = [];
            localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
            
            wrongQuestionsHistory = [];
            saveWrongQuestionsHistory();
            
            clearSessionData();
            
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            currentQuestions = selectRandomQuestions(true);
            
            if (currentQuestions.length === 0) {
                alert("N√£o foi poss√≠vel gerar o simulado.");
                return;
            }
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            currentSimuladoNumber = 1;
            
            saveCurrentSessionState();
            
            updatePageTitle();
            document.getElementById('timer').textContent = formatTime(timeLeft);
            document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
            updateSimuladoInfo();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateReforcoButton();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
            
            startTimer();
            
            alert('Hist√≥rico limpo! Novo simulado gerado.');
        }
    }

    // ============================================
    // FUN√á√ÉO GENERATENEWSIMULADO CORRIGIDA
    // ============================================

    function generateNewSimulado() {
        const totalQuestions = masterBank.length;
        const totalAvailable = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        
        let message;
        if (totalAvailable === 0) {
            message = `Todas as quest√µes j√° foram usadas!\n\nDeseja reiniciar o hist√≥rico?`;
        } else if (totalAvailable < QUESTIONS_PER_SIMULADO) {
            message = `S√≥ restam ${totalAvailable} quest√µes.\n\nDeseja fazer simulado com elas?`;
        } else {
            message = `Gerar novo simulado com ${Math.min(QUESTIONS_PER_SIMULADO, totalAvailable)} quest√µes?`;
        }
        
        if (confirm(message)) {
            if (totalAvailable === 0) {
                usedQuestionsHistory = [];
                localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
                alert('Hist√≥rico reiniciado!');
            }
            
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            currentQuestions = selectRandomQuestions(false);
            
            if (currentQuestions.length === 0) {
                alert("Erro ao gerar simulado.");
                return;
            }
            
            const newSessionId = 'session_' + Date.now();
            sessionStorage.setItem(SESSION_ID_KEY, newSessionId);
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            
            saveCurrentSessionState();
            
            updatePageTitle();
            document.getElementById('timer').textContent = formatTime(timeLeft);
            document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
            startTimer();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateSimuladoInfo();
            updateReforcoButton();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
        }
    }

    // ============================================
    // FUN√á√ÉO STARTSIMULADOFROMBANCO CORRIGIDA
    // ============================================

    function startNewSimuladoFromResults() {
        document.getElementById('results').style.display = 'none';
        document.getElementById('finish-btn').style.display = 'block';
        document.getElementById('restart-btn').style.display = 'none';
        document.getElementById('voltar-inicio-btn').style.display = 'none';
        document.getElementById('continuar-banco-btn').style.display = 'none';
        document.getElementById('wrong-questions-btn').style.display = 'none';
        document.getElementById('reiniciar-banco-btn').style.display = 'none';
        document.getElementById('new-simulado-btn').style.display = 'none';
        document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
        document.querySelector('.nav-buttons').style.display = 'flex';
        
        currentQuestions = selectRandomQuestions(false);
        
        if (currentQuestions.length === 0) {
            alert("N√£o foi poss√≠vel gerar novo simulado.");
            return;
        }
        
        const newSessionId = 'session_' + Date.now();
        sessionStorage.setItem(SESSION_ID_KEY, newSessionId);
        
        userAnswers = new Array(currentQuestions.length).fill(null);
        currentQuestionIndex = 0;
        TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
        timeLeft = TIME_LIMIT;
        autoNavEnabled = true;
        
        saveCurrentSessionState();
        
        updatePageTitle();
        document.getElementById('timer').textContent = formatTime(timeLeft);
        document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
        startTimer();
        renderCurrentQuestion();
        updateCounters();
        updateNavButtons();
        updateFinishButton();
        updatePendingQuestions();
        updateSimuladoInfo();
        updateReforcoButton();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
        
        const totalQuestions = masterBank.length;
        const remainingQuestions = Math.max(0, totalQuestions - usedQuestionsHistory.length);
        alert(`‚úÖ NOVO SIMULADO INICIADO!\n\n${currentQuestions.length} quest√µes selecionadas.\n\nRestam ${remainingQuestions} quest√µes no banco.`);
    }
    
    // ============================================
    // FUN√á√ÉO: ATUALIZAR BOT√ÉO VOLTAR AO IN√çCIO
    // ============================================
    
    function updateVoltarInicioButton() {
        const voltarBtn = document.getElementById('voltar-inicio-btn');
        if (!voltarBtn) return;
        
        const isReforco = currentQuestions[0]?.isWrongQuestion;
        const isResultsVisible = document.getElementById('results').style.display === 'block';
        const percent = parseInt(document.getElementById('final-percent')?.textContent?.replace('%', '') || 0);
        
        if (isReforco && isResultsVisible && percent >= MIN_PERCENT_FOR_SUCCESS) {
            voltarBtn.style.display = 'block';
            voltarBtn.innerHTML = `üèÅ Voltar ao In√≠cio (Limpar Tudo)`;
        } else {
            voltarBtn.style.display = 'none';
        }
    }
    
    // ============================================
    // CORRE√á√ÉO PRINCIPAL: FUN√á√ÉO UPDATESIMULADOINFO
    // ============================================
    
    function updateSimuladoInfo() {
        const totalQuestions = masterBank.length;
        
        const currentQuestionsCount = currentQuestions ? currentQuestions.length : 0;
        
        let remaining = 0;
        if (currentQuestions && currentQuestions[0]?.isWrongQuestion) {
            const wrongCount = wrongQuestionsHistory.length;
            const successRate = Math.round(((totalQuestions - wrongCount) / totalQuestions) * 100);
            
            document.getElementById('simulado-info').innerHTML = `
                <div style="color: var(--danger); font-weight: bold; text-align: center;">‚ö° SIMULADO DE REFOR√áO</div>
                <div style="text-align: center; font-size: 0.6rem;">Quest√µes que voc√™ errou anteriormente</div>
                <div class="simulado-stats">
                    <span>Quest√µes: ${currentQuestionsCount}</span>
                    <span>Acertos gerais: ${successRate}%</span>
                </div>
            `;
            document.getElementById('simulado-info').style.display = 'block';
            return;
        }
        
        const uniqueUsed = [...new Set(usedQuestionsHistory)];
        const recentUsed = uniqueUsed.length;
        remaining = Math.max(0, totalQuestions - recentUsed);
        const percentUsed = totalQuestions > 0 ? Math.round((recentUsed / totalQuestions) * 100) : 0;
        
        let simuladoNumberText = '';
        if (totalSimulados > 1) {
            const simuladoAtual = Math.min(currentSimuladoNumber, totalSimulados);
            simuladoNumberText = ` (${simuladoAtual}/${totalSimulados})`;
        }
        
        document.getElementById('simulado-info').innerHTML = `
            <div>Simulado${simuladoNumberText}: <span id="questions-per-simulado">${currentQuestionsCount}</span> quest√µes</div>
            <div class="simulado-stats">
                <span id="remaining-questions">Dispon√≠veis: ${remaining}</span>
                <span id="recent-used">Usadas: ${recentUsed} (${percentUsed}%)</span>
            </div>
            
            <div class="history-controls">
                <button class="clear-history-btn" onclick="clearHistory()">üóëÔ∏è Limpar Hist√≥rico</button>
                <button class="info-history-btn" onclick="showHistoryInfo()">‚ÑπÔ∏è Info</button>
            </div>
        `;
        document.getElementById('simulado-info').style.display = 'block';
        
        const questionsPerSimuladoEl = document.getElementById('questions-per-simulado');
        const remainingQuestionsEl = document.getElementById('remaining-questions');
        const recentUsedEl = document.getElementById('recent-used');
        
        if (questionsPerSimuladoEl) questionsPerSimuladoEl.textContent = currentQuestionsCount;
        if (remainingQuestionsEl) remainingQuestionsEl.textContent = `Dispon√≠veis: ${remaining}`;
        if (recentUsedEl) recentUsedEl.textContent = `Usadas: ${recentUsed} (${percentUsed}%)`;
    }
    
    // ============================================
    // CORRE√á√ÉO: FUN√á√ÉO UPDATECONTINUARBANCOBUTTON
    // ============================================
    
    function updateContinuarBancoButton() {
        const continuarBtn = document.getElementById('continuar-banco-btn');
        if (!continuarBtn) return;
        
        const totalQuestions = masterBank.length;
        const uniqueUsed = [...new Set(usedQuestionsHistory)];
        const remainingQuestions = Math.max(0, totalQuestions - uniqueUsed.length);
        
        const isResultsVisible = document.getElementById('results').style.display === 'block';
        const isReforco = currentQuestions[0]?.isWrongQuestion;
        const percent = parseInt(document.getElementById('final-percent')?.textContent?.replace('%', '') || 0);
        
        if (isResultsVisible && !isReforco && remainingQuestions > 0) {
            continuarBtn.style.display = 'block';
            continuarBtn.innerHTML = `üìö Continuar com Banco (${remainingQuestions} restantes)`;
        } else if (isResultsVisible && isReforco && percent >= MIN_PERCENT_FOR_SUCCESS) {
            continuarBtn.style.display = 'block';
            continuarBtn.innerHTML = `üìö Voltar ao Banco (${remainingQuestions} restantes)`;
        } else {
            continuarBtn.style.display = 'none';
        }
    }
    
    // ============================================
    // FUN√á√ÉO: START WRONG QUESTIONS SIMULADO
    // ============================================
    
    function startWrongQuestionsSimulado() {
        console.log('Iniciando simulado de refor√ßo...');
        
        currentQuestions = generateWrongQuestionsSimulado();
        
        if (currentQuestions.length === 0) {
            alert('N√£o h√° quest√µes erradas para fazer o simulado de refor√ßo.');
            updateReforcoButton();
            return;
        }
        
        currentSimuladoNumber = totalSimulados + 1;
        
        userAnswers = new Array(currentQuestions.length).fill(null);
        currentQuestionIndex = 0;
        TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
        timeLeft = TIME_LIMIT;
        autoNavEnabled = true;
        
        saveCurrentSessionState();
        
        updatePageTitle();
        document.getElementById('timer').textContent = formatTime(timeLeft);
        document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
        
        document.getElementById('results').style.display = 'none';
        document.getElementById('finish-btn').style.display = 'block';
        document.getElementById('restart-btn').style.display = 'none';
        document.getElementById('voltar-inicio-btn').style.display = 'none';
        document.getElementById('continuar-banco-btn').style.display = 'none';
        document.getElementById('wrong-questions-btn').style.display = 'none';
        document.getElementById('reiniciar-banco-btn').style.display = 'none';
        document.getElementById('new-simulado-btn').style.display = 'none';
        document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
        document.querySelector('.nav-buttons').style.display = 'flex';
        
        const wrongCount = wrongQuestionsHistory.length;
        const totalQuestions = masterBank.length;
        const successRate = Math.round(((totalQuestions - wrongCount) / totalQuestions) * 100);
        
        document.getElementById('simulado-info').innerHTML = `
            <div style="color: var(--danger); font-weight: bold; text-align: center;">‚ö° SIMULADO DE REFOR√áO</div>
            <div style="text-align: center; font-size: 0.6rem;">Quest√µes que voc√™ errou anteriormente</div>
            <div class="simulado-stats">
                <span>Quest√µes: ${currentQuestions.length}</span>
                <span>Acertos anteriores: ${successRate}%</span>
            </div>
        `;
        document.getElementById('simulado-info').style.display = 'block';
        
        startTimer();
        renderCurrentQuestion();
        updateCounters();
        updateNavButtons();
        updateFinishButton();
        updatePendingQuestions();
        
        updateReforcoButton();
        updateReiniciarBancoButton();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
        
        alert(`üéØ SIMULADO DE REFOR√áO INICIADO!\n\n${currentQuestions.length} quest√µes que voc√™ errou anteriormente.\nBoa sorte!`);
    }
    
    // ============================================
    // FUN√á√ÉO: UPDATE REFORCO BUTTON
    // ============================================
    
    function updateReforcoButton() {
        const wrongBtn = document.getElementById('wrong-questions-btn');
        if (!wrongBtn) return;
        
        const hasEnough = hasEnoughWrongQuestionsForSimulado();
        const isReforcoActive = currentQuestions[0]?.isWrongQuestion;
        const isResultsVisible = document.getElementById('results').style.display === 'block';
        
        if (hasEnough && !isReforcoActive && isResultsVisible) {
            wrongBtn.style.display = 'block';
            wrongBtn.innerHTML = `‚ö° Simulado de Refor√ßo (${wrongQuestionsHistory.length})`;
        } else {
            wrongBtn.style.display = 'none';
        }
    }
    
    // ============================================
    // FUN√á√ÉO: UPDATE REINICIAR BANCO BUTTON
    // ============================================
    
    function updateReiniciarBancoButton() {
        const reiniciarBtn = document.getElementById('reiniciar-banco-btn');
        if (!reiniciarBtn) return;
        
        const isReforco = currentQuestions[0]?.isWrongQuestion;
        const isResultsVisible = document.getElementById('results').style.display === 'block';
        const percent = parseInt(document.getElementById('final-percent')?.textContent?.replace('%', '') || 0);
        
        if (isReforco && isResultsVisible && percent < MIN_PERCENT_FOR_SUCCESS) {
            reiniciarBtn.style.display = 'block';
            reiniciarBtn.innerHTML = `üîÑ Reiniciar Banco (${masterBank.length} quest√µes)`;
        } else {
            reiniciarBtn.style.display = 'none';
        }
    }
    
    // ============================================
    // FUN√á√ÉO: REINICIAR BANCO COMPLETO
    // ============================================
    
    function reiniciarBancoCompleto() {
        const totalQuestions = masterBank.length;
        const wrongCount = wrongQuestionsHistory.length;
        
        let message = `üîÑ REINICIAR BANCO COMPLETO\n\n`;
        message += `Voc√™ n√£o atingiu 70% no simulado de refor√ßo.\n\n`;
        message += `Esta a√ß√£o vai:\n`;
        message += `‚Ä¢ Limpar TODO o hist√≥rico (${usedQuestionsHistory.length} quest√µes usadas)\n`;
        message += `‚Ä¢ Limpar TODO o hist√≥rico de erros (${wrongCount} quest√µes)\n`;
        message += `‚Ä¢ Reiniciar o progresso do ZERO\n\n`;
        message += `Deseja reiniciar completamente?`;
        
        if (confirm(message)) {
            usedQuestionsHistory = [];
            localStorage.setItem(HISTORY_KEY, JSON.stringify(usedQuestionsHistory));
            
            wrongQuestionsHistory = [];
            saveWrongQuestionsHistory();
            
            localStorage.removeItem(LAST_OFFER_KEY);
            
            clearSessionData();
            
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            currentQuestions = selectRandomQuestions(true);
            
            if (currentQuestions.length === 0) {
                alert("Erro ao gerar novo simulado.");
                return;
            }
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            currentSimuladoNumber = 1;
            
            saveCurrentSessionState();
            
            updatePageTitle();
            document.getElementById('timer').textContent = formatTime(timeLeft);
            document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
            
            startTimer();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateSimuladoInfo();
            updateReforcoButton();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
            
            document.getElementById('motivation-message').innerHTML = '';
            document.getElementById('motivation-message').className = 'motivation-message';
            
            alert(`‚úÖ BANCO REINICIADO!\n\n${totalQuestions} quest√µes dispon√≠veis.\nBoa sorte!`);
        }
    }
    
    // ============================================
    // FUN√á√ÉO RESETQUIZ CORRIGIDA
    // ============================================
    
    function resetQuiz() {
        if (confirm('Reiniciar este simulado?')) {
            userAnswers = new Array(currentQuestions.length).fill(null);
            timeLeft = TIME_LIMIT;
            currentQuestionIndex = 0;
            
            document.getElementById('results').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('voltar-inicio-btn').style.display = 'none';
            document.getElementById('continuar-banco-btn').style.display = 'none';
            document.getElementById('wrong-questions-btn').style.display = 'none';
            document.getElementById('reiniciar-banco-btn').style.display = 'none';
            document.getElementById('new-simulado-btn').style.display = 'none';
            document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
            document.querySelector('.nav-buttons').style.display = 'flex';
            
            document.getElementById('quiz-content').innerHTML = '';
            
            saveCurrentSessionState();
            
            startTimer();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
            updateFinishButton();
            updatePendingQuestions();
            updateContinuarBancoButton();
            updateVoltarInicioButton();
            updateNovoSimuladoReforcoButton();
        }
    }
    
    // ============================================
    // FUN√á√ÉO STARTNEWQUIZ CORRIGIDA
    // ============================================
    
    function startNewQuiz() {
        document.getElementById('results').style.display = 'none';
        document.getElementById('finish-btn').style.display = 'block';
        document.getElementById('restart-btn').style.display = 'none';
        document.getElementById('voltar-inicio-btn').style.display = 'none';
        document.getElementById('continuar-banco-btn').style.display = 'none';
        document.getElementById('wrong-questions-btn').style.display = 'none';
        document.getElementById('reiniciar-banco-btn').style.display = 'none';
        document.getElementById('new-simulado-btn').style.display = 'none';
        document.getElementById('novo-simulado-reforco-btn').style.display = 'none';
        document.querySelector('.nav-buttons').style.display = 'flex';
        
        document.getElementById('quiz-content').innerHTML = '';
        
        userAnswers = new Array(currentQuestions.length).fill(null);
        timeLeft = TIME_LIMIT;
        currentQuestionIndex = 0;
        
        saveCurrentSessionState();
        
        startTimer();
        renderCurrentQuestion();
        updateCounters();
        updateNavButtons();
        updateFinishButton();
        updatePendingQuestions();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
    }
    
    // ============================================
    // RESTANTE DAS FUN√á√ïES EXISTENTES
    // ============================================
    
    function loadWrongQuestionsHistory() {
        const saved = localStorage.getItem(WRONG_QUESTIONS_KEY);
        if (saved) {
            try {
                wrongQuestionsHistory = JSON.parse(saved);
                console.log(`Hist√≥rico de quest√µes erradas carregado: ${wrongQuestionsHistory.length} quest√µes`);
            } catch (e) {
                console.error('Erro ao carregar hist√≥rico de quest√µes erradas:', e);
                wrongQuestionsHistory = [];
            }
        } else {
            wrongQuestionsHistory = [];
            console.log('Nenhum hist√≥rico de quest√µes erradas encontrado');
        }
    }
    
    function saveWrongQuestionsHistory() {
        localStorage.setItem(WRONG_QUESTIONS_KEY, JSON.stringify(wrongQuestionsHistory));
    }
    
    function addWrongQuestionsToHistory() {
        if (!currentQuestions || currentQuestions.length === 0) return;
        
        currentQuestions.forEach((question, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer !== null && userAnswer === question.c;
            
            if (!isCorrect && question.originalIndex !== undefined) {
                if (!wrongQuestionsHistory.includes(question.originalIndex)) {
                    wrongQuestionsHistory.push(question.originalIndex);
                }
            }
        });
        
        wrongQuestionsHistory = [...new Set(wrongQuestionsHistory)];
        saveWrongQuestionsHistory();
        
        console.log(`Quest√µes erradas adicionadas ao hist√≥rico. Total: ${wrongQuestionsHistory.length}`);
    }
    
    function removeCorrectQuestionsFromHistory() {
        const initialCount = wrongQuestionsHistory.length;
        
        if (!currentQuestions || currentQuestions.length === 0) return;
        
        currentQuestions.forEach((question, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer !== null && userAnswer === question.c;
            
            if (isCorrect && question.originalIndex !== undefined) {
                const indexInHistory = wrongQuestionsHistory.indexOf(question.originalIndex);
                if (indexInHistory !== -1) {
                    wrongQuestionsHistory.splice(indexInHistory, 1);
                }
            }
        });
        
        saveWrongQuestionsHistory();
        
        console.log(`Quest√µes removidas do hist√≥rico de erradas: ${initialCount - wrongQuestionsHistory.length}`);
    }
    
    function allQuestionsUsed() {
        const totalQuestions = masterBank.length;
        const uniqueUsed = [...new Set(usedQuestionsHistory)];
        return uniqueUsed.length >= totalQuestions;
    }
    
    function hasEnoughWrongQuestionsForSimulado() {
        return wrongQuestionsHistory.length >= MIN_WRONG_QUESTIONS_FOR_SIMULADO;
    }
    
    function canOfferReforcoSimulado() {
        const condition1 = hasEnoughWrongQuestionsForSimulado();
        const condition2 = !currentQuestions[0]?.isWrongQuestion;
        const condition3 = !hasRecentOffer();
        
        return condition1 && condition2 && condition3;
    }
    
    function hasRecentOffer() {
        const lastOffer = localStorage.getItem(LAST_OFFER_KEY);
        if (!lastOffer) return false;
        
        const now = Date.now();
        const lastOfferTime = parseInt(lastOffer);
        const TWO_HOURS_MS = 2 * 60 * 60 * 1000;
        
        return (now - lastOfferTime) < TWO_HOURS_MS;
    }
    
    function saveOfferTimestamp() {
        localStorage.setItem(LAST_OFFER_KEY, Date.now().toString());
    }
    
    function isNewSession() {
        const sessionId = sessionStorage.getItem(SESSION_ID_KEY);
        const simuladoStarted = sessionStorage.getItem(SIMULADO_STARTED_KEY);
        
        if (!sessionId || !simuladoStarted) {
            const newSessionId = 'session_' + Date.now();
            sessionStorage.setItem(SESSION_ID_KEY, newSessionId);
            sessionStorage.setItem(SIMULADO_STARTED_KEY, 'true');
            return true;
        }
        return false;
    }
    
    function clearSessionData() {
        sessionStorage.removeItem(CURRENT_QUESTIONS_KEY);
        sessionStorage.removeItem(CURRENT_QUESTION_INDEX_KEY);
        sessionStorage.removeItem(USER_ANSWERS_KEY);
        sessionStorage.removeItem(TIME_LEFT_KEY);
        sessionStorage.removeItem(AUTO_NAV_KEY);
        sessionStorage.removeItem(SIMULADO_STARTED_KEY);
        sessionStorage.removeItem(CURRENT_SIMULADO_NUMBER_KEY);
    }
    
    function saveCurrentSessionState() {
        try {
            sessionStorage.setItem(CURRENT_QUESTIONS_KEY, JSON.stringify(currentQuestions));
            sessionStorage.setItem(CURRENT_QUESTION_INDEX_KEY, currentQuestionIndex.toString());
            sessionStorage.setItem(USER_ANSWERS_KEY, JSON.stringify(userAnswers));
            sessionStorage.setItem(TIME_LEFT_KEY, timeLeft.toString());
            sessionStorage.setItem(AUTO_NAV_KEY, autoNavEnabled.toString());
            sessionStorage.setItem(SIMULADO_STARTED_KEY, 'true');
            sessionStorage.setItem(CURRENT_SIMULADO_NUMBER_KEY, currentSimuladoNumber.toString());
        } catch (e) {
            console.error('Erro ao salvar estado da sess√£o:', e);
        }
    }
    
    function loadCurrentSessionState() {
        try {
            const savedQuestions = sessionStorage.getItem(CURRENT_QUESTIONS_KEY);
            const savedIndex = sessionStorage.getItem(CURRENT_QUESTION_INDEX_KEY);
            const savedAnswers = sessionStorage.getItem(USER_ANSWERS_KEY);
            const savedTime = sessionStorage.getItem(TIME_LEFT_KEY);
            const savedAutoNav = sessionStorage.getItem(AUTO_NAV_KEY);
            const savedSimuladoNumber = sessionStorage.getItem(CURRENT_SIMULADO_NUMBER_KEY);
            
            if (savedQuestions) currentQuestions = JSON.parse(savedQuestions);
            if (savedIndex) currentQuestionIndex = parseInt(savedIndex);
            if (savedAnswers) userAnswers = JSON.parse(savedAnswers);
            if (savedTime) timeLeft = parseInt(savedTime);
            if (savedAutoNav) autoNavEnabled = savedAutoNav === 'true';
            if (savedSimuladoNumber) currentSimuladoNumber = parseInt(savedSimuladoNumber);
            
            return {
                hasQuestions: !!savedQuestions,
                hasState: !!(savedQuestions && savedIndex !== null)
            };
        } catch (e) {
            console.error('Erro ao carregar estado da sess√£o:', e);
            return { hasQuestions: false, hasState: false };
        }
    }
    
    function generateQuizId() {
        const pageTitle = document.title || "Quiz";
        const cleanTitle = pageTitle
            .replace(/[^a-zA-Z0-9\s]/g, '')
            .replace(/\s+/g, '_')
            .toLowerCase()
            .substring(0, 30);
        const titleHash = pageTitle.length.toString(36);
        return `quiz_${cleanTitle}_${titleHash}`;
    }
    
    const QUIZ_ID = generateQuizId();
    const HISTORY_KEY = `${QUIZ_ID}_history`;
    const REPORTS_KEY = `${QUIZ_ID}_reports`;
    
    function updatePageTitle() {
        const totalQuestions = masterBank.length;
        let simuladoText = '';
        
        if (currentQuestions && currentQuestions[0]?.isWrongQuestion) {
            simuladoText = ' (‚ö° Refor√ßo)';
        } else if (totalSimulados > 1) {
            simuladoText = ` (Simulado ${currentSimuladoNumber}/${totalSimulados})`;
        }
        
        const pageTitle = document.title || "Quiz Simulado";
        let cleanTitle = pageTitle
            .replace(/^GMP\s*[-‚Äì‚Äî]\s*/i, '')
            .replace(/^Simulado\s*[-‚Äì‚Äî]\s*/i, '')
            .replace(/^Quiz\s*[-‚Äì‚Äî]\s*/i, '')
            .replace(/\s*[-‚Äì‚Äî]\s*Simulado$/i, '')
            .replace(/\s*[-‚Äì‚Äî]\s*Quiz$/i, '')
            .replace(/\s*[-‚Äì‚Äî]\s*Teste$/i, '')
            .trim();
        
        if (!cleanTitle) cleanTitle = pageTitle;
        if (cleanTitle.length > 40) cleanTitle = cleanTitle.substring(0, 37) + '...';
        
        const questionCount = currentQuestions ? currentQuestions.length : 0;
        document.getElementById('page-title').textContent = 
            `${cleanTitle}${simuladoText} (${questionCount}/${totalQuestions})`;
    }
    
    function calculateTimeLimit(questionsCount) {
        return questionsCount * 60;
    }
    
    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
    }
    
    function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }
    
    function showHistoryInfo() {
        const totalQuestions = masterBank.length;
        const uniqueUsed = [...new Set(usedQuestionsHistory)];
        const usedCount = uniqueUsed.length;
        const availableCount = Math.max(0, totalQuestions - usedCount);
        const percentUsed = totalQuestions > 0 ? Math.round((usedCount / totalQuestions) * 100) : 0;
        const wrongCount = wrongQuestionsHistory.length;
        
        let message = `üìä ESTAT√çSTICAS:\n\n`;
        message += `‚Ä¢ Total: ${totalQuestions} quest√µes\n`;
        message += `‚Ä¢ Usadas: ${usedCount} (${percentUsed}%)\n`;
        message += `‚Ä¢ Dispon√≠veis: ${availableCount}\n`;
        message += `‚Ä¢ Erradas: ${wrongCount}\n`;
        
        if (currentQuestions && currentQuestions[0]?.isWrongQuestion) {
            message += `\n‚ö° SIMULADO DE REFOR√áO ATIVO\n`;
        }
        
        if (wrongCount >= MIN_WRONG_QUESTIONS_FOR_SIMULADO) {
            message += `\n‚ö° SIMULADO DE REFOR√áO DISPON√çVEL\n`;
            message += `‚Ä¢ ${wrongCount} quest√µes para revisar\n`;
        }
        
        alert(message);
    }
    
    function updatePendingQuestions() {
        const pendingList = document.getElementById('pending-list');
        const pendingCount = document.getElementById('pending-count');
        const answeredCount = getAnsweredCount();
        const pending = currentQuestions ? currentQuestions.length - answeredCount : 0;
        
        if (pendingCount) pendingCount.textContent = pending;
        
        if (pending === 0) {
            if (pendingList) pendingList.innerHTML = '<span style="color: #28a745;">‚úÖ Todas</span>';
            return;
        }
        
        let html = '';
        let pendingNumbers = [];
        
        if (currentQuestions) {
            for (let i = 0; i < currentQuestions.length; i++) {
                if (userAnswers[i] === null) {
                    pendingNumbers.push(i + 1);
                }
            }
        }
        
        const maxToShow = 10;
        const numbersToShow = pendingNumbers.slice(0, maxToShow);
        
        numbersToShow.forEach(num => {
            html += `<span class="pending-number">${num}</span>`;
        });
        
        if (pendingNumbers.length > maxToShow) {
            html += `<span style="color: #6c757d; font-size: 0.55rem;"> +${pendingNumbers.length - maxToShow}</span>`;
        }
        
        if (pendingList) {
            pendingList.innerHTML = html || '<span style="color: #6c757d;">Nenhuma</span>';
        }
    }
    
    // ============================================
    // FUN√á√ÉO INITQUIZ ATUALIZADA
    // ============================================

    function initQuiz() {
        loadWrongQuestionsHistory();
        
        if (masterBank.length === 0) {
            document.getElementById('page-title').textContent = "‚ö†Ô∏è BANCO VAZIO";
            document.getElementById('quiz-content').innerHTML = `
                <div class="question-block-mini">
                    <div class="question-text-mini" style="color: var(--danger);">
                        ‚ö†Ô∏è ERRO: Banco de quest√µes vazio!
                    </div>
                </div>
            `;
            return;
        }
        
        const config = calcularConfiguracaoSimulados();
        console.log('Configura√ß√£o:', config.mensagem);
        totalSimulados = config.totalSimulados;
        QUESTIONS_PER_SIMULADO = config.questionsPerSimulado;
        
        const savedHistory = localStorage.getItem(HISTORY_KEY);
        if (savedHistory) {
            try {
                usedQuestionsHistory = JSON.parse(savedHistory);
            } catch (e) {
                console.error('Erro ao carregar hist√≥rico:', e);
                usedQuestionsHistory = [];
            }
        } else {
            usedQuestionsHistory = [];
        }
        
        if (isNewSession()) {
            console.log('Nova sess√£o - gerando quest√µes');
            currentQuestions = selectRandomQuestions();
            
            if (currentQuestions.length === 0) {
                alert("N√£o foi poss√≠vel selecionar quest√µes.");
                return;
            }
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            currentQuestionIndex = 0;
            TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
            timeLeft = TIME_LIMIT;
            autoNavEnabled = true;
            
            saveCurrentSessionState();
        } else {
            console.log('Sess√£o existente - restaurando');
            const state = loadCurrentSessionState();
            
            if (state.hasQuestions && state.hasState) {
                console.log('Estado restaurado');
                if (timeLeft <= 0) {
                    TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
                    timeLeft = TIME_LIMIT;
                }
            } else {
                console.log('N√£o h√° estado - gerando novo');
                currentQuestions = selectRandomQuestions();
                if (currentQuestions.length === 0) {
                    alert("N√£o foi poss√≠vel gerar o simulado.");
                    return;
                }
                
                userAnswers = new Array(currentQuestions.length).fill(null);
                currentQuestionIndex = 0;
                TIME_LIMIT = calculateTimeLimit(currentQuestions.length);
                timeLeft = TIME_LIMIT;
                autoNavEnabled = true;
                
                saveCurrentSessionState();
            }
        }
        
        updatePageTitle();
        document.getElementById('timer').textContent = formatTime(timeLeft);
        document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
        
        updateSimuladoInfo();
        startTimer();
        renderCurrentQuestion();
        updateCounters();
        updateNavButtons();
        updateFinishButton();
        updatePendingQuestions();
        updateReforcoButton();
        updateReiniciarBancoButton();
        updateContinuarBancoButton();
        updateVoltarInicioButton();
        updateNovoSimuladoReforcoButton();
    }
    
    function selectAnswer(answerIndex) {
        userAnswers[currentQuestionIndex] = answerIndex;
        saveCurrentSessionState();
        
        updateCounters();
        updateFinishButton();
        updatePendingQuestions();
        
        if (autoNavEnabled && currentQuestionIndex < currentQuestions.length - 1) {
            setTimeout(() => {
                nextQuestion();
            }, 200);
        }
    }
    
    function toggleAutoNav() {
        autoNavEnabled = !autoNavEnabled;
        document.getElementById('auto-nav-checkbox').checked = autoNavEnabled;
        saveCurrentSessionState();
    }
    
    function getAnsweredCount() {
        return userAnswers.filter(answer => answer !== null).length;
    }
    
    function updateFinishButton() {
        const finishBtn = document.getElementById('finish-btn');
        const answeredCount = getAnsweredCount();
        const allAnswered = currentQuestions && answeredCount === currentQuestions.length;
        
        finishBtn.disabled = !allAnswered;
        finishBtn.innerHTML = allAnswered ? 'üèÅ Finalizar' : `‚ùå Faltam ${currentQuestions ? currentQuestions.length - answeredCount : 0}`;
    }
    
    function updateNavButtons() {
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        
        prevBtn.disabled = currentQuestionIndex === 0;
        nextBtn.disabled = currentQuestions ? currentQuestionIndex === currentQuestions.length - 1 : true;
        nextBtn.innerHTML = currentQuestions && currentQuestionIndex === currentQuestions.length - 1 ? '√öltima' : 'Pr√≥ximo ‚Üí';
    }
    
    function updateCounters() {
        const answeredCount = getAnsweredCount();
        const totalQuestions = currentQuestions ? currentQuestions.length : 0;
        
        document.getElementById('question-counter').textContent = `${currentQuestionIndex + 1}/${totalQuestions}`;
        document.getElementById('answered-counter').textContent = `${answeredCount}/${totalQuestions}`;
        document.getElementById('progress-percent').textContent = `${totalQuestions > 0 ? Math.round((answeredCount / totalQuestions) * 100) : 0}%`;
        document.getElementById('status-count').textContent = `${answeredCount}/${totalQuestions}`;
        
        updateTimerDisplay();
    }
    
    function updateTimerDisplay() {
        const timerElement = document.getElementById('timer');
        timerElement.textContent = formatTime(timeLeft);
        
        if (timeLeft <= Math.min(300, Math.floor(TIME_LIMIT * 0.25))) {
            timerElement.classList.add('timer-warning');
        } else {
            timerElement.classList.remove('timer-warning');
        }
    }
    
    function startTimer() {
        clearInterval(timerId);
        
        timerId = setInterval(() => {
            timeLeft--;
            
            if (timeLeft % 5 === 0) {
                saveCurrentSessionState();
            }
            
            updateTimerDisplay();
            
            if (timeLeft <= 0) {
                clearInterval(timerId);
                if (getAnsweredCount() === currentQuestions.length) {
                    finalizeQuiz();
                } else {
                    if (confirm('Tempo esgotado! Finalizar?')) {
                        finalizeQuiz();
                    }
                }
            }
        }, 1000);
    }
    
    function nextQuestion() {
        if (currentQuestions && currentQuestionIndex < currentQuestions.length - 1) {
            currentQuestionIndex++;
            saveCurrentSessionState();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
        }
    }
    
    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            saveCurrentSessionState();
            renderCurrentQuestion();
            updateCounters();
            updateNavButtons();
        }
    }
    
    // ============================================
    // SISTEMA DE REPORTE - CORRIGIDO
    // ============================================
    
    function initReportSystem() {
        const savedReports = localStorage.getItem(REPORTS_KEY);
        if (savedReports) {
            reportsHistory = JSON.parse(savedReports);
        } else {
            reportsHistory = [];
        }
        
        document.getElementById('cancelReport').addEventListener('click', closeReportModal);
        document.getElementById('submitReport').addEventListener('click', submitReport);
        
        document.getElementById('reportModal').addEventListener('click', function(e) {
            if (e.target.id === 'reportModal') {
                closeReportModal();
            }
        });
        
        const reportDetails = document.getElementById('reportDetails');
        const charCount = document.getElementById('charCount');
        
        if (reportDetails && charCount) {
            reportDetails.addEventListener('input', function() {
                charCount.textContent = this.value.length;
                if (this.value.length > 1000) {
                    this.value = this.value.substring(0, 1000);
                    charCount.textContent = 1000;
                }
            });
        }
        
        const inputs = document.querySelectorAll('.form-input');
        inputs.forEach(input => {
            input.addEventListener('input', function() {
                if (this.classList.contains('error')) {
                    this.classList.remove('error');
                    hideError();
                }
            });
        });
    }
    
    function openReportModal(questionIndex) {
        currentReportQuestionIndex = questionIndex;
        
        if (!currentQuestions || currentQuestions.length === 0) {
            alert("N√£o h√° quest√µes carregadas.");
            return;
        }
        
        const question = currentQuestions[questionIndex];
        
        document.getElementById('reportQuestionNumber').textContent = questionIndex + 1;
        
        let questionText = question.q;
        if (questionText.length > 150) {
            questionText = questionText.substring(0, 147) + '...';
        }
        document.getElementById('reportQuestionText').textContent = questionText;
        
        document.querySelectorAll('input[name="reportType"]').forEach(radio => {
            radio.checked = false;
        });
        document.getElementById('reportDetails').value = '';
        document.getElementById('userName').value = '';
        document.getElementById('userEmail').value = '';
        document.getElementById('userInfo').value = '';
        document.getElementById('charCount').textContent = '0';
        document.getElementById('reportSuccess').style.display = 'none';
        document.getElementById('reportErrorMsg').style.display = 'none';
        
        document.getElementById('submitReport').disabled = false;
        document.getElementById('submitText').textContent = 'Enviar Reporte';
        document.getElementById('submitLoading').style.display = 'none';
        
        document.getElementById('reportModal').style.display = 'flex';
        
        setTimeout(() => {
            document.getElementById('userName').focus();
        }, 100);
    }
    
    function closeReportModal() {
        document.getElementById('reportModal').style.display = 'none';
        currentReportQuestionIndex = null;
    }
    
    function showError(message) {
        const errorElement = document.getElementById('reportErrorMsg');
        errorElement.textContent = message;
        errorElement.style.display = 'block';
        errorElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
    
    function hideError() {
        document.getElementById('reportErrorMsg').style.display = 'none';
    }
    
    function validateForm() {
        const name = document.getElementById('userName').value.trim();
        const email = document.getElementById('userEmail').value.trim();
        const reportType = document.querySelector('input[name="reportType"]:checked');
        
        if (!name) {
            document.getElementById('userName').classList.add('error');
            showError('Por favor, preencha seu nome completo.');
            return false;
        }
        
        if (!email) {
            document.getElementById('userEmail').classList.add('error');
            showError('Por favor, preencha seu e-mail.');
            return false;
        }
        
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            document.getElementById('userEmail').classList.add('error');
            showError('Por favor, insira um e-mail v√°lido.');
            return false;
        }
        
        if (!reportType) {
            showError('Por favor, selecione o tipo de problema.');
            return false;
        }
        
        return true;
    }
    
    async function submitReport() {
        if (!validateForm()) {
            return;
        }
        
        const questionIndex = currentReportQuestionIndex;
        const question = currentQuestions[questionIndex];
        
        const reportData = {
            quizId: QUIZ_ID,
            materia: document.title || "Quiz",
            questionIndex: questionIndex + 1,
            originalIndex: question.originalIndex,
            questionText: question.q,
            reportType: document.querySelector('input[name="reportType"]:checked').value,
            reportLabel: REPORT_TYPES[document.querySelector('input[name="reportType"]:checked').value],
            details: document.getElementById('reportDetails').value.trim(),
            userName: document.getElementById('userName').value.trim(),
            userEmail: document.getElementById('userEmail').value.trim(),
            userInfo: document.getElementById('userInfo').value.trim(),
            userAnswer: userAnswers[questionIndex] !== null ? 
                question.a[userAnswers[questionIndex]] : 'N√£o respondida',
            correctAnswer: question.a[question.c],
            userAnswerIndex: userAnswers[questionIndex],
            correctAnswerIndex: question.c,
            timestamp: new Date().toLocaleString('pt-BR'),
            url: window.location.href,
            userAgent: navigator.userAgent
        };
        
        document.getElementById('submitReport').disabled = true;
        document.getElementById('submitText').textContent = 'Enviando...';
        document.getElementById('submitLoading').style.display = 'inline-block';
        
        try {
            const response = await sendToGoogleSheets(reportData);
            
            if (response.success) {
                const report = {
                    ...reportData,
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    sentToGoogleSheets: true
                };
                
                reportsHistory.push(report);
                localStorage.setItem(REPORTS_KEY, JSON.stringify(reportsHistory));
                
                document.getElementById('reportSuccess').style.display = 'block';
                document.getElementById('submitText').textContent = 'Enviado!';
                
                setTimeout(() => {
                    closeReportModal();
                }, 3000);
            } else {
                throw new Error(response.message || 'Erro ao enviar');
            }
        } catch (error) {
            console.error('Erro ao enviar reporte:', error);
            
            const emailSent = sendReportByEmailFallback(reportData);
            
            if (emailSent) {
                const report = {
                    ...reportData,
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    sentByEmail: true
                };
                
                reportsHistory.push(report);
                localStorage.setItem(REPORTS_KEY, JSON.stringify(reportsHistory));
                
                document.getElementById('reportSuccess').innerHTML = 
                    '‚úÖ Reporte enviado por email! Obrigado pela contribui√ß√£o.<br>' +
                    '<small>Voc√™ receber√° um feedback por email em breve.</small>';
                document.getElementById('reportSuccess').style.display = 'block';
                document.getElementById('submitText').textContent = 'Enviado!';
                
                setTimeout(() => {
                    closeReportModal();
                }, 3000);
            } else {
                const report = {
                    ...reportData,
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    savedLocally: true
                };
                
                reportsHistory.push(report);
                localStorage.setItem(REPORTS_KEY, JSON.stringify(reportsHistory));
                
                showError('Erro de conex√£o. Reporte salvo localmente. Tente novamente mais tarde.');
                document.getElementById('submitReport').disabled = false;
                document.getElementById('submitText').textContent = 'Enviar Reporte';
                document.getElementById('submitLoading').style.display = 'none';
            }
        }
    }
    
    async function sendToGoogleSheets(reportData) {
        const formData = new FormData();
        
        Object.keys(reportData).forEach(key => {
            formData.append(key, reportData[key]);
        });
        
        const response = await fetch(API_URL, {
            method: 'POST',
            body: formData,
            mode: 'no-cors'
        });
        
        return { success: true, message: 'Enviado com sucesso' };
    }
    
    function sendReportByEmailFallback(reportData) {
        try {
            const subject = `[REPORTE] ${reportData.materia} - Quest√£o #${reportData.questionIndex}`;
            
            let body = `NOVO REPORTE DE QUEST√ÉO\n`;
            body += `=======================\n\n`;
            body += `MAT√âRIA: ${reportData.materia}\n`;
            body += `ID DO QUIZ: ${reportData.quizId}\n`;
            body += `QUEST√ÉO #${reportData.questionIndex}\n`;
            body += `√çNDICE ORIGINAL: ${reportData.originalIndex}\n\n`;
            body += `ENUNCIADO:\n${reportData.questionText}\n\n`;
            body += `TIPO DE PROBLEMA: ${reportData.reportLabel}\n\n`;
            body += `RESPOSTA DO USU√ÅRIO: ${reportData.userAnswer}\n`;
            body += `RESPOSTA CORRETA: ${reportData.correctAnswer}\n\n`;
            
            body += `INFORMA√á√ïES DO USU√ÅRIO:\n`;
            body += `Nome: ${reportData.userName}\n`;
            body += `E-mail: ${reportData.userEmail}\n`;
            body += `Institui√ß√£o/Curso: ${reportData.userInfo || 'N√£o informado'}\n\n`;
            
            if (reportData.details) {
                body += `DETALHES ADICIONAIS:\n${reportData.details}\n\n`;
            }
            
            body += `DATA/HORA: ${reportData.timestamp}\n`;
            body += `URL DA P√ÅGINA: ${reportData.url}\n`;
            
            const encodedSubject = encodeURIComponent(subject);
            const encodedBody = encodeURIComponent(body);
            
            const mailtoLink = `mailto:${EMAIL_DESTINO}?subject=${encodedSubject}&body=${encodedBody}`;
            
            window.open(mailtoLink, '_blank');
            return true;
        } catch (error) {
            console.error('Erro ao enviar email:', error);
            return false;
        }
    }
    
    // ============================================
    // INICIALIZA√á√ÉO
    // ============================================
    
    function hasUnsavedProgress() {
        const answeredCount = getAnsweredCount();
        return answeredCount > 0 && answeredCount < currentQuestions.length;
    }
    
    function showCloseWarning(event) {
        if (hasUnsavedProgress()) {
            const message = '‚ö†Ô∏è ATEN√á√ÉO!\n\nVoc√™ tem um simulado em andamento.\nSe sair agora, todo o seu progresso ser√° perdido!\n\nTem certeza que deseja sair?';
            
            if (event) {
                event.preventDefault();
                event.returnValue = message;
            }
            
            return message;
        }
    }
    
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === ' ') nextQuestion();
        if (e.key === 'ArrowLeft') prevQuestion();
    });
    
    window.addEventListener('beforeunload', function(event) {
        if (hasUnsavedProgress()) {
            try {
                saveCurrentSessionState();
            } catch (e) {
                console.error('Erro ao salvar estado antes de sair:', e);
            }
            
            return showCloseWarning(event);
        }
    });
    
    window.onload = function() {
        initQuiz();
        initReportSystem();
    };
</script>

</body>
</html>
