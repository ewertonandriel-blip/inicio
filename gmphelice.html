<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado GMP</title>
    <style>
        :root {
            --primary: #1a3a5a;
            --secondary: #f8f9fa;
            --accent: #007bff;
            --success: #28a745;
            --danger: #dc3545;
            --text: #333;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f0f2f5;
            color: var(--text);
            margin: 0;
            padding: 10px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative; /* Para o cr√©dito absoluto */
        }

        /* CR√âDITO INTEGRADO - DENTRO DO CONTAINER */
        .credits-integrated {
            position: absolute;
            top: 5px;
            right: 10px;
            background: var(--primary);
            color: white;
            padding: 2px 6px;
            font-size: 0.65rem;
            font-weight: bold;
            border-radius: 3px;
            z-index: 10;
        }

        /* BARRA SUPERIOR COMPACTA */
        .top-bar-compact {
            position: sticky;
            top: 0;
            background: white;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--primary);
            z-index: 5;
            margin-bottom: 10px;
            padding-top: 25px; /* Espa√ßo para o cr√©dito */
        }

        .title-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .page-title {
            margin: 0;
            color: var(--primary);
            font-size: 1.1rem;
            font-weight: bold;
            line-height: 1.2;
        }

        /* TIMER SUPER COMPACTO */
        .timer-super-compact {
            background: #fff5f5;
            color: var(--danger);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: bold;
            border: 1.5px solid var(--danger);
            white-space: nowrap;
            min-width: 60px;
            text-align: center;
        }

        /* PROGRESSO ULTRA COMPACTO */
        .progress-ultra-compact {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 8px 10px;
            border: 1px solid #dee2e6;
            margin-bottom: 5px;
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .stat-item {
            text-align: center;
            flex: 1;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #6c757d;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 2px;
        }

        .stat-value {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--primary);
        }

        .progress-mini-bar {
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 4px;
        }

        .progress-mini-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success) 0%, var(--accent) 100%);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .reset-btn-mini {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 4px 8px;
            font-size: 0.7rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 3px;
        }

        /* CONTE√öDO DO SIMULADO */
        .question-block {
            margin: 15px 0;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            background: #fff;
        }

        .pending {
            border: 2px solid var(--danger) !important;
            background-color: #fff8f8 !important;
        }

        .question-text {
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
            line-height: 1.3;
        }

        .options-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .option-label {
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }

        input[type="radio"] { 
            margin-right: 10px; 
            transform: scale(1.1);
            accent-color: var(--primary);
        }

        .correct-answer { 
            background-color: #d4edda !important; 
            border-color: #28a745 !important; 
            color: #155724; 
            font-weight: bold; 
        }
        
        .wrong-answer { 
            background-color: #f8d7da !important; 
            border-color: #dc3545 !important; 
            color: #721c24; 
        }

        /* BOT√ïES */
        .btn {
            padding: 12px;
            font-size: 0.95rem;
            font-weight: bold;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        .btn-finish { 
            background: var(--primary); 
            color: white; 
        }

        .btn-restart { 
            background: var(--success); 
            color: white; 
            display: none;
        }

        /* RESULTADOS */
        #results {
            display: none;
            padding: 15px;
            text-align: center;
            border: 2px solid var(--primary);
            margin: 15px 0;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .motivational-msg {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .score-box { 
            font-size: 1.5rem; 
            margin: 10px 0; 
            font-weight: 800; 
            color: var(--primary);
        }

        /* RESPONSIVIDADE */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .page-title {
                font-size: 1rem;
            }
            
            .timer-super-compact {
                font-size: 0.85rem;
                padding: 3px 6px;
                min-width: 55px;
            }
            
            .stat-value {
                font-size: 0.9rem;
            }
            
            .stat-label {
                font-size: 0.65rem;
            }
            
            .question-text {
                font-size: 0.95rem;
            }
        }
        
        @media (max-width: 480px) {
            .title-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .timer-super-compact {
                align-self: flex-end;
                margin-top: -25px;
            }
            
            .progress-stats {
                flex-wrap: wrap;
            }
            
            .stat-item {
                min-width: 33%;
                margin-bottom: 3px;
            }
            
            .question-block {
                padding: 12px;
            }
            
            .option-label {
                padding: 8px;
                font-size: 0.85rem;
            }
            
            /* Ajuste para o cr√©dito em telas pequenas */
            .credits-integrated {
                top: 3px;
                right: 8px;
                font-size: 0.6rem;
                padding: 1px 4px;
            }
        }
        
        @media (max-width: 360px) {
            .container {
                padding: 8px;
            }
            
            .page-title {
                font-size: 0.95rem;
            }
            
            .timer-super-compact {
                font-size: 0.8rem;
                min-width: 50px;
            }
            
            .stat-value {
                font-size: 0.85rem;
            }
            
            .stat-label {
                font-size: 0.6rem;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- CR√âDITO DENTRO DO CONTAINER -->
    <div class="credits-integrated">BY EWERTON</div>
    
    <!-- BARRA SUPERIOR ULTRA COMPACTA -->
    <div class="top-bar-compact">
        <div class="title-row">
            <h1 class="page-title" id="page-title">GMP - H√©lice - Carregando...</h1>
            <div id="timer" class="timer-super-compact">20:00</div>
        </div>
        
        <div class="progress-ultra-compact">
            <div class="progress-stats">
                <div class="stat-item">
                    <div class="stat-label">Quest√µes</div>
                    <div class="stat-value" id="current-range">1-20</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Total</div>
                    <div class="stat-value" id="total-questions">60</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Restantes</div>
                    <div class="stat-value" id="remaining-count">40</div>
                </div>
            </div>
            
            <div class="progress-mini-bar">
                <div class="progress-mini-fill" id="progress-bar"></div>
            </div>
            
            <button class="reset-btn-mini" onclick="resetProgress()">
                ‚Üª Reiniciar Progresso
            </button>
        </div>
    </div>

    <!-- RESULTADOS -->
    <div id="results">
        <span id="feedback-msg" class="motivational-msg"></span>
        <div class="score-box" id="final-score"></div>
        <div id="final-percent" style="font-size: 1rem; font-weight: bold; margin-bottom: 10px; color: var(--accent);"></div>
        <p style="color: #666; font-size: 0.9rem; margin-bottom: 12px;">Confira abaixo o gabarito:</p>
        <button id="restart-btn" class="btn btn-restart" onclick="startNewQuiz()">‚ñ∂Ô∏è Novo Simulado</button>
    </div>

    <!-- QUEST√ïES -->
    <div id="quiz-content"></div>

    <!-- BOT√ÉO FINALIZAR -->
    <button id="finish-btn" class="btn btn-finish" onclick="finalizeQuiz()">‚úÖ Finalizar Simulado</button>
</div>

<script>
  
 const masterBank = [

    {q: "Uma parada do motor em decorr√™ncia de colis√£o de uma ou mais p√°s de h√©lice com um objeto, de modo que o motor pare antes que a h√©lice complete uma volta, denomina-se:", a: ["retorno de chama", "cal√ßo hidr√°ulico", "parada brusca", "corte de motor"], c: 2},
    {q: "A dist√¢ncia que a h√©lice realmente percorre, denomina-se passo:", a: ["te√≥rico", "efetivo", "de recuo", "geom√©trico"], c: 1},
    {q: "A energia calorifica para o controle do degelo da p√° da h√©lice √© realizada atrav√©s de:", a: ["energia hidr√°ulica", "ar quente, oriundo do compressor", "ar quente, oriundo do escapamento", "energia el√©trica"], c: 3},
    {q: "A finalidade de se aplicar o passo reverso durante o pouso √©:", a: ["reduzir a corrida na pista, durante o pouso", "proporcionar maior controle do avi√£o no solo", "reduzir o tempo gasto para o t√°xi", "economizar combust√≠vel"], c: 0},
    {q: "A finalidade de se reduzir a velocidade de rota√ß√£o da h√©lice, em rela√ß√£o ao eixo de manivelas, √©:", a: ["economizar combust√≠vel", "manter a efici√™ncia da h√©lice", "reduzir a temperatura de trabalho do motor", "reduzir o esfor√ßo suportado pelas p√°s da h√©lice"], c: 1},
    {q: "A finalidade do conjunto do cubo da h√©lice √©:", a: ["aumentar a RPM", "manter o passo m√°ximo", "manter o passo m√≠nimo", "prender as p√°s no eixo de manivelas"], c: 3},
    {q: "A finalidade do governador da h√©lice de passo control√°vel √©:", a: ["regular o passo", "manter o √¢ngulo da p√° fixo", "reduzir a pot√™ncia do motor", "aumentar a pot√™ncia do motor"], c: 0},
    {q: "A finalidade do passo revers√≠vel na h√©lice √©:", a: ["aumentar a corrida na decolagem", "aumentar o volume de ar para o motor", "diminuir a corrida dos avi√µes durante a aterragem", "diminuir a velocidade da massa de ar no compressor"], c: 2},
    {q: "A finalidade do passo reverso da h√©lice √©:", a: ["reduzir o torque m√°ximo do motor", "reduzir, ao m√°ximo, a resist√™ncia ao avan√ßo", "produzir uma tra√ß√£o negativa, usando a pot√™ncia do motor", "produzir uma tra√ß√£o positiva, a fim de usar o freio o m√≠nimo necess√°rio"], c: 2},
    {q: "A finalidade do sistema de embandeiramento da h√©lice √©:", a: ["eliminar vibra√ß√µes do motor", "eliminar vibra√ß√µes da h√©lice", "compensar a perda de pot√™ncia do motor", "reduzir, ao m√≠nimo, a resist√™ncia ao avan√ßo"], c: 3},
    {q: "A finalidade do sistema de sincronismo das h√©lices, dentre outras, √©:", a: ["permitir que elas operem em passo m√≠nimo, em voo de cruzeiro", "reduzir a vibra√ß√£o", "evitar o torque negativo", "economizar combust√≠vel"], c: 1},
    {q: "A for√ßa f√≠sica que tende a expulsar as p√°s do cubo quando a h√©lice est√° em movimento denomina-se:", a: ["recuo", "tra√ß√£o", "centr√≠fuga", "aerodin√¢mica"], c: 2},
    {q: "A h√©lice √© fixada ao eixo do motor atrav√©s do componente denominado:", a: ["p√°", "cubo", "raiz", "c√∫pula"], c: 1},
    {q: "A h√©lice de velocidade constante, durante o voo tem:", a: ["passo fixo e RPM fixa", "passo vari√°vel e RPM fixa", "passo fixo e RPM vari√°vel", "passo vari√°vel e RPM vari√°vel"], c: 1},
    {q: "A h√©lice percorre uma dist√¢ncia denominada passo efetivo quando:", a: ["comandada para o passo m√≠nimo", "comandada para o passo m√°ximo", "realiza uma volta completa, considerando o recuo", "realiza uma volta, sem o recuo"], c: 2},
    {q: "A h√©lice que ajusta o passo, sem atua√ß√£o do operador, para manter constante a RPM do motor, denomina-se h√©lice:", a: ["ajust√°vel", "autom√°tica", "de passo constante", "de passo control√°vel"], c: 1},
    {q: "A mudan√ßa do √¢ngulo da p√° da h√©lice de passo fixo √© realizada:", a: ["na constru√ß√£o da h√©lice", "quando o motor estiver girando em alta rota√ß√£o", "quando a h√©lice estiver girando em baixa rota√ß√£o", "no momento em que o motor estiver em funcionamento"], c: 0},
    {q: "A parte de um motor convencional onde as engrenagens de redu√ß√£o da h√©lice est√£o localizadas denomina-se se√ß√£o:", a: ["do nariz", "das engrenagens dos acess√≥rios", "difusora", "de pot√™ncia"], c: 0},
    {q: "Ap√≥s uma parada brusca do motor, ocasionada pelo impacto de uma p√° da h√©lice com o solo, √© prov√°vel que ocorra desalinhamento no(a):", a: ["magneto", "filtro de √≥leo", "eixo de manivelas", "tubo de escapamento"], c: 2},
    {q: "Aumentando o √¢ngulo da p√° de uma h√©lice ocorrer√° o aumento do(a):", a: ["RPM", "passo", "rota√ß√£o", "pot√™ncia"], c: 1},
    {q: "√â a parte grossa e circular pr√≥xima da base, a qual √© designada a dar resist√™ncia √† p√°:", a: ["rotor", "flanco", "base", "raiz"], c: 3},
    {q: "Caso um dos motores de uma aeronave entre em pane, a h√©lice correspondente deve ser comandada para o passo:", a: ["bandeira", "reverso", "m√°ximo", "m√≠nimo"], c: 0},
    {q: "Com o al√≠vio da press√£o do √≥leo, atrav√©s do governador, os contrapesos e a mola levam as p√°s da h√©lice para o passo:", a: ["m√°ximo", "m√≠nimo", "reverso", "bandeira"], c: 0},
    {q: "Dentre as alternativas abaixo, aquela que pode causar altera√ß√£o aerodin√¢mica da p√° da h√©lice, quando em voo, √© o(a):", a: ["gelo", "calor", "ar frio", "vento de cauda"], c: 0},
    {q: "Dentre os tipos de h√©lices abaixo, aquela que √© empregada, tamb√©m, como freio aerodin√¢mico, denomina-se:", a: ["ajust√°vel", "revers√≠vel", "autom√°tica", "embandeir√°vel"], c: 1},
    {q: "Dist√¢ncia que uma h√©lice deveria avan√ßar em uma revolu√ß√£o:", a: ["√© a dist√¢ncia realmente percorrida por uma h√©lice", "dist√¢ncia que reconhece o recuo da h√©lice no ar", "chamado de passo te√≥rico ou geom√©trico", "todas est√£o corretas"], c: 2},
    {q: "Durante o giro do motor convencional de um avi√£o no solo se a p√° da h√©lice tocar num obst√°culo ocasionando parada brusca, deve-se:", a: ["substituir o motor", "trocar todo o √≥leo do motor", "remover o governador de h√©lice", "executar nova regulagem do governador de h√©lice"], c: 0},
    {q: "Em condi√ß√µes normais de voo a h√©lice varia entre o passo:", a: ["m√≠nimo e o passo m√°ximo", "m√≠nimo e o passo reverso", "m√°ximo e o passo reverso", "m√°ximo e o passo bandeira"], c: 0},
    {q: "Em uma h√©lice de velocidade constante, estando a h√©lice em movimento e ocorrendo forma√ß√£o de gelo nas p√°s, a distor√ß√£o do aerof√≥lio:", a: ["causar√° vibra√ß√£o", "causar√° redu√ß√£o de RPM", "mudar√° o passo para o reverso", "mudar√° o passo para o bandeira"], c: 0},
    {q: "Estando as p√°s da h√©lice na mesma dire√ß√£o do vento relativo, a h√©lice estar√° em passo:", a: ["m√≠nimo", "m√°ximo", "reverso", "bandeira"], c: 0},
    {q: "Na decolagem o √¢ngulo de uma h√©lice:", a: ["m√≠nimo", "m√°ximo", "bandeira", "45¬∞"], c: 0},
    {q: "Na decolagem, onde √© necess√°ria uma alta rota√ß√£o, a h√©lice dever√° estar no passo:", a: ["m√≠nimo", "m√°ximo", "bandeira", "reverso"], c: 0},
    {q: "Na h√©lice de passo control√°vel, a press√£o do √≥leo necess√°ria √† mudan√ßa do passo, √© fornecida pelo(a):", a: ["v√°lvula piloto", "bomba", "aranha", "contrapeso"], c: 1},
    {q: "No governador de uma h√©lice, a fun√ß√£o da v√°lvula piloto √©:", a: ["regular a quantidade de √≥leo", "controlar a press√£o da h√©lice", "regular a velocidade dos contrapesos", "diminuir a tens√£o da mola de velocidade"], c: 0},
    {q: "O √¢ngulo formado entre a corda da p√° e o plano de rota√ß√£o da h√©lice denomina-se √¢ngulo de(a):", a: ["p√°", "recuo", "ataque", "avan√ßo"], c: 2},
    {q: "O conjunto de h√©lices pode ser montado em um eixo que pode ser uma extens√£o do eixo de manivelas do motor ou:", a: ["no eixo da caixa de acess√≥rios", "no eixo do trem de engrenagens", "no eixo do comando de v√°lvulas", "nda"], c: 1},
    {q: "O desbalanceamento est√°tico ou din√¢mico, numa h√©lice, pode ocasionar:", a: ["vibra√ß√£o na aeronave", "aumento de RPM no motor", "vibra√ß√£o nos trens de pouso principais", "redu√ß√£o da rota√ß√£o do eixo de manivelas"], c: 0},
    {q: "O eixo da h√©lice √© conectado ao eixo de manivelas, atrav√©s de:", a: ["mancais", "rolamentos", "hastes impulsoras", "engrenagens redutoras"], c: 3},
    {q: "O embandeiramento da h√©lice √© realizado pelo governador, atrav√©s de:", a: ["comando el√©trico", "diminui√ß√£o do RPM", "al√≠vio da press√£o de ar", "al√≠vio da press√£o de √≥leo"], c: 3},
    {q: "O embandeiramento de uma h√©lice ocorre por a√ß√£o de:", a: ["mola e contrapesos", "mola e press√£o de √≥leo", "press√£o de √≥leo e pist√£o", "press√£o de √≥leo e contrapesos"], c: 1},
    {q: "O gelo, que se forma nas p√°s da h√©lice, √© controlado atrav√©s do sistema:", a: ["el√©trico", "pneum√°tico", "de combust√≠vel", "de lubrifica√ß√£o"], c: 0},
    {q: "O passo efetivo da h√©lice √© a diferen√ßa entre o passo:", a: ["m√°ximo e m√≠nimo", "te√≥rico e o recuo", "bandeira e m√≠nimo", "te√≥rico e m√≠nimo"], c: 1},
    {q: "O passo geom√©trico da h√©lice √© igual ao passo:", a: ["te√≥rico, mais o avan√ßo", "efetivo, mais o avan√ßo", "te√≥rico, mais o recuo", "efetivo, mais o recuo"], c: 2},
    {q: "O passo que reconhece o recuo da h√©lice denomina-se:", a: ["efetivo", "te√≥rico", "constante", "geom√©trico"], c: 0},
    {q: "O passo te√≥rico da h√©lice √© igual ao passo:", a: ["efetivo, mais o recuo", "efetivo, mais o avan√ßo", "geom√©trico, menos o recuo", "geom√©trico, menos o avan√ßo"], c: 0},
    {q: "O passo te√≥rico da h√©lice, tamb√©m √© denominado:", a: ["recuo", "avan√ßo", "passo efetivo", "passo geom√©trico"], c: 3},
    {q: "O que √© passo geom√©trico de uma h√©lice?", a: ["√© a dist√¢ncia realmente percorrida por uma h√©lice", "reconhece o recuo da h√©lice no ar", "tamb√©m chamado de passo te√≥rico √© a dist√¢ncia que uma h√©lice deveria avan√ßar em uma revolu√ß√£o", "todas est√£o corretas"], c: 2},
    {q: "O que √© recuo da h√©lice:", a: ["diminui√ß√£o da pot√™ncia do motor", "diferen√ßa entre passo geom√©trico e o efetivo", "mudan√ßa de passo atrav√©s de contra-pesos", "mudan√ßa de √¢ngulo da p√° para o bandeira"], c: 1},
    {q: "O sistema de degelo da h√©lice funciona empregando nos elementos de aquecimento:", a: ["ar quente proveniente da se√ß√£o do compressor", "energia el√©trica transformada em energia calor√≠fica", "ar quente proveniente da se√ß√£o de escapamento do motor", "√≥leo quente do radiador transformado em energia calor√≠fica"], c: 1},
    {q: "Os contrapesos das h√©lices de passo vari√°vel t√™m a finalidade de:", a: ["diminuir a RPM", "aumentar a RPM", "aumentar o passo", "diminuir o passo"], c: 2},
    {q: "Quando a h√©lice d√° uma volta completa e ocorre um recuo a mesma realiza o passo:", a: ["efetivo", "te√≥rico", "de tor√ß√£o", "geom√©trico"], c: 0},
    {q: "Quando a h√©lice d√° uma volta completa, ela dever√° avan√ßar teoricamente uma dist√¢ncia chamada passo:", a: ["real", "efetivo", "de recuo", "geom√©trico"], c: 3},
    {q: "Quando a h√©lice est√° em movimento e h√° forma√ß√£o de gelo nas p√°s, a distor√ß√£o do aerof√≥lio poder√° causar na h√©lice:", a: ["vibra√ß√£o", "aumento de RPM", "mudan√ßa do passo para reverso", "mudan√ßa do passo para o bandeira"], c: 0},
    {q: "Quanto √† h√©lice ajust√°vel no solo, pode-se dizer que a mesma opera como uma h√©lice de passo:", a: ["fixo", "reverso", "autom√°tico", "control√°vel"], c: 0},
    {q: "Se a caixa de engrenagens reduz a velocidade do eixo na propor√ß√£o de 6:1, qual ser√° a rota√ß√£o do eixo de manivelas, sabendo-se que a velocidade da h√©lice √© de 3000 RPM:", a: ["500 RPM", "1800 RPM", "3000 RPM", "18000 RPM"], c: 0},
    {q: "Se a se√ß√£o de engrenagens reduz a velocidade do eixo de manivelas na raz√£o de 11:1, e a velocidade da h√©lice √© de 1200 RPM, a rota√ß√£o do eixo de manivelas ser√° de:", a: ["11200 RPM", "12600 RPM", "13200 RPM", "14400 RPM"], c: 2},
    {q: "Se uma h√©lice gira a 2400 RPM e as engrenagens de redu√ß√£o trabalham em uma raz√£o de 12:1, a rota√ß√£o com que o eixo de manivelas gira √© de:", a: ["200 RPM", "2400 RPM", "4800 RPM", "28800 RPM"], c: 3},
    {q: "Uma das finalidades das engrenagens de redu√ß√£o da caixa de acess√≥rios do motor √©:", a: ["reduzir a velocidade do eixo de ressaltos", "limitar a velocidade de rota√ß√£o da h√©lice", "aumentar a velocidade de rota√ß√£o do motor", "aumentar a velocidade de rota√ß√£o do eixo de manivelas"], c: 1},
    {q: "Uma h√©lice com √¢ngulo negativo, est√° no passo:", a: ["m√≠nimo", "m√°ximo", "reverso", "bandeira"], c: 2},
    {q: "Uma h√©lice revers√≠vel √© uma h√©lice:", a: ["em que o √¢ngulo da p√° pode ser mudado para um valor negativo, durante a opera√ß√£o", "em que o √¢ngulo da p√° diminui o suficiente para evitar que o motor reduza sua rota√ß√£o", "que √© usada como freio aerodin√¢mico e que aumenta a corrida da aeronave ap√≥s o pouso", "que, na condi√ß√£o de falha do motor, muda o passo para que reduza ao m√≠nimo a resist√™ncia ao avan√ßo"], c: 0}
];


    // Sistema de controle
    let remainingQuestions = [];
    let usedQuestions = [];
    let currentQuestions = [];
    let timeLeft = 20 * 60;
    let timerId;

    // Fun√ß√µes
    function saveProgress() {
        const progress = {
            remainingIndices: remainingQuestions.map(q => masterBank.indexOf(q)),
            usedIndices: usedQuestions.map(q => masterBank.indexOf(q))
        };
        localStorage.setItem('gmpQuizProgress', JSON.stringify(progress));
    }

    function loadProgress() {
        const saved = localStorage.getItem('gmpQuizProgress');
        if (saved) {
            try {
                const progress = JSON.parse(saved);
                remainingQuestions = progress.remainingIndices
                    .map(idx => masterBank[idx])
                    .filter(q => q !== undefined);
                usedQuestions = progress.usedIndices
                    .map(idx => masterBank[idx])
                    .filter(q => q !== undefined);
            } catch (e) {
                resetProgressData();
            }
        } else {
            resetProgressData();
        }
    }

    function resetProgressData() {
        remainingQuestions = [...masterBank];
        usedQuestions = [];
    }

    function resetProgress() {
        if (confirm('Reiniciar progresso?')) {
            localStorage.removeItem('gmpQuizProgress');
            resetProgressData();
            startNewQuiz();
        }
    }

    function updateCounter() {
        const total = masterBank.length;
        const used = usedQuestions.length;
        const remaining = remainingQuestions.length;
        const currentStart = used + 1;
        const currentEnd = Math.min(used + 20, total);
        const progressPercentage = Math.round((used / total) * 100);
        
        document.getElementById('current-range').textContent = `${currentStart}-${currentEnd}`;
        document.getElementById('total-questions').textContent = total;
        document.getElementById('remaining-count').textContent = remaining;
        
        const progressBar = document.getElementById('progress-bar');
        progressBar.style.width = `${progressPercentage}%`;
        
        if (progressPercentage < 30) {
            progressBar.style.background = 'linear-gradient(90deg, #dc3545 0%, #ff6b6b 100%)';
        } else if (progressPercentage < 70) {
            progressBar.style.background = 'linear-gradient(90deg, #ffc107 0%, #ffd54f 100%)';
        } else {
            progressBar.style.background = 'linear-gradient(90deg, #28a745 0%, #5cb85c 100%)';
        }
    }

    function initQuiz() {
        loadProgress();
        
        const totalQuestions = masterBank.length;
        document.getElementById('page-title').textContent = `GMP - H√©lice - ${totalQuestions} quest√µes`;
        
        if (remainingQuestions.length < 20) {
            const lastUsedSet = new Set(currentQuestions.map(q => masterBank.indexOf(q)));
            resetProgressData();
            
            if (lastUsedSet.size > 0) {
                remainingQuestions = remainingQuestions.filter((q, idx) => !lastUsedSet.has(idx));
            }
            
            if (remainingQuestions.length < 20) {
                remainingQuestions = [...masterBank];
            }
        }
        
        const shuffled = [...remainingQuestions].sort(() => 0.5 - Math.random());
        currentQuestions = shuffled.slice(0, 20);
        
        currentQuestions.forEach(q => {
            const index = remainingQuestions.indexOf(q);
            if (index > -1) {
                remainingQuestions.splice(index, 1);
                usedQuestions.push(q);
            }
        });
        
        renderQuiz();
        startTimer();
        updateCounter();
        saveProgress();
    }

    function renderQuiz() {
        const container = document.getElementById('quiz-content');
        container.innerHTML = '';
        currentQuestions.forEach((item, idx) => {
            const block = document.createElement('div');
            block.className = 'question-block';
            block.id = `block-${idx}`;
            block.innerHTML = `
                <div class="question-text">${idx + 1}. ${item.q}</div>
                <div class="options-group">
                    ${item.a.map((opt, i) => `
                        <label class="option-label" id="label-${idx}-${i}">
                            <input type="radio" name="q${idx}" value="${i}" onchange="removePending(${idx})"> ${opt}
                        </label>
                    `).join('')}
                </div>
            `;
            container.appendChild(block);
        });
    }

    function removePending(idx) {
        const block = document.getElementById(`block-${idx}`);
        block.classList.remove('pending');
    }

    function startTimer() {
        clearInterval(timerId);
        const timerElement = document.getElementById('timer');
        
        timerId = setInterval(() => {
            timeLeft--;
            const mins = Math.floor(timeLeft / 60);
            const secs = timeLeft % 60;
            timerElement.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
            
            if (timeLeft <= 0) {
                finalizeQuiz();
            }
        }, 1000);
    }

    function finalizeQuiz() {
        clearInterval(timerId);
        
        let correctCount = 0;
        let allAnswered = true;

        currentQuestions.forEach((item, idx) => {
            const radios = document.getElementsByName(`q${idx}`);
            let answered = false;
            radios.forEach(r => { if(r.checked) answered = true; });

            if (!answered) {
                document.getElementById(`block-${idx}`).classList.add('pending');
                allAnswered = false;
            }
        });

        if (!allAnswered) {
            alert("Responda todas as quest√µes!");
            return;
        }

        currentQuestions.forEach((item, idx) => {
            const radios = document.getElementsByName(`q${idx}`);
            let selected = -1;
            radios.forEach(r => { if(r.checked) selected = parseInt(r.value); });

            document.getElementById(`label-${idx}-${item.c}`).classList.add('correct-answer');
            if (selected === item.c) {
                correctCount++;
            } else if (selected !== -1) {
                document.getElementById(`label-${idx}-${selected}`).classList.add('wrong-answer');
            }
            radios.forEach(r => r.disabled = true);
        });

        const percent = Math.round((correctCount / currentQuestions.length) * 100);
        const feedback = document.getElementById('feedback-msg');
        
        if (percent >= 70) {
            feedback.textContent = "üéâ Parab√©ns! Aprovado!";
            feedback.style.color = "var(--success)";
        } else if (percent >= 50) {
            feedback.textContent = "üëç Boa tentativa!";
            feedback.style.color = "var(--warning)";
        } else {
            feedback.textContent = "üí™ Continue estudando!";
            feedback.style.color = "var(--danger)";
        }

        document.getElementById('results').style.display = 'block';
        document.getElementById('final-score').textContent = `Acertos: ${correctCount}/${currentQuestions.length}`;
        document.getElementById('final-percent').textContent = `${percent}%`;
        document.getElementById('finish-btn').style.display = 'none';
        document.getElementById('restart-btn').style.display = 'block';
        
        window.scrollTo({ top: 0, behavior: 'smooth' });
        saveProgress();
    }

    function startNewQuiz() {
        clearInterval(timerId);
        timeLeft = 20 * 60;
        
        document.getElementById('results').style.display = 'none';
        document.getElementById('finish-btn').style.display = 'block';
        document.getElementById('restart-btn').style.display = 'none';
        
        document.getElementById('timer').textContent = '20:00';
        
        initQuiz();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    window.onload = initQuiz;
</script>
</body>
</html>
